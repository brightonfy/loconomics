@*
This page receives a rating value and paints a 5 star rating radio list with that value

INPUT:
    PageData[0] name : this is the name of the star rating list, note that every star rating in a page should have different names.
    PageData[1] value : the rating value, a decimal value between 0 and 5. 
    PageData[2] mode : this is a boolean value, telling if the star rating should be enable(for input ratings) or disabled(for just read ratings)

Use Example:
     //Define Parameter array
     String[] rating1data = { "name", "value", "true" };
     //Set values
     rating1data.SetValue(name, 0);//Rating Name
     rating1data.SetValue(value, 1);//Rating value
     rating1data.SetValue("true", 2);//Rating: enable or disable
     //Render the rating
     @Html.Label("rating1 ")
     @RenderPage(UrlUtil.LangPath + "Reviews/_StarRating.cshtml", rating1data) 
*@
@{
    var name = PageData[0];
    var value = 0m;
    var disabled = true;
    bool active4split = PageData["StarRating.ReadOnly.Active4Split"] ?? false;

    if (PageData[1] is decimal) {
        value = (decimal)PageData[1];
    } else {
        Decimal.TryParse(PageData[1], out value);
    }
    if (PageData[2] is bool) {
        disabled = (bool) PageData[2];
    } else {
        Boolean.TryParse(PageData[2], out disabled);
    }

    var checked025  = (value >= 0m && value <= 0.25m) ? "checked='checked'" : "";
    var checked05   = (value > 0.25m && value <= 0.5m) ? "checked='checked'" : "";
    var checked075 = (Decimal.Compare(value, 0.5m) > 0 && (Decimal.Compare(value, 0.75m) <= 0)) ? "checked='checked'" : "";
    var checked1 = (Decimal.Compare(value, 0.75m) > 0 && (Decimal.Compare(value, 1m) <= 0)) ? "checked='checked'" : "";
    
    var checked125 = (Decimal.Compare(value, 1m) > 0 && (Decimal.Compare(value, 1.25m) <= 0)) ? "checked='checked'" : "";
    var checked15 = (Decimal.Compare(value, 1.25m) > 0 && (Decimal.Compare(value, 1.5m) <= 0)) ? "checked='checked'" : "";
    var checked175 = (Decimal.Compare(value, 1.5m) > 0 && (Decimal.Compare(value, 1.75m) <= 0)) ? "checked='checked'" : "";
    var checked2 = (Decimal.Compare(value, 1.75m) > 0 && (Decimal.Compare(value, 2m) <= 0)) ? "checked='checked'" : "";

    var checked225 = (Decimal.Compare(value, 2m) > 0 && (Decimal.Compare(value, 2.25m) <= 0)) ? "checked='checked'" : "";
    var checked25 = (Decimal.Compare(value, 2.25m) > 0 && (Decimal.Compare(value, 2.5m) <= 0)) ? "checked='checked'" : "";
    var checked275 = (Decimal.Compare(value, 2.5m) > 0 && (Decimal.Compare(value, 2.75m) <= 0)) ? "checked='checked'" : "";
    var checked3 = (Decimal.Compare(value, 2.75m) > 0 && (Decimal.Compare(value, 3m) <= 0)) ? "checked='checked'" : "";

    var checked325 = (Decimal.Compare(value, 3m) > 0 && (Decimal.Compare(value, 3.25m) <= 0)) ? "checked='checked'" : "";
    var checked35 = (Decimal.Compare(value, 3.25m) > 0 && (Decimal.Compare(value, 3.5m) <= 0)) ? "checked='checked'" : "";
    var checked375 = (Decimal.Compare(value, 3.5m) > 0 && (Decimal.Compare(value, 3.75m) <= 0)) ? "checked='checked'" : "";
    var checked4 = (Decimal.Compare(value, 3.75m) > 0 && (Decimal.Compare(value, 4m) <= 0)) ? "checked='checked'" : "";

    var checked425 = (Decimal.Compare(value, 4m) > 0 && (Decimal.Compare(value, 4.25m) <= 0)) ? "checked='checked'" : "";
    var checked45 = (Decimal.Compare(value, 4.25m) > 0 && (Decimal.Compare(value, 4.5m) <= 0)) ? "checked='checked'" : "";
    var checked475 = (Decimal.Compare(value, 4.5m) > 0 && (Decimal.Compare(value, 4.75m) <= 0)) ? "checked='checked'" : "";
    var checked5 = (Decimal.Compare(value, 4.75m) > 0 && (Decimal.Compare(value, 5m) <= 0)) ? "checked='checked'" : "";
 }


 @if (!disabled) {
    <input name="@name" type="radio" class="star" value="1" @Html.Raw(checked1)/>
    <input name="@name" type="radio" class="star" value="2" @Html.Raw(checked2)/>
    <input name="@name" type="radio" class="star" value="3" @Html.Raw(checked3)/>
    <input name="@name" type="radio" class="star" value="4" @Html.Raw(checked4)/>
    <input name="@name" type="radio" class="star" value="5" @Html.Raw(checked5)/>
 } else if (!active4split) {
    <input name="@name" type="radio" class="star" @Html.Raw(checked1) disabled="disabled"/>
    <input name="@name" type="radio" class="star" @Html.Raw(checked2) disabled="disabled"/>
    <input name="@name" type="radio" class="star" @Html.Raw(checked3) disabled="disabled"/>
    <input name="@name" type="radio" class="star" @Html.Raw(checked4) disabled="disabled"/>
    <input name="@name" type="radio" class="star" @Html.Raw(checked5) disabled="disabled"/>
 } else {
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked025) disabled="disabled"/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked05)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked075)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked1)/>

    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked125)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked15)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked175)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked2)/>
    
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked225)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked25)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked275)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked3)/>

    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked325)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked35)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked375)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked4)/>

    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked425)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked45)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked475)/>
    <input name="@name" type="radio" class="star {split:4}" @Html.Raw(checked5)/>
 }