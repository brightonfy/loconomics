@*
This page receives a rating value and paints a 5 star rating radio list with that value

INPUT:
    PageData[0] name : this is the name of the star rating list, note that every star rating in a page should have different names.
    PageData[1] value : the rating value, a decimal value between 0 and 5. 
    PageData[2] mode : this is a boolean value, telling if the star rating should be enable(for input ratings) or disabled(for just read ratings)

Use Example:
     //Define Parameter array
     String[] rating1data = { "name", "value", "true" };
     //Set values
     rating1data.SetValue(name, 0);//Rating Name
     rating1data.SetValue(value, 1);//Rating value
     rating1data.SetValue("true", 2);//Rating: enable or disable
     //Render the rating
     @Html.Label("rating1 ")
     @RenderPage(UrlUtil.LangPath + "Reviews/StarRating.cshtml", rating1data) 
*@
@{
    var name = PageData[0];
    var value = 0m;
    var errorMsg = "The rating value entered is not in valid format (Decimal expected)";
    var userErrorMsg = "";

    try
    {
        value = Decimal.Parse(PageData[1]);
    }
    catch (Exception Exception)
    {
        errorMsg = Exception.Message;
        ModelState.AddError("star rating", userErrorMsg);
        //TODO ADD LOG MESSAGE
    }
    var checked025 = (Decimal.Compare(value, 0m) > 0 && (Decimal.Compare(value, 0.25m) <= 0)) ? "checked='checked'" : "";
    var checked05 = (Decimal.Compare(value, 0.25m) > 0 && (Decimal.Compare(value, 0.5m) <= 0)) ? "checked='checked'" : "";
    var checked075 = (Decimal.Compare(value, 0.5m) > 0 && (Decimal.Compare(value, 0.75m) <= 0)) ? "checked='checked'" : "";
    var checked1 = (Decimal.Compare(value, 0.75m) > 0 && (Decimal.Compare(value, 1m) <= 0)) ? "checked='checked'" : "";
    
    var checked125 = (Decimal.Compare(value, 1m) > 0 && (Decimal.Compare(value, 1.25m) <= 0)) ? "checked='checked'" : "";
    var checked15 = (Decimal.Compare(value, 1.25m) > 0 && (Decimal.Compare(value, 1.5m) <= 0)) ? "checked='checked'" : "";
    var checked175 = (Decimal.Compare(value, 1.5m) > 0 && (Decimal.Compare(value, 1.75m) <= 0)) ? "checked='checked'" : "";
    var checked2 = (Decimal.Compare(value, 1.75m) > 0 && (Decimal.Compare(value, 2m) <= 0)) ? "checked='checked'" : "";

    var checked225 = (Decimal.Compare(value, 2m) > 0 && (Decimal.Compare(value, 2.25m) <= 0)) ? "checked='checked'" : "";
    var checked25 = (Decimal.Compare(value, 2.25m) > 0 && (Decimal.Compare(value, 2.5m) <= 0)) ? "checked='checked'" : "";
    var checked275 = (Decimal.Compare(value, 2.5m) > 0 && (Decimal.Compare(value, 2.75m) <= 0)) ? "checked='checked'" : "";
    var checked3 = (Decimal.Compare(value, 2.75m) > 0 && (Decimal.Compare(value, 3m) <= 0)) ? "checked='checked'" : "";

    var checked325 = (Decimal.Compare(value, 3m) > 0 && (Decimal.Compare(value, 3.25m) <= 0)) ? "checked='checked'" : "";
    var checked35 = (Decimal.Compare(value, 3.25m) > 0 && (Decimal.Compare(value, 3.5m) <= 0)) ? "checked='checked'" : "";
    var checked375 = (Decimal.Compare(value, 3.5m) > 0 && (Decimal.Compare(value, 3.75m) <= 0)) ? "checked='checked'" : "";
    var checked4 = (Decimal.Compare(value, 3.75m) > 0 && (Decimal.Compare(value, 4m) <= 0)) ? "checked='checked'" : "";

    var checked425 = (Decimal.Compare(value, 4m) > 0 && (Decimal.Compare(value, 4.25m) <= 0)) ? "checked='checked'" : "";
    var checked45 = (Decimal.Compare(value, 4.25m) > 0 && (Decimal.Compare(value, 4.5m) <= 0)) ? "checked='checked'" : "";
    var checked475 = (Decimal.Compare(value, 4.5m) > 0 && (Decimal.Compare(value, 4.75m) <= 0)) ? "checked='checked'" : "";
    var checked5 = (Decimal.Compare(value, 4.75m) > 0 && (Decimal.Compare(value, 5m) <= 0)) ? "checked='checked'" : "";


    var disabled = Convert.ToBoolean(PageData[2]);
 }

 @if (!disabled)
 {
    <input name="@name" type="radio" class="star" value="1" @checked1/>
    <input name="@name" type="radio" class="star" value="2" @checked2/>
    <input name="@name" type="radio" class="star" value="3" @checked3/>
    <input name="@name" type="radio" class="star" value="4" @checked4/>
    <input name="@name" type="radio" class="star" value="5" @checked5/>
    <br />
 }
 else
 {
    <input name="@name" type="radio" class="star {split:4}" @checked025 disabled="disabled"/>
    <input name="@name" type="radio" class="star {split:4}" @checked05/>
    <input name="@name" type="radio" class="star {split:4}" @checked075/>
    <input name="@name" type="radio" class="star {split:4}" @checked1/>

    <input name="@name" type="radio" class="star {split:4}" @checked125/>
    <input name="@name" type="radio" class="star {split:4}" @checked15/>
    <input name="@name" type="radio" class="star {split:4}" @checked175/>
    <input name="@name" type="radio" class="star {split:4}" @checked2/>
    
    <input name="@name" type="radio" class="star {split:4}" @checked225/>
    <input name="@name" type="radio" class="star {split:4}" @checked25/>
    <input name="@name" type="radio" class="star {split:4}" @checked275/>
    <input name="@name" type="radio" class="star {split:4}" @checked3/>

    <input name="@name" type="radio" class="star {split:4}" @checked325/>
    <input name="@name" type="radio" class="star {split:4}" @checked35/>
    <input name="@name" type="radio" class="star {split:4}" @checked375/>
    <input name="@name" type="radio" class="star {split:4}" @checked4/>

    <input name="@name" type="radio" class="star {split:4}" @checked425/>
    <input name="@name" type="radio" class="star {split:4}" @checked45/>
    <input name="@name" type="radio" class="star {split:4}" @checked475/>
    <input name="@name" type="radio" class="star {split:4}" @checked5/>
    <br />
 }
