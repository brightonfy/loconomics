@using WebMatrix.Data;
@using WebMatrix.WebData;
@{
    Response.ContentEncoding = System.Text.Encoding.UTF8;
    var u = DashboardFunctions.GetUserRow();
    var isHomePage = PageData["IsHomePage"] ?? false;
}
<!doctype html>
    <!--[if lt IE 7]> <html class="no-js ie ie6 oldie" lang="en"> <![endif]-->
    <!--[if IE 7]>    <html class="no-js ie ie7 oldie" lang="en"> <![endif]-->
    <!--[if IE 8]>    <html class="no-js ie ie8 oldie" lang="en"> <![endif]-->
    <!--[if gt IE 8]> <html class="no-js ie" lang="en"> <![endif]-->
    <!--[if !IE]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
     <head>
          <meta charset="utf-8"/>
          <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
          <title>Loconomics - @Page.Title</title>
          <meta name="description" content=""/>
          <meta name="author" content=""/>
          <meta name="viewport" content="width=device-width,initial-scale=1"/><!-- Mobile viewport optimized: j.mp/bplateviewport -->
          <link rel="shortcut icon" href="@Href(UrlUtil.AppPath + "favicon.ico")" type="image/x-icon" />
          <link rel="stylesheet" href="@Href(UrlUtil.AppPath + "Styles/smoothness/jquery-ui-1.8.21.custom.css")"/>
           @* Our styles *@
           <link rel="stylesheet" href="@Href(UrlUtil.AppPath + "Styles/style.css?v=20120512")"/>
           <script src="@Href(UrlUtil.AppPath + "Scripts/modernizr.custom.2.5.3.js")" type="text/javascript"></script>
    </head>

    <body class="@PageData["BodyClass"]">
        @RenderBody()
        <header>
		    <div class="wrap">
			    <a id="logo" class="replace" href="@Href(UrlUtil.LangPath)">Loconomics, at your service.</a>
			    <ul>
				    <li><a class="replace icon twitter" href="#">Twitter</a> <a class="replace icon facebook" href="#">Facebook</a></li>
                    @if (WebSecurity.IsAuthenticated) {
			            <li>
					        <dl class="user-nav">
                                @{
                                    var usermenuGreeting = "Hi, {0}!";
                                    if (N.W(u.FullName) == null) {
                                        usermenuGreeting = "Hello!";
                                    } else {
                                        usermenuGreeting = String.Format(usermenuGreeting, u.FullName);
                                    }
						        <dt class="fancy">@(usermenuGreeting) &#x25BC;</dt>
                                }
						        <dd>
                                    <a href="@Href(UrlUtil.LangPath + "Dashboard/")" title="Dashboard">Dashboard</a>
                                    <a href="@Href(UrlUtil.LangPath + "Dashboard/Bookings/")">Your bookings</a>
                                    <a href="@Href(UrlUtil.LangPath + "Dashboard/Positions/")">Your positions</a>
                                    <a href="@Href(UrlUtil.LangPath + "Profile/?UserID=" + WebSecurity.CurrentUserId)">Public profile</a>
                                    <a href="@Href(UrlUtil.LangPath + "Dashboard/Account/")">Account</a>
                                    <a href="@Href(UrlUtil.LangPath + "Account/Logout/")">Logout</a>
						        </dd>
					        </dl>
				        </li>
                        if (!u.IsProvider){
			            <li><a class="button fancy" href="@Href(UrlUtil.LangPath + "Provider-sign-up/")">Become a provider</a></li>
                        }
                    } else {
                        <li class="new-user">
                            <a class="register" href="@(UrlUtil.LangPath)Account/Register/">Sign Up</a> | 
                            <a class="login" href="@(UrlUtil.LangPath)Account/Login/">Login</a> | 
                            <a id="launchHowItWorks" href="@(UrlUtil.LangPath)HowItWorks/">How it works</a>
                        </li>
                        <li><a class="button fancy" href="@(UrlUtil.LangPath)provider-sign-up/">Become a provider</a></li>
                    }
				    <li>
					    <dl class="lang-country">
						    <dt class="fancy"><img src="@Href(UrlUtil.AppPath + "Styles/images/us.png")" alt="US" />English &#x25BC;</dt>
						    <dd>
							    <a class="us" href="@Href(UrlUtil.LangPath)"><img src="@Href(UrlUtil.AppPath + "Styles/images/us.png")" alt="US" />English</a>
							    <a class="es" href="@Href(UrlUtil.LangPath)"><img src="@Href(UrlUtil.AppPath + "Styles/images/es.png")" alt="Spain" />Español</a>
							    <a class="es" href="@Href(UrlUtil.LangPath)"><img src="@Href(UrlUtil.AppPath + "Styles/images/es.png")" alt="Spain" />English</a>
							    <a class="us" href="@Href(UrlUtil.LangPath)"><img src="@Href(UrlUtil.AppPath + "Styles/images/us.png")" alt="US" />Español</a>
						    </dd>
					    </dl>
				    </li>
				
				    @{/*<li><a class="replace icon cart" href="#">Cart</a></li>*/}
			    </ul>
		    </div>
        </header>
        <footer><a href="@(UrlUtil.LangPath)About/">About</a> | <a href="@(UrlUtil.LangPath)About/TermsOfUse/">Terms of Use</a> | <a href="@(UrlUtil.LangPath)About/PrivacyPolicy/">Privacy Policy</a> | <a href="@Href(UrlUtil.LangPath + "HelpCenter/")">Help</a> | <a href="/Blog/">Blog</a></footer>
		<div id="modals">
			<div id="howItWorksModal" class="modal">
				<h2 class="cushycms">How It Works</h2>
				<ol id="howItWorks">
					<li class="find clearfix">
						<img class="num" src="@Href(UrlUtil.AppPath + "img/icon-01.png")" alt="1" />
						<img class="icon" src="@Href(UrlUtil.AppPath + "img/icon-cart-new.png")" alt="" />
						<h3 class="cushycms"><a href="/">Find, book, &amp; pay for a service.</a></h3>
					</li>
					<li class="performed clearfix">
						<img class="num" src="@Href(UrlUtil.AppPath + "img/icon-02.png")" alt="1" />
						<img class="icon" src="@Href(UrlUtil.AppPath + "img/icon-home-new.png")" alt="" />
						<h3 class="cushycms"><a href="/">Service performed.</a></h3>
					</li>
					<li class="share clearfix">
						<img class="num" src="@Href(UrlUtil.AppPath + "img/icon-03.png")" alt="1" />
						<img class="icon" src="@Href(UrlUtil.AppPath + "img/icon-share.png")" alt="" />
						<h3 class="cushycms"><a href="@Href(UrlUtil.LangPath)">Write a review &amp; tell your friends.</a></h3>
					</li>
				</ol>
			</div>
		</div><!-- #modals -->
        <div class="scripts">
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery-ui-1.8.21.custom.min.js")" type="text/javascript"></script>
            <script src="@Href(UrlUtil.AppPath + "Scripts/date.js")" type="text/javascript"></script>
            @if (LcData.GetCurrentLanguageID() == 2)
            {
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery.ui.datepicker-es.js")" type="text/javascript"></script>
            }
            
            @if (!isHomePage)
            {
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery.ba-hashchange.min.js")" type="text/javascript"></script>
            @* IagoSRL: Disable to investigate if really are being used this scripts from old code:
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery.selectboxes.pack.js")" type="text/javascript"></script>
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery.backgroundPosition.js")" type="text/javascript"></script>*@
            @*
            The author recommends replace the autocomplete plugin by the autocomplete widget included in jQuery.UI
            Original author migration guide: http://www.learningjquery.com/2010/06/autocomplete-migration-guide
            <script src="@Href(UrlUtil.AppPath + "Scripts/jquery.autocomplete.js")" type="text/javascript"></script>
            *@
		    <script src="@Href(UrlUtil.AppPath + "Scripts/jQuery.blockuUI.js")" type="text/javascript"></script>
            @* Our scripts *@
            <script type="text/javascript">
                @Html.Raw(UrlUtil.ToJsVar())
            </script>
            <script src="@Href(UrlUtil.AppPath + "Scripts/script.js?v=20120512")" type="text/javascript"></script>
            @* Javascript linked from asp.net *@
            }
            @Scripts.GetScriptTags()
            @if (PageData["InlineScript"] != null)
            {
                <script type="text/javascript">@Html.Raw(PageData["InlineScript"])</script>
            }
            @* Really this is needed? *@@*
           <!-- TODO Change UA-XXXXX-X to Loconomics ID-->
            <script type="text/javascript">
                window._gaq = [['_setAccount', 'UAXXXXXXXX1'], ['_trackPageview'], ['_trackPageLoadTime']];
                Modernizr.load({
                    load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
                });
            </script>*@
        </div>
    </body>
</html>
