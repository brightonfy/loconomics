@*
    This page paints a grid containing the messages received by the current user
    from a given provider and position

    INPUT
        providerID
        positionID
*@
@{
    //TODO add filters to get only the messages for a given provider and position
    var UserID = WebSecurity.CurrentUserId;
    var db = Database.Open("sqlloco");
    //TODO:UPDATE THE QUERY GET THE REQUIRED DATA
    var query = @"SELECT m.body, tm.fromID, u.FirstName, u.LastName
                FROM Messages m
                JOIN ThreadMessage tm ON (m.messageID = tm.messageID)
                JOIN Users u ON (u.UserID = @0)
                WHERE tm.toID = @0";
    var messages = db.Query(query,UserID);
    var grid = new WebGrid(messages, ajaxUpdateContainerId: "inbox_grid");                    
}
@*TODO: ADD REQUIRED COLUMNS (Ex: PHOTO...)*@
@grid.GetHtml(columns: grid.Columns(    
                                    grid.Column("FirstName", header:"From"),
                                    grid.Column("body", header:"Message Body")
                                    )
            )
