@using WebMatrix.Data;
@{

    var c = PageData["customerrow"];
    var p = PageData["providerrow"];
    var pos = PageData["positionrow"];
    string pageToLoad = "";
    
    using (var db = Database.Open("sqlloco")){
        
        // TODO: Get Customer Type Id   
        var clienttypeid = PageData["ClientTypeID"] = 1;     
        
        // Get our Pricing Type ID:
        int pricingtypeid = (int)db.QueryValue(@"
            SELECT  pricingtypeid
            FROM    positionpricingtype
            WHERE   countryid=@0 AND clienttypeid=@1 AND positionid=@2
        ", 1, clienttypeid, pos.PositionID);
        
        switch (pricingtypeid) {
            case 1: // Hours
                pageToLoad = "_CustomerHoursType.cshtml";
                break;
            case 2: // Custom
                pageToLoad = "_CustomerCustomType.cshtml";
                break;
            case 3: // Packages
                pageToLoad = "_CustomerPackagesType.cshtml";
                break;
            case 4: // Invoice
                pageToLoad = "_CustomerInvoiceType.cshtml";
                break;
        }
    }
}
    <fieldset class="pricing-wizard">
        <legend>Pricing estimate:</legend>
        @RenderPage(pageToLoad);
    </fieldset>