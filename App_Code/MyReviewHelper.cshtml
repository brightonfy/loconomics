@using System.Web.Caching;
@using System.Web.Helpers;
@using System.Web;
@using System.Web.Mail;
@functions { 

    void RegisterCacheEntry(string DummyCacheItemKey, double time)
    {  
        HttpContext.Current.Cache.Insert( DummyCacheItemKey, "Test", null, 
            DateTime.MaxValue, TimeSpan.FromMinutes(time), 
            CacheItemPriority.Normal,
            new CacheItemRemovedCallback( CacheItemRemovedCallback ) );
    }    

    void CacheItemRemovedCallback(string key, object value, CacheItemRemovedReason reason)
    {
        ObjectInfo.Print("Cache item callback: " + DateTime.Now.ToString());
        
        // Do the service works     
        WebMail.Send("manuel.fontan.garcia@gmail.com",
        subject: "Loconomics Review System",
        body: "asdfasdfa asdfasfasf lañkjsfañl fjasñ");
    }

}
 @helper  ScheduleEmail(string itemKey,double time)
 {     
    MyReviewHelper rh = new MyReviewHelper();
    rh.RegisterCacheEntry(itemKey,time);
 }
@helper SendEmail(){
    // Send email
    WebMail.Send("manuel.fontan.garcia@gmail.com",
    subject: "Loconomics Review System",
    body: "asdfasdfa asdfasfasf lañkjsfañl fjasñ");
}