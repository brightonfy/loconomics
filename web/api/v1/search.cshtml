@**
    Search API.
    
    It performs a search of users by job title or service category

    Options:

    GET /
        Returns SearchResults[]

    EXAMPLES {
        "Search Service Professionals by Job TitleID": {
            "url": "/api/v1/en-US/search",
            "get": {
                "jobTitleID": "106",
                "origLat": "37.788479",
                "origLong": "-122.40297199999998",
                "SearchDistance": "30"
            }
        },
        "Search Job Titles by Category": {
            "url": "/api/v1/en-US/search/job-titles",
            "get": {
                "category": "Home",
                "city": "San Francisco"
            }
        },
        "Search Service Professionals by Name": {
            "url": "/api/v1/en-US/search/search-term",
            "get": {
                "SearchTerm": "Joshua",
                "origLat": "37.788479",
                "origLong": "-122.40297199999998",
                "SearchDistance": "30"
            }
        }
}
**@
@functions{
    public class RestSearch : RestWebPage
    {
        public override dynamic Get()
        {
            if (UrlData.Count == 0)
            {
                var j = Request["jobTitleID"].AsInt();
                var lat = Request["origLat"].AsDecimal();
                var lng = Request["origLong"].AsDecimal();
                var dist = Request["searchDistance"].AsInt();
                return LcRest.ServiceProfessionalSearchResult.SearchByJobTitleID(j, lat, lng, dist, LcRest.Locale.Current);
            }
            else if (UrlData.Count == 1)
            {
                if (UrlData[0] == "job-titles")
                {
                    var cat = Request["category"];
                    var city = Request["city"];
                    return LcRest.JobTitleSearchResult.SearchByCategory(cat, city, LcRest.Locale.Current);
                }
                else if (UrlData[0] == "search-term")
                {
                    var j = Request["SearchTerm"];
                    var lat = Request["origLat"].AsDecimal();
                    var lng = Request["origLong"].AsDecimal();
                    var dist = Request["searchDistance"].AsInt();
                    return LcRest.ServiceProfessionalSearchResult.SearchByName(j, lat, lng, dist, LcRest.Locale.Current);
                }
            }
            return new HttpException(404, "Not found");
        }
    }
}
@{
    // Public access
    new RestSearch().JsonResponse(this);
}