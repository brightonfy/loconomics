@using WebMatrix.WebData;
@*
    Check to see for the job title if there are required and/or supplemental licenses per state. Initially, there will 1 generic supplemental license for all and 1 generic required license for certain positions. Eventually we may list the detailed licenses for each state and job title.

    EXAMPLES {
        "List job title licenses": {
            "url": "/api/v1/en-US/job-title-licenses/106",
            "get": { }
        }
    }
*@
@functions{
    public class RestJobTitleLicenses : RestWebPage
    {
        public override dynamic Get()
        {           
            if (UrlData.Count == 1 && UrlData[0].IsInt()) {
                var jobTitleID = UrlData[0].AsInt();
                var stateProvinceID = Request["stateProvinceID"].AsInt();
                return LcRest.JobTitleLicenses.Get(jobTitleID, LcRest.Locale.Current, stateProvinceID);
            }

            return base.Get();
        }
    }
}
@{
    Response.RestRequiresUser(LcData.UserInfo.UserType.ServiceProfessional);
    new RestJobTitleLicenses().JsonResponse(this);
}
