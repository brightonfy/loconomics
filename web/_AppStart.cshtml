@using WebMatrix.WebData;
@using WebMatrix.Security;
@using System.Web.Routing;
@{
    WebSecurity.InitializeDatabaseConnection("sqlloco", "userprofile", "UserId", "Email", false);

    // To let users of this site log in using their accounts from other sites such as Facebook, Twitter, 
    // and Windows Live, you must update this site. For more information visit 
    // http://go.microsoft.com/fwlink/?LinkID=226949
    //OAuthWebSecurity.RegisterOpenIDClient(BuiltInOpenIDClient.Google);
    //OAuthWebSecurity.RegisterOpenIDClient(BuiltInOpenIDClient.Yahoo);
    /*OAuthWebSecurity.RegisterOAuthClient( 
        BuiltInOAuthClient.Facebook, 
        consumerKey: "a",   // for Facebook, consumerKey is called AppID in the SDK 
        consumerSecret: "b");*/

    WebMail.SmtpServer = "mail.loconomics.com";
    WebMail.SmtpPort = 25;
    WebMail.EnableSsl = false;
    WebMail.UserName = "automated@loconomics.com";
    WebMail.Password = "Loconomic$2011";
    WebMail.From = "Loconomics <automated@loconomics.com>";

    // Facebook connection options to the Developer App Version 'Loconomics', SiteUrl: http://loconomics.com/
    // Facebook App Link: https://developers.facebook.com/apps/180579422039773
    Facebook.Initialize("180579422039773", "fab30a2288ce64be2b3b1e0f1113fb25", "sqlloco");

    /* Routing rules
     */
    // Public Profile URL optimized for SEO:
    RouteTable.Routes.MapWebPageRoute("{city}/{position}/{user}", "~/PublicProfileURL.cshtml");
    // CustomURL:
    RouteTable.Routes.MapWebPageRoute("{customurl}/", "~/CustomURL.cshtml");
    // REST API, locale independent:
    RouteTable.Routes.MapWebPageRoute("api/v1/{locale}/icalendar/{page}", "~/api/v1/icalendar/{page}.cshtml");
    RouteTable.Routes.MapWebPageRoute("api/v1/{locale}/users/{userID}/{page}/{*urldata}", "~/api/v1/users/{page}.cshtml");
    RouteTable.Routes.MapWebPageRoute("api/v1/{locale}/{page}/{*urldata}", "~/api/v1/{page}.cshtml");
}
