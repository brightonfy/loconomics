@using WebMatrix.Data;
@{
    LcHelpers.ProviderPage();
    var u = LcData.UserInfo.GetUserRow();
    var positionID = Request["PositionID"].AsInt();

    if (positionID > 0) {
        LcData.JobTitle.DeactivateUserJobTitle(u.UserID, positionID);

        if (Request.IsAjaxRequest()) {
            LcHelpers.ReturnJsonResult(101, null);
        }
    } else {
        if (Request.IsAjaxRequest()) {
            LcHelpers.ReturnJsonResult(103, new { Message = "We're sorry, we're unable to deactivate your profile.  Please contact us for help." });
        }
    }
    if (!Request.IsAjaxRequest()) {
        Response.Redirect(LcHelpers.GetRedirectURLFromReferrer("/dashboard"));
    }
}
