@* Location where services will be performed.
 *@
@using WebMatrix.Data;
@{
    // All the data for this component:
    var info = LcEmailTemplate.GetBookingInfo(PageData);
}
@if (info.booking.paymentCollected)
{
<!-- COMPACT ARTICLE SECTION -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td bgcolor="#ffffff" align="center" style="border-bottom: 1px solid #d2d2d2; padding: 0 15px 40px 15px;" class="section-padding">
            <table border="0" cellpadding="0" cellspacing="0" width="500" style="padding:0 0 20px 0;" class="responsive-table">
                <tr>
                    <td  valign="middle" style="padding: 10px 0 0 0;" class="mobile-hide"><a href="#" target="_blank"><img src="@(LcUrl.AppUrl)img/email/ion-card.png" alt="alt text here" width="150" height="150" border="0" style="display: block; font-family: Arial; color: #666666; font-size: 14px;"></a></td>
                    <td style="padding: 40px 0 0 0;" class="no-padding">
                        <!-- ARTICLE -->
                        <table border="0" cellspacing="0" cellpadding="0" width="100%">
                            <tr>
                                <td align="left" style="padding: 0 0 5px 25px; font-size: 22px; font-family: Helvetica, Arial, sans-serif; font-weight: normal; color: #333333;" class="padding-copy">Payment</td>
                            </tr>
                            <tr>
                                 <td align="left" style="padding: 10px 0 15px 25px; text-align: left; text-justify: auto; font-size: 16px; line-height: 24px; font-family: Helvetica, Arial, sans-serif; color: #666666;" class="padding-copy">

                                     @* To JOSH: the language 'have been authorized' is not correct if the service is more than 7 days from booking creation, on that case we COLLECTED the payment data (temporary saving the card at Braintree)
                                        and we will authorize in a scheduled task 48 hours before the service start.
                                        Maybe you still wan to communicate that is 'authorized' even if is not really, just to remark that, at some point, will really being authorized,
                                        BUT if that is not the case and you want to be accuracy, we know if was or not authorized with the flag info.booking.paymentAuthorized and offer an alternative language with a 'if', for example
                                        @if (info.booking.paymentAuthorized) {
                                            <span>Regular text for payment authorized</span>
                                        }
                                        else {
                                            <span>Alternative text for payment collected but not still authorized (will be 48hours before service)</span>
                                        }

                                        AS YOU WANT. I left regular option, same text ever, on next lines:
                                     *@

                                    Your card
                                    @if (!String.IsNullOrEmpty(info.booking.paymentLastFourCardNumberDigits)) {
                                        <span>ending in @(info.booking.paymentLastFourCardNumberDigits)</span>
                                    }
                                    has been authorized for @(info.booking.pricingSummary.totalPrice.Value.ToString("c")).
                                    It will be charged after @info.serviceProfessional.firstName completes your services.
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<!-- $PaymentStatus END -->
}