@{
    var booking = PageData["BookingData"];
    var itsUserType = PageData["ItsUserType"];
    var itsUserData = PageData["ItsUserData"];
    var confirmationLimitDate = PageData["ConfirmationLimitDate"];
}
<div class="requested-booking-times w-BookingDetails-RequestedTimes">
    @if (booking.BookingRequestStatusID == 2 && itsUserType == LcData.UserInfo.UserType.Customer)
    {
        <p class="info">
        @LcHelpers.GetUserDisplayName(itsUserData) has booked you as a @booking.PositionSingular and has chosen
        the following time(s) for you to meet up for an appointment. In order to accept the booking, choose one of these time slots
        <strong>within @LcData.Booking.ConfirmationLimitInHours hours from now (by @confirmationLimitDate.ToShortTimeString(), @confirmationLimitDate.ToLongDateString())</strong>.
        </p>
        <h5>Preferred time:</h5>
        if (booking.PreferredDateStart is DateTime || booking.PreferredDateEnd is DateTime)
        {
        <button type="button" class="button booking-request-action button-confirm-datetime" data-booking-request-id="@booking.BookingRequestID" data-date-type="preferred">
            Click here to confirm @LcHelpers.DateTimeRangeToString(booking.PreferredDateStart, booking.PreferredDateEnd)
        </button>
        }
        else
        {
            <div>Preferred time is not a available</div>
        }
        if (booking.AlternativeDate1Start is DateTime || booking.AlternativeDate2Start is DateTime)
        {
        <h5>Alternate time(s):</h5>
        }
        if (booking.AlternativeDate1Start is DateTime)
        {
        <button type="button" class="button booking-request-action button-confirm-datetime" data-booking-request-id="@booking.BookingRequestID" data-date-type="alternative1">
            Click here to confirm @LcHelpers.DateTimeRangeToString(booking.AlternativeDate1Start, booking.AlternativeDate1End)
        </button>
        }
        if (booking.AlternativeDate2Start is DateTime)
        {
        <button type="button" class="button booking-request-action button-confirm-datetime" data-booking-request-id="@booking.BookingRequestID" data-date-type="alternative2">
            Click here to confirm @LcHelpers.DateTimeRangeToString(booking.AlternativeDate2Start, booking.AlternativeDate2End)
        </button>
        }
        <h5>Decline booking request</h5>
        <button type="button" class="button booking-request-action button-decline-booking" data-booking-request-id="@booking.BookingRequestID">
            Decline booking request. You can offer alternative times, if you’d like.
        </button>
    }
    else if (booking.PreferredDateStart != null)
    {
        <p class="info">
        @if (itsUserType == LcData.UserInfo.UserType.Customer)
        {
            <text>@LcHelpers.GetUserDisplayName(itsUserData) has booked your @booking.PositionSingular services and chosen
            the following time(s) for you to provide the service:</text>
        }
        else
        {
            <text>You have booked @LcHelpers.GetUserDisplayName(itsUserData)'s @booking.PositionSingular services and chosen
            the following time(s) for the service:</text>
        }
        </p>
        <h5>Preferred time:</h5>
        if (booking.PreferredDateStart is DateTime || booking.PreferredDateEnd is DateTime)
        {
        <div class="selected-date preferred-date">
            @LcHelpers.DateTimeRangeToString(booking.PreferredDateStart, booking.PreferredDateEnd)
        </div>
        }
        else
        {
            <div>Preferred time is not available</div>
        }
        if (booking.AlternativeDate1Start is DateTime || booking.AlternativeDate2Start is DateTime)
        {
        <h5>Alternate time(s):</h5>
        }
        if (booking.AlternativeDate1Start is DateTime)
        {
        <div class="selected-date alternative-date alternative-date-1">
            @LcHelpers.DateTimeRangeToString(booking.AlternativeDate1Start, booking.AlternativeDate1End)
        </div>
        }
        if (booking.AlternativeDate2Start is DateTime)
        {
        <div class="selected-date alternative-date alternative-date-2">
            @LcHelpers.DateTimeRangeToString(booking.AlternativeDate2Start, booking.AlternativeDate2End)
        </div>
        }
    }
</div>