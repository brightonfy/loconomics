@*
    This page retrieves the user availability for the date range as JSON.

    INPUT:
        user
        start / date
        end
        type
*@
@{
    // Prepare result struct
    var result = new Dictionary<string, object>();
    int resultCode = -1;
    
    try {
        var type = Request["type"] ?? "weekly";
        
        var avail = new RestAvailability(false);
        result = avail.GetFor(Request, type);

        //throw new Exception("Inside Test error");

        // Success
        resultCode = 0;

    } catch(Exception ex){
        result["ErrorMessage"] = ex.Message;
    }

    // Output data
    LcHelpers.ReturnJsonResult(resultCode, result);
}
