<form id="referProfessionalsForm" data-bind="with: data" aria-describedby="referProfessionalsFormInstructions">
    <fieldset id="referProfessionalsForm-StepOne" class="refer-step" data-bind="attr: { hidden: !isAtStepOne() }, css: { 'is-loading': isLoadingStepOne }">
        <legend>Make an introduction</legend>
        <label for="referrerEmail">Your email address</label>
        <div class="input-group" data-bind="css: { 'has-error': email.error }">
            <div data-bind="template: { name: 'signup-field', data: { id: 'referrerEmail', name: 'email', field: email, placeholder: 'example@@address.com', type: 'email'} }, css: {'is-valid form-control inset': isEmailValid}, disable: emailIsLocked">
            </div>
            <div class="input-group-btn">
                <button type="submit" class="btn btn-secondary ion-arrow-right-c"  data-bind="text: $parent.submitText, disable: $parent.isLocked, click: $parent.save"  aria-label="Continue to the next step"></button>
            </div>
        </div>
        <div class="form-group">
            <input id="isServiceProfessional" type="checkbox" data-bind="checked: user.isServiceProfessional, disable: isLocked">
            <label for="isServiceProfessional" style="margin-left: 0.1875em;">I also offer local services</label>
        </div>
        <p id="referProfessionalsFormInstructions" class="help-block" data-bind="visible: !submitted()">Know a service professional in your community who could benefit from the power of Loconomics?</p>
    </fieldset>
    <fieldset id="referProfessionalsForm-StepTwo" class="refer-step" data-bind="attr: { hidden: !isAtStepTwo() }, css: { 'is-loading': isLoadingStepTwo }">
        <legend>Your name</legend>
        <div class="form-group has-feedback" data-bind="css: { 'has-error': email.error }">
            <label for="referrerFirstName">Your first name</label>
            <div data-bind="template: { name: 'signup-field', data: { id: 'referrerFirstName', name: 'firstName', field: firstName,  placeholder: '', type: 'text'} }, css: {'is-valid': isFirstNameValid}"></div>
        </div>
        <div class="form-group has-feedback" data-bind="css: { 'has-error': email.error }">
            <label for="referrerLastName">Your last name</label>
            <div data-bind="template: { name: 'signup-field', data: { id: 'referrerLastName', name: 'lastName', field: lastName,  placeholder: '', type: 'text'} }, css: {'is-valid': isLastNameValid}"></div>
        </div>
        <button type="submit" class="btn btn-secondary" data-bind="text: $parent.submitText, disable: $parent.isLocked, click: $parent.save">Continue</button>
    </fieldset>
    <fieldset id="referProfessionalsForm-StepThree" class="refer-step" data-bind="attr: { hidden: !isAtStepThree() }, css: { 'is-loading': isLoadingStepThree }">
        <legend data-bind="visible: !submitted()">Who's the service professional?</legend>
        <legend data-bind="visible: submitted">You're amazing â€“ thanks! Know another?</legend>
        <div class="form-group has-feedback" data-bind="css: { 'has-error': email.error }">
            <label for="referredFirstName">Their first name</label>
            <div data-bind="template: { name: 'signup-field', data: { id: 'referredFirstName', name: 'firstName', field: firstName,  placeholder: '', type: 'text'} }, css: {'is-valid': isFirstNameValid}"></div>
        </div>
        <div class="form-group has-feedback" data-bind="css: { 'has-error': email.error }">
            <label for="referredEmail">Their email address</label>
            <div data-bind="template: { name: 'signup-field', data: { id: 'referredEmail', name: 'email', field: email, placeholder: 'example@@address.com', type: 'email'} }, css: {'is-valid': isEmailValid}, disable: emailIsLocked">
            </div>
        </div>
        <p>and/or</p>
        <div class="form-group has-feedback" data-bind="css: { 'has-error': email.error }">
            <label for="signupNewsletterEmail">Their phone number</label>
            <div data-bind="template: { name: 'signup-field', data: { id: 'referredPhoneNumber', name: 'phone', field: phone, placeholder: '', type: 'tel' } }, css: {'is-valid': isPhoneValid }"></div>
        </div>
        <p id="referredProfessionalFormInstructions" class="help-block">Fear not, we will not spam.</p>
        <button type="submit" class="btn btn-secondary" data-bind="text: $parent.submitText, disable: $parent.isLocked, click: $parent.save">Make introduction</button>
    </fieldset>
</form>