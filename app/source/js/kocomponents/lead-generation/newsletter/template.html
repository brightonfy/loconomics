<form id="newsletterSignupForm" class="LeadGeneration" aria-describedby="newsletterSignupFormInstructions">
    <fieldset data-bind="visible: !isAnonymous(), ifnot: isAnonymous">
        <div class="col-xs-12">
            <legend>Stay informed</legend>
            <p>You can subscribe or unsubscribe to Loconomics information <a class="btn btn-link btn-inline" href="/privacySettings">righ at the privacy settings</a>.</p>
        </div>
    </fieldset>
    <fieldset data-bind="visible: isDone, if: isDone">
        <div class="col-xs-12">
            <legend>Thank you</legend>
            <p id="newsletterSignupFormThankYou">We'll keep you in the loop!</p>
        </div>
    </fieldset>
    <fieldset data-bind="visible: !isDone() && isAnonymous(), if: !isDone() && isAnonymous()">
        <div class="col-xs-12">
            <legend>Stay informed</legend>
            <label for="signupNewsletterEmail">Email address</label>
        </div>
        <div class="col-xs-9 col-sm-10 col-md-9" data-bind="css: { 'has-error': errorMessage }">
            <div class="form-group" data-bind="css: { 'has-error': errorMessage, 'has-feedback': isEmailValid }">
                <input class="form-control"
                    id="signupNewsletterEmail"
                    type="email"
                    placeholder="example@address.com"
                    data-bind="
                        textInput: email,
                        popover: { content: errorMessage, trigger: 'focus', container: 'body', placement: 'top' },
                        disable: isLocked,
                        css: { 'is-valid': isEmailValid }
                    " />
                <i class="form-control-feedback text-success ion-android-done"
                    data-bind="visible: isEmailValid"
                    aria-hidden="true"></i>
            </div>
        </div>
        <div class="col-xs-3 col-sm-2 col-md-3 col-lg-2">
            <button type="submit" class="btn btn-secondary btn-block"
                data-bind="disable: isLocked, click: save"
                aria-label="Sign up for newsletter">
                <icon-dec data-bind="visible: !isSaving()" params="icon: 'ion-arrow-right-c'"></icon-dec>
                <icon-dec data-bind="visible: isSaving()" params="icon: 'ion-android-sync'"></icon-dec>
            </button>
        </div>
        <div class="checkbox-inline col-xs-10 col-offset-1">
            <input id="newsletterSignupForm-isServiceProfessional" type="checkbox" data-bind="checked: isServiceProfessional, disable: isLocked">
            <label for="newsletterSignupForm-isServiceProfessional">I offer local services</label>
        </div>
        <p id="newsletterSignupFormInstructions" class="help-block col-xs-12">Spam-free information â€“ you can unsubscribe at any time.</p>
    </fieldset>
</form>