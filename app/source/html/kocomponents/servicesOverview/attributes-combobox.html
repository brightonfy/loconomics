<div>
    <input-autocomplete params="
        id: id,
        name: name,
        placeholder: 'Select suggested or add new',
        value: value,
        suggestions: suggestions,
        onSelect: selectAttribute,
        isDisabled: isDisabled,
        extraData: {
            clearValue: clearValue,
            expandedByUser: expandedByUser,
            expandAutocomplete: expandAutocomplete,
            collapseAutocomplete: collapseAutocomplete
        }">
        <div slot="afterInput" class="input-group-btn">
            <!-- ko if: value -->
            <button type="button" class="btn btn-default"
                data-bind="click: extraData.clearValue, disable: isDisabled">
                <icon-dec params="icon: 'ion-android-close'"></icon-dec>
                <span class="sr-only">Clear</span>
            </button>
            <!-- /ko -->
            <!-- ko if: !value() && !extraData.expandedByUser() -->
            <button type="button" class="btn btn-default"
                data-bind="click: extraData.expandAutocomplete, disable: isDisabled">
                <icon-dec params="icon: 'ion-arrow-down-b'"></icon-dec>
                <span class="sr-only">Show all</span>
            </button>
            <!-- /ko -->
            <!-- ko if: !value() && extraData.expandedByUser() -->
            <button type="button" class="btn btn-default"
                data-bind="click: extraData.collapseAutocomplete, disable: isDisabled">
                <icon-dec params="icon: 'ion-arrow-up-b'"></icon-dec>
                <span class="sr-only">Close</span>
            </button>
            <!-- /ko -->
        </div>
        <template slot="suggestions">
            <div class="SearchResultsPreview">
                <div data-bind="visible: suggestions().attributes.length > 0">
                    <h2 class="SearchResultsPreview-h">Suggestions (or add new):</h2>
                    <ul data-bind="foreach: suggestions().attributes">
                        <li class="Result" data-bind="attr: {
                                id: $parent.id() + '-suggestion' + $index(),
                                'data-input-autocomplete-suggestion': name
                            }">
                            <div class="Result-info">
                                <span class="Result-name" data-bind="text: name"></span>
                                <span class="Result-description hidden-xs hidden-sm"
                                    data-bind="text: description, visible: description"></span>
                            </div>
                            <span class="btn btn-secondary btn-md btn-inline">Add</span>
                        </li>
                    </ul>
                </div>
                <div class="Result" data-bind="visible: suggestions().attributes.length === 0">
                    <strong>You've added all suggestions.</strong>
                </div>
            </div>
        </template>
    </input-autocomplete>
</div>
