<!-- Activity listing -->
<div data-activity="listingEditor" class="Listing" data-bind="css: { 'is-loading': isLoading }">
    <app-message-bar params="editListing: editListing, jobTitle: jobTitleSingularName, isActive: listingIsActive, visible: isMessageBarVisible, tone: messageBarTone" title="Alert">
        <p class="small">
            <span data-bind="text: jobTitle"></span> listing is <span data-bind="ifnot:isActive">inactive.</span><span data-bind="if:isActive">active.</span>
            <button data-bind="click: editListing" class="btn btn-sm btn-default"><span class="fa ion ion-edit"></span> Edit</button>
        </p>
    </app-message-bar>
    <app-loading-spinner params="mod: 'xl floating'"></app-loading-spinner>
    <div data-bind="with: user">
        <!-- <nav id="listing-editor-navigation" class="row" title="Listing shortcuts">
            <ul>
                <li data-bind="visible: $root.hasServicesOverview"><a href="#listing-editor-services-overview">Overview</a></li>
                <li><a href="listing-editor-offerings">Offerings</a></li>
                <li><a href="#listing-editor-reviews">Reviews</a></li>
                <li><a href="#listing-editor-photos">Photos</a></li>
                <li><a href="#listing-editor-locations">Location</a></li>
                <li><a href="#listing-editor-credentials">Credentials</a></li>
                <li><a href="#listing-editor-about-service-professional">About</a></li>
            </ul>
        </nav> -->
        <section id="listing-editor-service-professional-info" class="col-xs-12 col-md-12 Listing-heading" title="Information about service professional">
            <div class="Listing-professionalPic">
                <div class="Avatar Avatar--primary Avatar--lg">
                    <img data-bind="attr: {src: profile().photoUrl()}" alt="Public profile photo of you" >
                </div>
                <br>
                <a data-bind="attr: {href: '#!publicProfilePicture' + $root.returnLinkGeneralActivity() }" class="btn btn-default" aria-label="Edit your public profile photo">Edit photo</a>
            </div>
            <div class="Listing-bookingInfo">
                <h1><span data-bind="text: profile().firstNameLastInitial()"></span><br><span data-bind="text: selectedJobTitle() && selectedJobTitle().jobTitleSingularName()"></span></h1>
                <p><span data-bind="visible: profile().businessName(), text: profile().businessName()"></span><span class="text-muted" data-bind="visible: !profile().businessName()"><em>Your business name</em></span></p>
                <p><span data-bind="visible: profile().serviceProfessionalWebsiteUrl(), text: profile().serviceProfessionalWebsiteUrl()"></span><span class="text-muted" data-bind="visible: !profile().serviceProfessionalWebsiteUrl()"><em>Your business website</em></span></p>
                <a data-bind="attr: {href: '#!serviceProfessionalBusinessInfo' + $root.returnLinkGeneralActivity() }" class="btn btn-default" aria-label="Edit your your business info">Edit business info</a>
                <div data-bind="with: selectedJobTitle">
                    <div data-bind="visible: serviceAttributes().hasExperienceLevel(), with: serviceAttributes().experienceLevel">
                        <p>
                            Experience: 
                            <span data-bind="text: name"></span> 
                            <a class="btn btn-icon-link" data-bind="attr: {href: '#!servicesOverview/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Edit your experience level' }"><icon-dec params="icon: 'ion-edit'"></icon-dec></a>
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <div class="container">
            <section id="listing-editor-services-overview" class="row" data-bind="with: selectedJobTitle" title="">
                <div class="col-xs-12 col-md-12 SectionHeading" >
                    <h2><icon-dec params="icon: 'ion-clipboard'"></icon-dec> Overview of services</h2>
                    <a data-bind="visible: $root.hasServicesOverview, attr: {href: '#!servicesOverview/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Edit the overview of your services' }" class="btn btn-default pull-right">Edit</a>
                    <a data-bind="visible: !$root.hasServicesOverview, attr: {href: '#!servicesOverview/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Add an overview of your '+ jobTitleSingularName() + ' services' }" class="btn btn-default pull-right">Add</a>
                </div>
                <div class="col-xs-12 col-md-12" data-bind="visible: $root.hasServicesOverview">
                    <p class="Listing-overview" data-bind="text: intro, visible: hasIntro"></p>
                    <ul class="Listing-overviewAttributes" data-bind="foreach: serviceAttributes().serviceAttributes">
                        <li class="col-xs-12 col-md-4">
                            <h5 class="text-uppercase"  data-bind="text: name"></h5>
                            <ul data-bind="foreach: serviceAttributes">
                                <li>
                                    <p><icon-dec params="icon: 'ion-android-done'"></icon-dec> <span data-bind="text: name"></span></p>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </section>
            <section id="listing-editor-offerings" class="row" data-bind="with: selectedJobTitle" title="">
                <!-- <h2 data-bind="visible: clientSpecificServices().length > 0"><i class="ion-social-usd-outline"></i> Offerings Only For You</h2>
                <div class="row" data-bind="template: { name: 'listing-editor-offering-template', foreach: clientSpecificServices() }"></div> -->
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-pricetags-outline'"></icon-dec> Offerings<span class="text-danger" data-bind="visible: publicServices()"><em> (REQUIRED)</em></span></h2>
                    <a data-bind="visible: publicServices(), attr: {href: '#!serviceProfessionalService/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Edit your '+ jobTitleSingularName() + ' offerings' }" class="btn btn-default pull-right" aria-label="Edit offerings">Edit</a>
                    <a data-bind="visible: !publicServices(), attr: {href: '#!serviceProfessionalService/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Add your  '+ jobTitleSingularName() + ' offerings' }" class="btn btn-default pull-right" aria-label="Add offerings">Add</a>
                </div>
                <!-- <div data-bind="template: { name: 'offerings-select-template', data: serviceProfessionalServices }"></div>  -->
                <ul data-bind="template: { name: 'offering-card-edit-template', foreach: publicServices() }"></ul>
            </section>
            <section id="listing-editor-reviews" class="row" data-bind="with: selectedJobTitle" title="">
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-chatboxes-outline'"></icon-dec> Reviews (<span data-bind="text: rating() && rating().totalRatings"></span>) <app-stars-rating params="rating: rating() && rating().ratingAverage, size: 'sm'"></app-stars-rating></h2>
                </div>
                <div class="col-xs-12 col-md-12">
                    <h3>Summary</h3>
                    <div class="row">
                        <p class="col-xs-5 col-md-2" aria-describedby="rating1stars">Quality of Work</p>
                        <app-stars-rating id="rating2stars" class="col-xs-5 col-md-2" params="rating: rating() && rating().rating1, size: 'xs'"></app-stars-rating>
                    </div>    
                    <div class="row">
                        <p class="col-xs-5 col-md-2" aria-describedby="rating2stars">Environment</p>
                        <app-stars-rating id="rating2stars" class="col-xs-5 col-md-2" params="rating: rating() && rating().rating2, size: 'xs'"></app-stars-rating>
                    </div>    
                    <div class="row">
                        <p class="col-xs-5 col-md-2" aria-describedby="rating3stars">Professionalism</p>
                        <app-stars-rating id="rating3stars" class="col-xs-5 col-md-2" params="rating: rating() && rating().rating3, size: 'xs'"></app-stars-rating>
                    </div>
                </div>
                <div class="row" data-bind="visible: $root.reviews.list().length">
                    <ul data-bind="template: { name: 'review-card-template', foreach: $root.reviews.list() }"></ul>
                    <div class="col-xs-12 col-md-12 text-center" data-bind="visible: !$root.reviews.endReached()">
                        <button class="btn btn-primary" data-bind="click: $root.reviews.loadOlder">View more reviews</button>
                    </div>
                </div>
            </section>
            <section id="listing-editor-photos" class="row" data-bind="visible: $root.workPhotos().length, with: selectedJobTitle" title="">
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-camera-outline'"></icon-dec> Photos</h2>
                    <a data-bind="visible: $root.workPhotos().length, attr: {href: '#!workPhotos/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Edit the photos of your '+ jobTitleSingularName() + ' work' }" class="btn btn-default pull-right">Edit</a>
                    <a data-bind="visible: !$root.workPhotos().length, attr: {href: '#!workPhotos/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Add photos your '+ jobTitleSingularName() + ' work' }" class="btn btn-default pull-right">Add</a>
                </div>
                <div class="row" data-bind="foreach: $root.workPhotos">
                    <figure class="col-xs-12 col-sm-6">
                        <img class="display-block" data-bind="attr: { src: url}">
                        <figcaption class="text-center" data-bind="text: caption"></figcaption>
                    </figure>
                </div>
                <div class="col-xs-12 col-md-12 text-center" data-bind="visible: $root.viewMoreWorkPhotosLabel()">
                    <button class="btn btn-primary" data-bind="text: $root.viewMoreWorkPhotosLabel, click: $root.viewAllPhotos"></button>
                </div>
            </section>
            <section id="listing-editor-hours" class="row" title="">
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-clock-outline'"></icon-dec> Hours</h2>
                    <a data-bind="attr: {href: '#!schedulingPreferences' + $root.returnLinkGeneralActivity(),'aria-label': 'Edit your hours and scheduling preferences' }" class="btn btn-default pull-right">Edit</a>
                </div>
                <div class="col-xs-12 col-md-12" data-bind="template: { name: 'service-professional-hours-template', data: weeklySchedule() }"></div>
            </section>
            <section id="listing-editor-weekly-schedule" class="row" data-bind="visible: $root.serviceAddresses().length" title="">
                <div class="col-xs-12 col-md-12 SectionHeading" data-bind="with: selectedJobTitle">
                    <h2><icon-dec params="icon: 'ion-ios-location-outline'"></icon-dec> Locations</h2>
                    <a data-bind="visible: $root.serviceAddresses().length, attr: {href: '#!serviceAddresses/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Edit your '+ jobTitleSingularName() + ' locations' }" class="btn btn-default pull-right">Edit</a>
                    <a data-bind="visible: !$root.serviceAddresses().length, attr: {href: '#!serviceAddresses/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Add '+ jobTitleSingularName() + ' locations' }" class="btn btn-default pull-right">Add</a>
                </div>
                <ul data-bind="template: { name: 'location-card-edit-template', foreach: $root.serviceAddresses() }"></ul>
            </section>
            <section id="listing-editor-credentials" class="row" title="">
                <div class="col-xs-12 col-md-12 SectionHeading" data-bind="with: selectedJobTitle">
                    <h2><icon-dec params="icon: 'fa-id-card-o'"></icon-dec> Credentials</h2>
                    <a data-bind="visible: licensesCertifications().length, attr: {href: '#!licensesCertifications/' + $root.returnLinkJobTitleActivity(), 'aria-label': 'Edit your '+ jobTitleSingularName() + ' credentials' }" class="btn btn-default pull-right">Edit</a>
                    <a data-bind="visible: !licensesCertifications().length, attr: {href: '#!licensesCertifications/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Add '+ jobTitleSingularName() + ' credentials' }" class="btn btn-default pull-right">Add</a>
                </div>
                <div data-bind="visible: selectedJobTitle() && selectedJobTitle().licensesCertifications().length">
                    <ul data-bind="template: { name: 'license-card-edit-template', foreach: selectedJobTitle() && selectedJobTitle().licensesCertifications }"></ul>
                </div>
                <div data-bind="visible: education().length">
                    <ul data-bind="template: { name: 'education-card-edit-template', foreach: education }"></ul>
                </div>
            </section>
            <section id="listing-editor-verifications" class="row" title="">
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-checkmark-outline'"></icon-dec> Verifications</h2>
                    <a data-bind="attr: {href: '#!verifications' + $root.returnLinkGeneralActivity(),'aria-label': 'View your verifications' }" class="btn btn-default pull-right">View</a>
                </div>
                <div data-bind="visible: verifications().length">
                    <div class="row" data-bind="foreach: verifications">
                        <div class="col-xs-6 col-sm-3">
                        <i class="ion-android-done"></i> <p data-bind="text: verification().name"></p>
                        </div>
                    </div>
                </div>
            </section>
            <section id="listing-editor-booking-policies" class="row" data-bind="with: selectedJobTitle" title="">
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-checkmark-outline'"></icon-dec> Booking policies</h2>
                    <a data-bind="attr: {href: '#!bookingPolicies/' + $root.returnLinkJobTitleActivity(),'aria-label': 'Edit your ' + jobTitleSingularName() + ' booking policies' }" class="btn btn-default pull-right">Edit</a>
                </div>
                <div class="col-xs-12 col-md-6">
                    <h3>Your instant booking policy</h3>
                    <div data-bind="visible: !instantBooking()">
                        <strong>Acceptance required</strong>
                        <p>Clients will choose up to three times for their appointment when booking your <span class="text-lowercase" data-bind="text: jobTitleSingularName()"></span> offerings. You'll then have to approve one of them within 18 hours. We recommend this if you're using another scheduler software.</p>
                    </div>
                    <div data-bind="visible: instantBooking()">
                        <strong>Instant booking</strong>
                        <p>Clients love the ability to book <span class="text-lowercase" data-bind="text: jobTitleSingularName()"></span> services on the spot, but this works only if you keep your calendar up-to-date. You can <a data-bind="attr: {href: '#!calendarSyncing' + $root.returnLinkGeneralActivity() }">sync your calendars</a> to make this easier for you.</p>
                    </div>
                </div>
                <div class="col-xs-12 col-md-6">
                    <h3> Your cancellation policy</h3>
                    <p data-bind="template: { name: 'cancellationPolicy-info-template', data: { policy: cancellationPolicy() } }"></p>
                </div>
            </section>
            <section id="listing-editor-about-service-professional" class="row" title="">
                <div class="col-xs-12 col-md-12 SectionHeading">
                    <h2><icon-dec params="icon: 'ion-ios-book-outline'"></icon-dec> About <span data-bind="text: profile().firstName"></span></h2>
                    <a data-bind="visible: profile().publicBio, attr: {href: '#!publicBio' + $root.returnLinkGeneralActivity(),'aria-label': 'Edit your public bio' }" class="btn btn-default pull-right">Edit</a>
                    <a data-bind="visible: !profile().publicBio, attr: {href: '#!publicBio' + $root.returnLinkGeneralActivity(),'aria-label': 'Add your public bio' }" class="btn btn-default pull-right">Add</a>
                </div>
                <p class="Listing-publicBio" data-bind="text: profile().publicBio"></p>
            </section>
        </div>
    </div>
</div>
