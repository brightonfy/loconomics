<!-- Activity listing -->
<div data-activity="listing" data-bind="css: { 'is-loading': isLoading }">
    <app-message-bar params="editListing: editListing, jobTitle: jobTitleSingularName, isActive: listingIsActive, visible: isMessageBarVisible, tone: messageBarTone" title="Alert">
        <p class="small">
            <span data-bind="text: jobTitle"></span> listing is <span data-bind="ifnot:isActive">inactive.</span><span data-bind="if:isActive">active.</span>
            <button data-bind="click: editListing" class="btn btn-sm btn-default"><span class="fa ion ion-edit"></span> Edit</button>
        </p>
    </app-message-bar>
    <app-loading-spinner params="mod: 'xl floating'"></app-loading-spinner>
    <div data-bind="with: user">
        <section id="listing-service-professional-info" title="Information about service professional">
            <img data-bind="attr: {src: profile().photoUrl()}" alt="Image of service professional">
            <h3 data-bind="text: profile().fullName()"></h3>
            <h4 data-bind="visible: profile().businessName(), text: profile().businessName()"></h4>
            <h2 data-bind="text: selectedJobTitle() && selectedJobTitle().jobTitleSingularName()"></h2>
            <div data-bind="with: selectedJobTitle">
                 <app-stars-rating params="rating: rating() && rating().ratingAverage, total: rating() && rating().totalRatings, size: 'sm'"></app-stars-rating>
            </div>
            <nav id="listing-navigation" title="Listing shortcuts">
                <ul>
                    <li data-bind="visible: $root.hasServicesOverview"><a href="#listing-services-overview">Overview</a></li>
                    <li><a href="listing-offerings">Offerings</a></li>
                    <li><a href="#listing-reviews">Reviews</a></li>
                    <li><a href="#listing-photos">Photos</a></li>
                    <li><a href="#listing-locations">Location</a></li>
                    <li><a href="#listing-credentials">Credentials</a></li>
                    <li><a href="#listing-about-service-professional">About</a></li>
                </ul>
            </nav>
            <button data-bind="attr: { href: $root.getBookLink }">Book</button>
            <p>Response time <span data-bind="text: stats() && stats().responseTimeText"></span></p>
            
        </section>
        <section id="listing-services-overview" data-bind="visible: $root.hasServicesOverview, with: selectedJobTitle" title="">
            <h2><i class="ion-clipboard"></i> Overview of services</h2>
            <p data-bind="text: intro, visible: hasIntro"></p>
            <div data-bind="foreach: serviceAttributes().serviceAttributes">
                <div data-bind="text: name"></div>
                    <div data-bind="foreach: serviceAttributes" class="clearfix">
                    <i class="icon ion-android-done"></i> <span data-bind="text: name"></span>
                    </div>
            </div>
            <div data-bind="visible: serviceAttributes().hasExperienceLevel(), with: serviceAttributes().experienceLevel">
                <h5>Experience</h5>
                <div class="clearfix">
                    <div class="col-xs-6 col-md-4 pad5l pad5r">
                        <i class="icon ion-android-done"></i> <span data-bind="text: name"></span>
                    </div>
                </div>
            </div>
        </section>
        <section id="listing-offerings" data-bind="with: selectedJobTitle" title="">
                <script type="text/html" id="profile-services-listing-template">
                    <div class="col-xs-6">
                        <h5 data-bind="text: name"></h5>
                        <p data-bind="text: displayedDurationAndPrice"></p>
                        <p data-bind="visible: description, text: description"></p>
                    </div>
                </script>
                <h2 data-bind="visible: clientSpecificServices().length > 0"><i class="ion-social-usd-outline"></i> Offerings Only For You</h2>
                <div class="row" data-bind="template: { name: 'profile-services-listing-template', foreach: clientSpecificServices() }"></div>
                <h2><i class="ion-social-usd-outline"></i> Offerings</h2>
                <div class="row" data-bind="template: { name: 'profile-services-listing-template', foreach: publicServices() }"></div>
        </section>
        <section id="listing-reviews" data-bind="with: selectedJobTitle" title="">
            <h2><i class="ion-ios-chatboxes-outline"></i> Reviews (<span data-bind="text: rating() && rating().totalRatings"></span>)
            <app-stars-rating params="rating: rating() && rating().ratingAverage, size: 'sm'"></app-stars-rating>
            </h2>
            <h3>Summary</h3>
            <div class="row">
                <div class="col-xs-5 col-sm-4 col-md-3">Quality of Work</div>
                <span class="col-xs-5 col-sm-4">
                    <app-stars-rating params="rating: rating() && rating().rating1, size: 'xs'"></app-stars-rating>
                </span>
            </div>
            <div class="row">
                <div class="col-xs-5 col-sm-4 col-md-3">Environment</div>
                <span class="col-xs-5 col-sm-4">
                    <app-stars-rating params="rating: rating() && rating().rating2, size: 'xs'"></app-stars-rating>
                </span>
            </div>
            <div class="row">
                <div class="col-xs-5 col-sm-4 col-md-3">Professionalism</div>
                <span class="col-xs-5 col-sm-4">
                    <app-stars-rating params="rating: rating() && rating().rating3, size: 'xs'"></app-stars-rating>
                </span>
            </div>
            <div class="row" data-bind="visible: $root.reviews.list().length">
                <div data-bind="foreach: $root.reviews.list()">
                    <div class="col-xs-12 col-sm-6">
                        <div class="row">
                            <div class="col-xs-3"><i class="Avatar Avatar--xs Avatar--primary"><img src="https://loconomics.com/en-US/Profile/Photo/"></i></div>
                            <h5 data-bind="text: reviewerName"></h5>
                            <p>Client since <span data-bind="text: reviewerUserSince, format: { type: 'datetime', format: 'MMMM YYYY' }"></span></p>
                        </div>
                        <p data-bind="text: publicReview"></p>
                    </div>
                </div>
                <div class="col-sm-12" data-bind="visible: !$root.reviews.endReached()">
                    <button data-bind="click: $root.reviews.loadOlder">View more reviews</button>
                </div>
            </div>
        </section>
        <section id="listing-photos" data-bind="visible: $root.workPhotos().length" title="">
            <h2><i class="ion-ios-camera-outline"></i> Photos of <span data-bind="text: profile().firstName"></span>'s work</h2>
            <div class="row" data-bind="foreach: $root.workPhotos">
                <figure class="col-xs-12 col-sm-6">
                    <img class="display-block" data-bind="attr: { src: url}" alt="work">
                    <figcaption data-bind="text: caption"></figcaption>
                </figure>
            </div>
            <div class="col-sm-12" data-bind="visible: $root.viewMoreWorkPhotosLabel()">
                <button data-bind="text: $root.viewMoreWorkPhotosLabel, click: $root.viewAllPhotos"></button>
            </div>
        </section>
        <section id="listing-locations" data-bind="visible: $root.serviceAddresses().length" title="">
            <h2><i class="ion-ios-location-outline"></i> Locations</h2>
            <div class="row clearfix" data-bind="foreach: $root.serviceAddresses()">
                <div class="col-xs-12 col-sm-6">
                    <h3 data-bind="text: addressName"></h3>
                    <p data-bind="text: addressLine"></p>
                    <p data-bind="text: cityStateLine"></p>
                    <p data-bind="visible: !addressLine()" aria-hidden="true">&nbsp;</p>
                    <app-address-map data-bind="visible: latitude() && longitude()" params="lat: latitude, lng: longitude, isServiceLocation: isServiceLocation, radius: serviceRadius"></app-address-map>
                </div>
            </div>
        </section>
        <section id="listing-credentials" title="">
            <h2><i class="ion-ribbon-b"></i> Credentials</h2>
            <div data-bind="visible: verifications().length || selectedJobTitle() && selectedJobTitle().verifications().length">
                <h3>Personal Information verified</h3>
                <div class="row clearfix" data-bind="foreach: verifications">
                    <div class="col-xs-6 col-sm-3">
                       <i class="ion-android-done"></i> <p data-bind="text: verification().name"></p>
                    </div>
                </div>
                <div class="row clearfix" data-bind="foreach: selectedJobTitle() && selectedJobTitle().verifications">
                    <div class="col-xs-6 col-sm-3">
                        <i class="ion-android-done"></i> <p data-bind="text: verification().name"></p>
                    </div>
                </div>
            </div>
            <div data-bind="visible: selectedJobTitle() && selectedJobTitle().licensesCertifications().length">
                <h3>Professional licenses and certificates</h3>
                <div class="row clearfix" data-bind="foreach: selectedJobTitle() && selectedJobTitle().licensesCertifications">
                    <div class="col-sm-6">
                        <i class="ion-android-done"></i> <p data-bind="text: licenseCertification().name"></p>
                    </div>
                </div>
            </div>
            <div data-bind="visible: education().length">
                <h3>Education</h3>
                <div class="row" data-bind="foreach: education">
                    <i class="ion-android-done"></i>
                    <p data-bind="text: degreeCertificate"></p>
                    <p data-bind="text: institutionName"></p>
                    <p data-bind="text: fieldOfStudy"></p>
                    <span data-bind="visible: fromYearAttended() || toYearAttended()">
                        <p data-bind="text: fromYearAttended"></p> - <p data-bind="text: toYearAttended"></p>
                    </span>
                </div>
            </div>
        </section>
        <section id="listing-about-service-professional" title="">
            <h2><i class="ion-android-contact"></i>About <span data-bind="text: profile().firstName"></span></h2>
            <p data-bind="text: profile().publicBio"></p>
        </section>
        
    </div>
</div>
