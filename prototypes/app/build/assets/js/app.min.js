(function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=typeof require=="function"&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}var f=typeof require=="function"&&require;for(var g=0;g<d.length;g++)e(d[g]);return e})({1:[function(a,b,c){(function(){var a,c="1.5.3",d={},e="en",f=null,g="0,0",h=typeof b!=="undefined"&&b.exports;function i(a){this._value=a}function j(a,b,c,d){var e=Math.pow(10,b),f,g;g=(c(a*e)/e).toFixed(b);if(d){f=new RegExp("0{1,"+d+"}$");g=g.replace(f,"")}return g}function k(a,b,c){var d;if(b.indexOf("$")>-1){d=m(a,b,c)}else if(b.indexOf("%")>-1){d=n(a,b,c)}else if(b.indexOf(":")>-1){d=o(a,b)}else{d=q(a._value,b,c)}return d}function l(a,b){var c=b,g,h,i,j,k=["KB","MB","GB","TB","PB","EB","ZB","YB"],l=false,m;if(b.indexOf(":")>-1){a._value=p(b)}else{if(b===f){a._value=0}else{if(d[e].delimiters.decimal!=="."){b=b.replace(/\./g,"").replace(d[e].delimiters.decimal,".")}g=new RegExp("[^a-zA-Z]"+d[e].abbreviations.thousand+"(?:\\)|(\\"+d[e].currency.symbol+")?(?:\\))?)?$");h=new RegExp("[^a-zA-Z]"+d[e].abbreviations.million+"(?:\\)|(\\"+d[e].currency.symbol+")?(?:\\))?)?$");i=new RegExp("[^a-zA-Z]"+d[e].abbreviations.billion+"(?:\\)|(\\"+d[e].currency.symbol+")?(?:\\))?)?$");j=new RegExp("[^a-zA-Z]"+d[e].abbreviations.trillion+"(?:\\)|(\\"+d[e].currency.symbol+")?(?:\\))?)?$");for(m=0;m<=k.length;m++){l=b.indexOf(k[m])>-1?Math.pow(1024,m+1):false;if(l){break}}a._value=(l?l:1)*(c.match(g)?Math.pow(10,3):1)*(c.match(h)?Math.pow(10,6):1)*(c.match(i)?Math.pow(10,9):1)*(c.match(j)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,""));a._value=l?Math.ceil(a._value):a._value}}return a._value}function m(a,b,c){var f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),i="",j,k;if(b.indexOf(" $")>-1){i=" ";b=b.replace(" $","")}else if(b.indexOf("$ ")>-1){i=" ";b=b.replace("$ ","")}else{b=b.replace("$","")}k=q(a._value,b,c);if(f<=1){if(k.indexOf("(")>-1||k.indexOf("-")>-1){k=k.split("");j=1;if(f<g||f<h){j=0}k.splice(j,0,d[e].currency.symbol+i);k=k.join("")}else{k=d[e].currency.symbol+i+k}}else{if(k.indexOf(")")>-1){k=k.split("");k.splice(-1,0,i+d[e].currency.symbol);k=k.join("")}else{k=k+i+d[e].currency.symbol}}return k}function n(a,b,c){var d="",e,f=a._value*100;if(b.indexOf(" %")>-1){d=" ";b=b.replace(" %","")}else{b=b.replace("%","")}e=q(f,b,c);if(e.indexOf(")")>-1){e=e.split("");e.splice(-1,0,d+"%");e=e.join("")}else{e=e+d+"%"}return e}function o(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-b*60*60)/60),d=Math.round(a._value-b*60*60-c*60);return b+":"+(c<10?"0"+c:c)+":"+(d<10?"0"+d:d)}function p(a){var b=a.split(":"),c=0;if(b.length===3){c=c+Number(b[0])*60*60;c=c+Number(b[1])*60;c=c+Number(b[2])}else if(b.length===2){c=c+Number(b[0])*60;c=c+Number(b[1])}return Number(c)}function q(a,b,c){var g=false,h=false,i=false,k="",l=false,m=false,n=false,o=false,p=false,q="",r="",s=Math.abs(a),t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u,v,w,x,y,z,A="",B=false;if(a===0&&f!==null){return f}else{if(b.indexOf("(")>-1){g=true;b=b.slice(1,-1)}else if(b.indexOf("+")>-1){h=true;b=b.replace(/\+/g,"")}if(b.indexOf("a")>-1){l=b.indexOf("aK")>=0;m=b.indexOf("aM")>=0;n=b.indexOf("aB")>=0;o=b.indexOf("aT")>=0;p=l||m||n||o;if(b.indexOf(" a")>-1){k=" ";b=b.replace(" a","")}else{b=b.replace("a","")}if(s>=Math.pow(10,12)&&!p||o){k=k+d[e].abbreviations.trillion;a=a/Math.pow(10,12)}else if(s<Math.pow(10,12)&&s>=Math.pow(10,9)&&!p||n){k=k+d[e].abbreviations.billion;a=a/Math.pow(10,9)}else if(s<Math.pow(10,9)&&s>=Math.pow(10,6)&&!p||m){k=k+d[e].abbreviations.million;a=a/Math.pow(10,6)}else if(s<Math.pow(10,6)&&s>=Math.pow(10,3)&&!p||l){k=k+d[e].abbreviations.thousand;a=a/Math.pow(10,3)}}if(b.indexOf("b")>-1){if(b.indexOf(" b")>-1){q=" ";b=b.replace(" b","")}else{b=b.replace("b","")}for(w=0;w<=t.length;w++){u=Math.pow(1024,w);v=Math.pow(1024,w+1);if(a>=u&&a<v){q=q+t[w];if(u>0){a=a/u}break}}}if(b.indexOf("o")>-1){if(b.indexOf(" o")>-1){r=" ";b=b.replace(" o","")}else{b=b.replace("o","")}r=r+d[e].ordinal(a)}if(b.indexOf("[.]")>-1){i=true;b=b.replace("[.]",".")}x=a.toString().split(".")[0];y=b.split(".")[1];z=b.indexOf(",");if(y){if(y.indexOf("[")>-1){y=y.replace("]","");y=y.split("[");A=j(a,y[0].length+y[1].length,c,y[1].length)}else{A=j(a,y.length,c)}x=A.split(".")[0];if(A.split(".")[1].length){A=d[e].delimiters.decimal+A.split(".")[1]}else{A=""}if(i&&Number(A.slice(1))===0){A=""}}else{x=j(a,null,c)}if(x.indexOf("-")>-1){x=x.slice(1);B=true}if(z>-1){x=x.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d[e].delimiters.thousands)}if(b.indexOf(".")===0){x=""}return(g&&B?"(":"")+(!g&&B?"-":"")+(!B&&h?"+":"")+x+A+(r?r:"")+(k?k:"")+(q?q:"")+(g&&B?")":"")}}a=function(b){if(a.isNumeral(b)){b=b.value()}else if(b===0||typeof b==="undefined"){b=0}else if(!Number(b)){b=a.fn.unformat(b)}return new i(Number(b))};a.version=c;a.isNumeral=function(a){return a instanceof i};a.language=function(b,c){if(!b){return e}if(b&&!c){if(!d[b]){throw new Error("Unknown language : "+b)}e=b}if(c||!d[b]){r(b,c)}return a};a.languageData=function(a){if(!a){return d[e]}if(!d[a]){throw new Error("Unknown language : "+a)}return d[a]};a.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"},currency:{symbol:"$"}});a.zeroFormat=function(a){f=typeof a==="string"?a:null};a.defaultFormat=function(a){g=typeof a==="string"?a:"0.0"};function r(a,b){d[a]=b}if("function"!==typeof Array.prototype.reduce){Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"===typeof this){throw new TypeError("Array.prototype.reduce called on null or undefined")}if("function"!==typeof a){throw new TypeError(a+" is not a function")}var c,d,e=this.length>>>0,f=false;if(1<arguments.length){d=b;f=true}for(c=0;e>c;++c){if(this.hasOwnProperty(c)){if(f){d=a(d,this[c],c,this)}else{d=this[c];f=true}}}if(!f){throw new TypeError("Reduce of empty array with no initial value")}return d}}function s(a){var b=a.toString().split(".");if(b.length<2){return 1}return Math.pow(10,b[1].length)}function t(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=s(a),d=s(b);return c>d?c:d},-Infinity)}a.fn=i.prototype={clone:function(){return a(this)},format:function(a,b){return k(this,a?a:g,b!==undefined?b:Math.round)},unformat:function(a){if(Object.prototype.toString.call(a)==="[object Number]"){return a}return l(this,a?a:g)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){this._value=Number(a);return this},add:function(a){var b=t.call(null,this._value,a);function c(a,c,d,e){return a+b*c}this._value=[this._value,a].reduce(c,0)/b;return this},subtract:function(a){var b=t.call(null,this._value,a);function c(a,c,d,e){return a-b*c}this._value=[a].reduce(c,this._value*b)/b;return this},multiply:function(a){function b(a,b,c,d){var e=t(a,b);return a*e*(b*e)/(e*e)}this._value=[this._value,a].reduce(b,1);return this},divide:function(a){function b(a,b,c,d){var e=t(a,b);return a*e/(b*e)}this._value=[this._value,a].reduce(b);return this},difference:function(b){return Math.abs(a(this._value).subtract(b).value())}};if(h){b.exports=a}if(typeof ender==="undefined"){this["numeral"]=a}if(typeof define==="function"&&define.amd){define([],function(){return a})}}).call(this)},{}],2:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSectionNavBar("Account")});c.init=e.init},{"../components/Activity":44}],3:[function(a,b,c){"use strict";var d=a("jquery"),e=a("moment"),f=a("knockout");a("../components/DatePicker");var g=a("../components/Activity");var h=g.extends(function j(){g.apply(this,arguments);this.accessLevel=this.app.UserType.Freelancer;this.menuItem="calendar";var a=new g.NavAction({link:"calendar/",icon:g.NavAction.goBack.icon(),isTitle:true,text:"Calendar"});this.navBar=new g.NavBar({title:"",leftAction:a,rightAction:g.NavAction.goHelpIndex});this.$appointmentView=this.$activity.find("#calendarAppointmentView");this.$chooseNew=d("#calendarChooseNew");this.initAppointment();this.viewModel=this.appointmentsDataView;var b=a.text._initialValue;a.text=f.computed(function(){var a=this.appointmentsDataView.currentDate();if(!a)return b;var c=e(a);var d=c.format("dddd [(]M/D[)]");return d},this);var c=a.link._initialValue;a.link=f.computed(function(){var a=this.appointmentsDataView.currentDate();if(!a)return c;return c+a.toISOString()},this);this.appointmentsDataView.currentAppointment.subscribe(function(a){var b=a.id();var c=/appointment\/(\d+)/i.test(window.location);c=c&&c[1]||"";if(c!=="0"&&b!==null&&c!==b.toString()){if(c==="")this.app.shell.history.replaceState(null,null,"appointment/"+b);else this.app.shell.history.pushState(null,null,"appointment/"+b)}d(window).trigger("layoutUpdate")}.bind(this))});c.init=h.init;h.prototype.show=function k(a){g.prototype.show.call(this,a);var b;if(this.requestData.appointment){b=this.requestData.appointment}else{var c=a&&a.route&&a.route.segments[0];c=parseInt(c,10);b=c||0}this.showAppointment(b);if(a!==null){var d=this.appointmentsDataView.currentAppointment();if(a.request==="textEditor"&&d){d[a.field](a.text)}else if(a.selectClient===true&&d){d.client(a.selectedClient)}else if(typeof a.selectedDatetime!=="undefined"&&d){d.startTime(a.selectedDatetime);var f=60;d.endTime(e(d.startTime()).add(f,"minutes").toDate())}else if(a.selectServices===true&&d){d.services(a.selectedServices)}else if(a.selectLocation===true&&d){d.location(a.selectedLocation)}}};var i=a("../models/Appointment");h.prototype.showAppointment=function l(a){if(typeof a==="number"){if(a){}else if(a===0){this.appointmentsDataView.newAppointment(new i);this.appointmentsDataView.editMode(true)}}else{if(a.id){}else{this.appointmentsDataView.newAppointment(new i(a));this.appointmentsDataView.editMode(true)}}};h.prototype.initAppointment=function m(){if(!this.__initedAppointment){this.__initedAppointment=true;var b=this.app;var c=a("../testdata/calendarAppointments").appointments;var d={appointments:f.observableArray(c),currentIndex:f.observable(0),editMode:f.observable(false),newAppointment:f.observable(null)};this.appointmentsDataView=d;d.isNew=f.computed(function(){return this.newAppointment()!==null},d);d.currentAppointment=f.computed({read:function(){if(this.isNew()){return this.newAppointment()}else{return this.appointments()[this.currentIndex()%this.appointments().length]}},write:function(a){var b=this.currentIndex()%this.appointments().length;this.appointments()[b]=a;this.appointments.valueHasMutated()},owner:d});d.originalEditedAppointment={};d.goPrevious=function j(){if(this.editMode())return;if(this.currentIndex()===0)this.currentIndex(this.appointments().length-1);else this.currentIndex((this.currentIndex()-1)%this.appointments().length)};d.goNext=function k(){if(this.editMode())return;this.currentIndex((this.currentIndex()+1)%this.appointments().length)};d.edit=function l(){this.editMode(true)}.bind(d);d.cancel=function m(){if(this.isNew()){this.newAppointment(null)}else{this.currentAppointment(new i(this.originalEditedAppointment))}this.editMode(false)}.bind(d);d.save=function n(){if(this.isNew()){var a=this.newAppointment();a.summary("Massage Therapist Booking");a.id(4);this.appointments.push(a);this.newAppointment(null);this.currentIndex(this.appointments().length-1);b.shell.go("bookingConfirmation",{booking:a})}this.editMode(false)}.bind(d);d.editMode.subscribe(function(a){this.$activity.toggleClass("in-edit",a);this.$appointmentView.find(".AppointmentCard").toggleClass("in-edit",a);if(a){d.originalEditedAppointment=f.toJS(d.currentAppointment())}}.bind(this));d.currentDate=f.computed(function(){var a=this.currentAppointment(),b=null;if(a&&a.startTime())b=e(a.startTime()).hours(0).minutes(0).seconds(0).toDate();return b},d);var g=function o(a,c){c.appointment=d.currentAppointment().model.toPlainObject(true);b.shell.go(a,c)};d.pickDateTime=function p(){g("datetimePicker",{selectedDatetime:null})};d.pickClient=function q(){g("clients",{selectClient:true,selectedClient:null})};d.pickService=function r(){g("services",{selectServices:true,selectedServices:d.currentAppointment().services()})};d.changePrice=function s(){};d.pickLocation=function t(){g("locations",{selectLocation:true,selectedLocation:d.currentAppointment().location()})};var h={preNotesToClient:"Notes to client",postNotesToClient:"Notes to client (afterwards)",preNotesToSelf:"Notes to self",postNotesToSelf:"Booking summary"};d.editTextField=function u(a){g("textEditor",{request:"textEditor",field:a,title:d.isNew()?"New booking":"Booking",header:h[a],text:d.currentAppointment()[a]()})}.bind(this)}}},{"../components/Activity":44,"../components/DatePicker":45,"../models/Appointment":49,"../testdata/calendarAppointments":75,knockout:false,moment:false}],4:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout"),f=a("jquery");var g=d.extends(function j(){d.apply(this,arguments);this.viewModel=new h(this.app);this.accessLevel=this.app.UserType.Freelancer;this.navBar=d.createSubsectionNavBar("Scheduling");this.registerHandler({target:this.$activity,event:"click",selector:"textarea",handler:function(){f(this).select()}});this.registerHandler({target:this.app.model.marketplaceProfile,event:"error",handler:function(a){if(a&&a.task==="save")return;var b="Error loading data to build the Button.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=g.init;g.prototype.show=function k(a){d.prototype.show.call(this,a);this.app.model.marketplaceProfile.sync();var b=a.route.segments[0]|0;this.viewModel.jobTitleID(b)};function h(a){var b=a.model.marketplaceProfile;this.bookCode=e.computed(function(){return b.data.bookCode()});this.jobTitleID=e.observable(0);this.type=e.observable("medium");this.isLocked=b.isLocked;var c="<!-- begin Loconomics book-me-button -->"+'<a style="display:inline-block"><img alt="" style="border:none" /></a>'+"<!-- end Loconomics book-me-button -->";var d="<!-- begin Loconomics book-me-button -->"+"<a><span></span></a>"+"<!-- end Loconomics book-me-button -->";this.buttonHtmlCode=e.pureComputed(function(){if(b.isLoading()){return"loading..."}else{var a=this.type(),e=c;if(a==="link")e=d;var g=f("html").attr("data-site-url"),h=g+"/book/"+this.bookCode()+"/"+this.jobTitleID()+"/",j=g+"/img/extern/book-me-button-"+a+".png";var k=i({tpl:e,label:"Click here to book me now (on loconomics.com)",linkUrl:h,imgUrl:j});return k}},this);this.copyCode=function(){};this.sendByEmail=function(){}}function i(a){var b=f(f.parseHTML("<div>"+a.tpl+"</div>"));b.find("a").attr("href",a.linkUrl).find("span").text(a.label);b.find("img").attr("src",a.imgUrl).attr("alt",a.label);return b.html()}},{"../components/Activity":44,knockout:false}],5:[function(a,b,c){"use strict";var d=a("knockout");var e=null;c.init=function h(a,b){if(e===null)e=new f(a,b);return e};function f(a,b){this.accessLevel=b.UserType.LoggedUser;this.$activity=a;this.app=b;this.dataView=new g;d.applyBindings(this.dataView,a.get(0))}f.prototype.show=function i(a){if(a&&a.booking)this.dataView.booking(a.booking)};function g(){this.booking=d.observable(null)}},{knockout:false}],6:[function(a,b,c){"use strict";var d=a("jquery"),e=a("moment"),f=a("knockout"),g=a("../models/CalendarSlot");a("../components/DatePicker");var h=a("../components/Activity");var i=h.extends(function q(){h.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new p(this.app);this.navBar=h.createSectionNavBar("Calendar");this.$datepicker=this.$activity.find("#calendarDatePicker");this.$dailyView=this.$activity.find("#calendarDailyView");this.$dateHeader=this.$activity.find("#calendarDateHeader");this.$dateTitle=this.$dateHeader.children(".CalendarDateHeader-date");this.$chooseNew=d("#calendarChooseNew");this.$datepicker.show().datepicker();this.registerHandler({target:this.viewModel.currentDate,handler:function(a){d(window).trigger("layoutUpdate");if(a){var b=e(a);if(b.isValid()){var c=b.toISOString();this.$datepicker.removeClass("is-visible");if(this.$datepicker.datepicker("getValue").toISOString()!==c)this.$datepicker.datepicker("setValue",a,true);this.app.shell.history.pushState(null,null,"calendar/"+c);return}}this.viewModel.currentDate(j())}.bind(this)});this.registerHandler({target:this.$dailyView,event:"swipeleft swiperight",handler:function(a){a.preventDefault();var b=a.type==="swipeleft"?"next":"prev";d(document).trigger("touchend");this.$datepicker.datepicker("moveValue",b,"date")}.bind(this)});this.registerHandler({target:this.$dateHeader,event:"tap",selector:".CalendarDateHeader-switch",handler:function(a){switch(a.currentTarget.getAttribute("href")){case"#prev":this.$datepicker.datepicker("moveValue","prev","date");break;case"#next":this.$datepicker.datepicker("moveValue","next","date");break;default:return}a.preventDefault();a.stopPropagation()}.bind(this)});this.registerHandler({target:this.$dateTitle,event:"tap",handler:function(a){this.$datepicker.toggleClass("is-visible");a.preventDefault();a.stopPropagation()}.bind(this)});this.registerHandler({target:this.$datepicker,event:"changeDate",handler:function(a){if(a.viewMode==="days"){this.viewModel.currentDate(j(a.date))}}.bind(this)});this.viewModel.currentDate(j())});c.init=i.init;i.prototype.show=function r(a){h.prototype.show.call(this,a);var b=a.route&&a.route.segments&&a.route.segments[0],c;if(b){var d=e(b);c=d.isValid()?j(d.toDate()):null}if(!c)c=j();this.viewModel.currentDate(c)};function j(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)}var k=a("../utils/Time");function l(a){var b=a.start||new k(a.date,0,0,0),c=a.end||new k(a.date,0,0,0);return new g({startTime:b,endTime:c,subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})}function m(a,b){return new g({startTime:a.startTime(),endTime:a.endTime(),subject:a.summary(),description:a.description(),link:"#!appointment/"+a.calendarEventID(),actionIcon:b===null?"glyphicon glyphicon-chevron-right":null,actionText:b===null?null:b&&b.bookingRequest&&b.bookingRequest.pricingEstimate.totalPrice||"$0.00",classNames:null})}function n(a,b){return a().map(function(a){var c=null;b().some(function(b){var d=b.confirmedDateID()===a.calendarEventID();if(d){c=b;return true}});return m(a,c)})}function o(a){a=a.sort(function(a,b){return a.startTime()>b.startTime()});var b=[],c="00:00:00",d=c,f=null,g="HH:mm:ss";a.forEach(function(a){var c=a.startTime(),h=e(c),i=a.endTime(),j=e(i);if(h.format(g)>d){if(f===null){f=new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0)}b.push(l({start:f,end:c}))}b.push(a);f=i;d=j.format(g)});var h=f&&e(f).format(g);if(h!==c){var i=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0);b.push(l({start:f,end:i}))}return b}function p(a){this.currentDate=f.observable(j());var b=[l({date:this.currentDate()})];this.slotsSource=f.observable(b);this.slots=f.computed(function(){var a=this.slotsSource();return o(a)},this);this.isLoading=f.observable(false);var c=this.currentDate().toISOString();this.currentDate.subscribe(function(d){d=new Date(Date.parse(d.toISOString()));if(d.toISOString()===c){return}c=d.toISOString();this.isLoading(true);Promise.all([a.model.bookings.getBookingsByDate(d),a.model.calendarEvents.getEventsByDate(d)]).then(function(a){if(d.toISOString()!==this.currentDate().toISOString()){return}var c=a[1],e=a[0];if(c&&c().length){this.slotsSource(n(c,e));this.isLoading(false)}else{this.slotsSource(b);this.isLoading(false)}}.bind(this)).catch(function(c){this.slotsSource(b);this.isLoading(false);var d="Error loading calendar events.";a.modals.showError({title:d,error:c&&c.error||c})}.bind(this))}.bind(this))}},{"../components/Activity":44,"../components/DatePicker":45,"../models/CalendarSlot":53,"../utils/Time":87,knockout:false,moment:false}],7:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=a("jquery"),f=a("knockout");var g=d.extends(function i(){d.apply(this,arguments);this.viewModel=new h(this.app);this.accessLevel=this.app.UserType.Freelancer;this.navBar=d.createSubsectionNavBar("Scheduling");this.registerHandler({target:this.$activity.find("#calendarSync-icalExportUrl"),event:"click",handler:function(){e(this).select()}});this.registerHandler({target:this.app.model.calendarSyncing,event:"error",handler:function(a){var b=a.task==="save"?"Error saving calendar syncing settings.":"Error loading calendar syncing settings.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=g.init;g.prototype.show=function j(a){d.prototype.show.call(this,a);this.app.model.calendarSyncing.sync();this.viewModel.discard()};function h(a){var b=a.model.calendarSyncing;var c=b.newVersion();c.isObsolete.subscribe(function(a){if(a){c.pull({evenIfNewer:true})}});this.sync=c.version;this.isLocked=f.pureComputed(function(){return this.isLocked()||this.isReseting()},b);this.submitText=f.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b);this.resetText=f.pureComputed(function(){return this.isReseting()?"reseting...":"Reset Private URL"},b);this.discard=function d(){c.pull({evenIfNewer:true})};this.save=function e(){c.push({evenIfObsolete:true})};this.reset=function g(){b.resetExportUrl()}}},{"../components/Activity":44,knockout:false}],8:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function i(){d.apply(this,arguments);this.viewModel=new h;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("clients")});c.init=e.init;var f=a("knockout");var g=a("../models/Client");function h(){this.client=f.observable(new g);this.header=f.observable("Edit Location");this.save=function(){};this.cancel=function(){}}},{"../components/Activity":44,"../models/Client":55,knockout:false}],9:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../components/Activity");var f=e.extends(function h(){e.apply(this,arguments);this.accessLevel=this.app.UserType.Freelancer;this.viewModel=new g(this.app);this.navBar=e.createSubsectionNavBar("Clients");this.$index=this.$activity.find("#clientsIndex");this.$listView=this.$activity.find("#clientsListView");this.viewModel.clients(a("../testdata/clients").clients);this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){this.viewModel.headerText(a?"Select a client":"")}.bind(this)});this.registerHandler({target:this.viewModel.selectedClient,handler:function(a){if(this.requestData&&this.requestData.selectClient===true&&a){this.requestData.selectedClient=a;this.app.shell.goBack(this.requestData);this.requestData=null}}.bind(this)})});c.init=f.init;f.prototype.show=function i(a){e.prototype.show.call(this,a);this.viewModel.searchText("");this.viewModel.isSelectionMode(a.selectClient===true)};function g(){this.headerText=d.observable("");this.isSelectionMode=d.observable(false);this.clients=d.observableArray([]);this.searchText=d.observable("");this.getFilteredList=function a(){var a=(this.searchText()||"").toLowerCase();return this.clients().filter(function(b){var c=b&&b.fullName()||"";c=c.toLowerCase();return c.indexOf(a)>-1})};this.filteredClients=d.computed(function(){return this.getFilteredList()},this);this.groupedClients=d.computed(function(){var a=this.filteredClients().sort(function(a,b){return a.firstName()>b.firstName()});var b=[],c=null,d=null;a.forEach(function(a){var e=(a.firstName()[0]||"").toUpperCase();if(e!==d){c={letter:e,clients:[a]};b.push(c);d=e}else{c.clients.push(a)}});return b},this);this.selectedClient=d.observable(null);this.selectClient=function(a){this.selectedClient(a)}.bind(this)}},{"../components/Activity":44,"../testdata/clients":76,knockout:false}],10:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout");var f=d.extends(function h(){d.apply(this,arguments);this.viewModel=new g;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSectionNavBar("Client management");var b=e.observableArray(a("../testdata/clients").clients);this.viewModel.clientsCount(b().length);this.registerHandler({target:b,handler:function(){this.viewModel.clientsCount(b().length)}.bind(this)})});c.init=f.init;function g(){this.clientsCount=e.observable()}},{"../components/Activity":44,"../testdata/clients":76,knockout:false}],11:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function h(){d.apply(this,arguments);this.viewModel=new g;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Talk to us")});c.init=e.init;var f=a("knockout");function g(){this.message=f.observable("");this.wasSent=f.observable(false);var a=function(){this.wasSent(false)}.bind(this);this.message.subscribe(a);this.send=function b(){this.message("");this.wasSent(true)}.bind(this)}},{"../components/Activity":44,knockout:false}],12:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function h(){d.apply(this,arguments);this.viewModel=new g(this.app);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Owner information");this.registerHandler({target:this.viewModel.profile.onboardingStep,handler:function(a){if(a){this.navBar.leftAction().text("");this.viewModel.headerText("How can we reach you?");this.viewModel.buttonText("Save and continue")}else{this.navBar.leftAction().text("Account");this.viewModel.headerText("Contact information");this.viewModel.buttonText("Save")}}.bind(this)});this.registerHandler({target:this.app.model.userProfile,event:"error",handler:function(a){var b=a.task==="save"?"Error saving contact data.":"Error loading contact data.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)});this.registerHandler({target:this.app.model.homeAddress,event:"error",handler:function(a){var b=a.task==="save"?"Error saving address details.":"Error loading address details.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=e.init;e.prototype.show=function i(a){d.prototype.show.call(this,a);this.viewModel.discard();this.app.model.userProfile.sync();this.app.model.homeAddress.sync()};var f=a("knockout");function g(a){this.headerText=f.observable("Contact information");this.buttonText=f.observable("Save");var b=a.model.userProfile;var c=b.newVersion();c.isObsolete.subscribe(function(a){if(a){c.pull({evenIfNewer:true})}});this.profile=c.version;this.months=f.observableArray([{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}]);this.selectedBirthMonth=f.computed({read:function(){var a=this.profile.birthMonth();return a?this.months()[a-1]:null},write:function(a){this.profile.birthMonth(a&&a.id||null)},owner:this});this.monthDays=f.observableArray([]);for(var d=1;d<=31;d++){this.monthDays.push(d)}var e=a.model.homeAddress;var g=e.newVersion();g.isObsolete.subscribe(function(a){if(a){g.pull({evenIfNewer:true})}});this.address=g.version;this.isLocked=f.computed(function(){return b.isLocked()||e.isLocked()},this);this.isLoading=f.computed(function(){return b.isLoading()||e.isLoading()},this);this.isSaving=f.computed(function(){return b.isSaving()||e.isSaving()},this);this.submitText=f.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},this);this.discard=function h(){c.pull({evenIfNewer:true});g.pull({evenIfNewer:true})}.bind(this);this.save=function i(){c.push({evenIfObsolete:true});g.push({evenIfObsolete:true})}.bind(this)}},{"../components/Activity":44,knockout:false}],13:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function j(){d.apply(this,arguments);this.viewModel=new h;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Inbox");i(this.viewModel)});c.init=e.init;e.prototype.show=function k(a){d.prototype.show.call(this,a);if(a&&a.route&&a.route.segments){this.viewModel.conversationID(parseInt(a.route.segments[0],10)||0)}};var f=a("../models/MailFolder");var g=a("knockout");function h(){this.inbox=new f({topNumber:20});this.conversationID=g.observable(null);this.conversation=g.pureComputed(function(){var a=this.conversationID();return this.inbox.messages().filter(function(b){return b&&b.id()===a})},this);this.subject=g.pureComputed(function(){var a=this.conversation()[0];return a?a.subject():"Conversation w/o subject"},this)}function i(b){b.inbox.messages(a("../testdata/messages").messages)}},{"../components/Activity":44,"../models/MailFolder":61,"../testdata/messages":78,knockout:false}],14:[function(a,b,c){"use strict";var d=a("moment"),e=a("knockout"),f=a("../utils/Time");a("../components/DatePicker");var g=a("../components/Activity");var h=g.extends(function j(){g.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new i(this.app);this.navBar=g.createSubsectionNavBar("");this.$datePicker=this.$activity.find("#datetimePickerDatePicker");this.$timePicker=this.$activity.find("#datetimePickerTimePicker");this.$datePicker.show().datepicker();this.registerHandler({target:this.$datePicker,event:"changeDate",handler:function(a){if(a.viewMode==="days"){this.viewModel.selectedDate(a.date)}}.bind(this)});this.registerHandler({target:this.viewModel.selectedDate,handler:function(a){this.bindDateData(a)}.bind(this)});this.registerHandler({target:this.viewModel.selectedDatetime,handler:function(a){if(this.requestData){this.requestData.selectedDatetime=a;this.app.shell.goBack(this.requestData);this.requestData=null}}.bind(this)});this.viewModel.slotsData=a("../testdata/timeSlots").timeSlots;this.bindDateData(new Date)});c.init=h.init;h.prototype.show=function k(a){g.prototype.show.call(this,a);this.viewModel.headerText("Select a start time")};h.prototype.bindDateData=function l(a){var b=d(a).format("YYYY-MM-DD");var c=this.viewModel.slotsData;if(c.hasOwnProperty(b)){this.viewModel.slots(c[b])}else{this.viewModel.slots(c["default"])}};function i(){this.headerText=e.observable("Select a time");this.selectedDate=e.observable(new Date);this.slotsData={};this.slots=e.observableArray([]);this.groupedSlots=e.computed(function(){var a=this.slots()&&this.slots()[0]||new Date;var b=[{group:"Morning",slots:[],starts:new f(a,0,0),ends:new f(a,12,0)},{group:"Afternoon",slots:[],starts:new f(a,12,0),ends:new f(a,17,0)},{group:"Evening",slots:[],starts:new f(a,17,0),ends:new f(a,24,0)}];var c=this.slots().sort();c.forEach(function(a){b.forEach(function(b){if(a>=b.starts&&a<b.ends){b.slots.push(a)}})});return b},this);this.selectedDatetime=e.observable(null);this.selectDatetime=function(a){this.selectedDatetime(a)}.bind(this)}},{"../components/Activity":44,"../components/DatePicker":45,"../testdata/timeSlots":80,"../utils/Time":87,knockout:false,moment:false}],15:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function k(){d.apply(this,arguments);this.viewModel=new g;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Talk to us");j(this.viewModel)});c.init=e.init;e.prototype.show=function l(a){d.prototype.show.call(this,a);this.viewModel.searchText("")};var f=a("knockout");function g(){this.faqs=f.observableArray([]);this.searchText=f.observable("");this.filteredFaqs=f.pureComputed(function(){var a=this.searchText().toLowerCase();
return this.faqs().filter(function(b){var c=b&&b.title()||"";c+=b&&b.description()||"";c=c.toLowerCase();return c.indexOf(a)>-1})},this)}var h=a("../models/Model");function i(a){h(this);this.model.defProperties({id:0,title:"",description:""},a)}function j(a){var b=[new i({id:1,title:"How do I set up a marketplace profile?",description:"Description about how I set up a marketplace profile"}),new i({id:2,title:"Another faq",description:"Another description"})];a.faqs(b)}},{"../components/Activity":44,"../models/Model":64,knockout:false}],16:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSectionNavBar("Talk to us")});c.init=e.init},{"../components/Activity":44}],17:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function h(){d.apply(this,arguments);this.viewModel=new g;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Talk to us")});c.init=e.init;var f=a("knockout");function g(){this.message=f.observable("");this.becomeCollaborator=f.observable(false);this.wasSent=f.observable(false);var a=function(){this.wasSent(false)}.bind(this);this.message.subscribe(a);this.becomeCollaborator.subscribe(a);this.send=function b(){this.message("");this.becomeCollaborator(false);this.wasSent(true)}.bind(this)}},{"../components/Activity":44,knockout:false}],18:[function(a,b,c){"use strict";var d=a("knockout");var e=a("../components/Activity");var f=e.extends(function m(){e.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new k(this.app);this.navBar=e.createSectionNavBar(null);this.$nextBooking=this.$activity.find("#homeNextBooking");this.$upcomingBookings=this.$activity.find("#homeUpcomingBookings");this.$inbox=this.$activity.find("#homeInbox");this.$performance=this.$activity.find("#homePerformance");this.$getMore=this.$activity.find("#homeGetMore");l(this.viewModel)});c.init=f.init;f.prototype.show=function n(a){e.prototype.show.call(this,a);var b=this.viewModel,c=this.app.model;c.getUpcomingBookings().then(function(a){if(a.nextBookingID)c.getBooking(a.nextBookingID).then(b.nextBooking);else b.nextBooking(null);b.upcomingBookings.today.quantity(a.today.quantity);b.upcomingBookings.today.time(a.today.time&&new Date(a.today.time));b.upcomingBookings.tomorrow.quantity(a.tomorrow.quantity);b.upcomingBookings.tomorrow.time(a.tomorrow.time&&new Date(a.tomorrow.time));b.upcomingBookings.nextWeek.quantity(a.nextWeek.quantity);b.upcomingBookings.nextWeek.time(a.nextWeek.time&&new Date(a.nextWeek.time))})};var g=a("../models/UpcomingBookingsSummary"),h=a("../models/MailFolder"),i=a("../models/PerformanceSummary"),j=a("../models/GetMore");function k(){this.upcomingBookings=new g;this.nextBooking=d.observable(null);this.inbox=new h({topNumber:4});this.performance=new i;this.getMore=new j}function l(b){b.inbox.messages(a("../testdata/messages").messages);b.performance.earnings.currentAmount(2400);b.performance.earnings.nextAmount(6200.54);b.performance.timeBooked.percent(.93);b.getMore.model.updateWith({availability:true,payments:true,profile:true,coop:true})}},{"../components/Activity":44,"../models/GetMore":56,"../models/MailFolder":61,"../models/PerformanceSummary":65,"../models/UpcomingBookingsSummary":72,"../testdata/messages":78,knockout:false}],19:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout");var f=d.extends(function j(){d.apply(this,arguments);this.viewModel=new h;this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSectionNavBar("Inbox");i(this.viewModel)});c.init=f.init;var g=a("../models/MailFolder");function h(){this.inbox=new g({topNumber:20});this.searchText=e.observable("")}function i(b){b.inbox.messages(a("../testdata/messages").messages)}},{"../components/Activity":44,"../models/MailFolder":61,"../testdata/messages":78,knockout:false}],20:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=null;this.navBar=d.createSectionNavBar(null)});c.init=e.init;e.prototype.show=function g(a){d.prototype.show.call(this,a);if(!this.app.model.user().isAnonymous()){this.app.goDashboard()}}},{"../components/Activity":44}],21:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=a("../viewmodels/UserJobProfile");var f=d.extends(function g(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new e(this.app);this.navBar=d.createSubsectionNavBar("Scheduling")});c.init=f.init;f.prototype.show=function h(a){d.prototype.show.call(this,a);this.viewModel.sync()}},{"../components/Activity":44,"../viewmodels/UserJobProfile":123}],22:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../components/Activity");var f=e.extends(function h(){e.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new g(this.app);this.navBar=e.createSectionNavBar(null)});c.init=f.init;f.prototype.show=function i(a){e.prototype.show.call(this,a);if(a&&a.route&&a.route.segments&&a.route.segments.length){this.viewModel.profile(a.route.segments[0])}};function g(){this.profile=d.observable("customer")}},{"../components/Activity":44,knockout:false}],23:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../models/Location"),f=a("../components/Activity");var g=f.extends(function i(){f.apply(this,arguments);this.accessLevel=this.app.UserType.Freelancer;this.viewModel=new h(this.app);this.navBar=f.createSubsectionNavBar("Locations")});c.init=g.init;g.prototype.show=function j(a){f.prototype.show.call(this,a);var b=0,c="";if(a){if(a.locationID){b=a.locationID}else if(a.route&&a.route.segments){b=parseInt(a.route.segments[0])}else if(a.create){c=a.create}}if(b){var d={1:new e({locationID:1,name:"Home",addressLine1:"Here Street",city:"San Francisco",postalCode:"90001",stateProvinceCode:"CA",countryID:1,isServiceRadius:true,isServiceLocation:false}),2:new e({locationID:1,name:"Workshop",addressLine1:"Unknow Street",city:"San Francisco",postalCode:"90001",stateProvinceCode:"CA",countryID:1,isServiceRadius:false,isServiceLocation:true})};var g=d[b];if(g){this.viewModel.location(g);this.viewModel.header("Edit Location")}else{this.viewModel.location(null);this.viewModel.header("Unknow location or was deleted")}}else{this.viewModel.location(new e);switch(a.create){case"serviceRadius":this.viewModel.location().isServiceRadius(true);this.viewModel.header("Add a service radius");break;case"serviceLocation":this.viewModel.location().isServiceLocation(true);this.viewModel.header("Add a service location");break;default:this.viewModel.location().isServiceRadius(true);this.viewModel.location().isServiceLocation(true);this.viewModel.header("Add a location");break}}};function h(){this.location=d.observable(new e);this.header=d.observable("Edit Location");this.save=function(){};this.cancel=function(){}}},{"../components/Activity":44,"../models/Location":60,knockout:false}],24:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../components/Activity");var f=e.extends(function h(){e.apply(this,arguments);this.accessLevel=this.app.UserType.Freelancer;this.viewModel=new g(this.app);this.navBar=e.createSubsectionNavBar("Scheduling");this.$listView=this.$activity.find("#locationsListView");this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){this.viewModel.headerText(a?"Select or add a service location":"Locations");this.navBar.leftAction().text(a?"Booking":"Scheduling");this.navBar.title("")}.bind(this)});this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){if(this.requestInfo&&this.requestInfo.selectLocation===true&&a===false){this.requestInfo.selectedLocation=this.viewModel.selectedLocation();this.app.shell.goBack(this.requestInfo);this.requestInfo=null}}.bind(this)});this.viewModel.locations(a("../testdata/locations").locations)});c.init=f.init;f.prototype.show=function i(a){e.prototype.show.call(this,a);if(a.selectLocation===true){this.viewModel.isSelectionMode(true);this.viewModel.selectedLocation(a.selectedLocation)}else if(a.route&&a.route.segments){var b=a.route.segments[0];if(b){if(b==="new"){this.app.shell.go("locationEdition",{create:a.route.segments[1]})}else{this.app.shell.go("locationEdition",{locationID:b})}}}};function g(a){this.headerText=d.observable("Locations");this.locations=d.observableArray([]);this.isSelectionMode=d.observable(false);this.selectedLocation=d.observable(null);this.selectLocation=function(b){if(this.isSelectionMode()===true){this.selectedLocation(b);this.isSelectionMode(false)}else{a.shell.go("locationEdition",{locationID:b.locationID()})}}.bind(this)}},{"../components/Activity":44,"../testdata/locations":77,knockout:false}],25:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../components/Activity");var f=e.extends(function i(){e.apply(this,arguments);this.accessLevel=this.app.UserType.Anonymous;this.viewModel=new h(this.app);this.navBar=e.createSectionNavBar("Log in");this.registerHandler({target:this.viewModel.isLogingIn,handler:function(a){if(a===true){var b=this.$activity.find('[type="submit"]');b.button("loading");this.viewModel.loginError("");var c=function d(){this.viewModel.isLogingIn(false);b.button("reset")}.bind(this);if(this.viewModel.username.error()||this.viewModel.password.error()){this.viewModel.loginError("Review your data");c();return}this.app.model.login(this.viewModel.username(),this.viewModel.password()).then(function(){this.viewModel.loginError("");c();this.viewModel.username("");this.viewModel.password("");this.app.goDashboard()}.bind(this)).catch(function(a){var b=a&&a.responseJSON&&a.responseJSON.errorMessage||a&&a.statusText||"Invalid username or password";this.viewModel.loginError(b);c()}.bind(this))}}.bind(this)});this.registerHandler({target:this.viewModel.loginError,handler:function(a){var b=this.$activity.find(":input").get(0);if(a)b.focus();else b.blur()}.bind(this)})});c.init=f.init;var g=a("../viewmodels/FormCredentials");function h(){var a=new g;this.username=a.username;this.password=a.password;this.loginError=d.observable("");this.isLogingIn=d.observable(false);this.performLogin=function b(){this.isLogingIn(true)}.bind(this)}},{"../components/Activity":44,"../viewmodels/FormCredentials":120,knockout:false}],26:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser});c.init=e.init;e.prototype.show=function g(a){d.prototype.show.call(this,a);this.app.model.logout().then(function(){var a=this.app.model.user().constructor.newAnonymous();this.app.model.user().model.updateWith(a);this.app.shell.go("/")}.bind(this))}},{"../components/Activity":44}],27:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSectionNavBar(null)});c.init=e.init},{"../components/Activity":44}],28:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSectionNavBar(null)});c.init=e.init},{"../components/Activity":44}],29:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../components/Activity");var f=e.extends(function j(){e.apply(this,arguments);this.accessLevel=this.app.UserType.Freelancer;this.viewModel=new g(this.app);this.navBar=e.createSectionNavBar("Job Titles");i(this.viewModel)});c.init=f.init;function g(){this.positions=d.observableArray([])}var h=a("../models/Position");function i(a){a.positions.push(new h({positionSingular:"Massage Therapist"}));a.positions.push(new h({positionSingular:"Housekeeper"}))}},{"../components/Activity":44,"../models/Position":66,knockout:false}],30:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=d.extends(function f(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Account")});c.init=e.init},{"../components/Activity":44}],31:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout");var f=d.extends(function h(){d.apply(this,arguments);this.viewModel=new g(this.app);this.accessLevel=this.app.UserType.LoggedUser;this.navBar=d.createSubsectionNavBar("Account");this.registerHandler({target:this.app.model.privacySettings,event:"error",handler:function(a){var b=a.task==="save"?"Error saving privacy settings.":"Error loading privacy settings.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=f.init;f.prototype.show=function i(a){d.prototype.show.call(this,a);this.app.model.privacySettings.sync();this.viewModel.discard()};function g(a){var b=a.model.privacySettings;var c=b.newVersion();c.isObsolete.subscribe(function(a){if(a){c.pull({evenIfNewer:true})}});this.settings=c.version;this.isLocked=b.isLocked;this.submitText=e.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b);this.discard=function d(){c.pull({evenIfNewer:true})}.bind(this);this.save=function f(){c.push({evenIfObsolete:true})}.bind(this)}},{"../components/Activity":44,knockout:false}],32:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=a("../viewmodels/UserJobProfile");var f=d.extends(function g(){d.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new e(this.app);this.navBar=d.createSectionNavBar("Scheduling")});c.init=f.init;f.prototype.show=function h(a){d.prototype.show.call(this,a);this.viewModel.sync()}},{"../components/Activity":44,"../viewmodels/UserJobProfile":123}],33:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout");var f=a("moment");var g=d.extends(function i(){d.apply(this,arguments);this.viewModel=new h(this.app);this.accessLevel=this.app.UserType.Freelancer;this.navBar=d.createSubsectionNavBar("Scheduling");this.registerHandler({target:this.app.model.schedulingPreferences,event:"error",handler:function(a){var b=a.task==="save"?"Error saving scheduling preferences.":"Error loading scheduling preferences.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=g.init;g.prototype.show=function j(a){d.prototype.show.call(this,a);this.app.model.schedulingPreferences.sync();this.viewModel.discard()};function h(a){var b=a.model.schedulingPreferences;var c=b.newVersion();c.isObsolete.subscribe(function(a){if(a){c.pull({evenIfNewer:true})}});this.prefs=c.version;this.isLocked=b.isLocked;this.submitText=e.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b);this.discard=function d(){c.pull({evenIfNewer:true})}.bind(this);this.save=function g(){c.push({evenIfObsolete:true})}.bind(this);this.incrementsExample=e.pureComputed(function(){var a="e.g. ",b=this.incrementsSizeInMinutes(),c=f({hour:10,minute:0}),d=[c.format("HH:mm")];for(var e=1;e<4;e++){d.push(c.add(b,"minutes").format("HH:mm"))}a+=d.join(", ");return a},this.prefs)}},{"../components/Activity":44,knockout:false,moment:false}],34:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout");var f=d.extends(function i(){d.apply(this,arguments);this.accessLevel=this.app.UserType.Frelancer;this.navBar=d.createSubsectionNavBar("Job title");this.viewModel=new h;this.viewModel.services(a("../testdata/services").services.map(g));this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){if(this.requestData&&this.requestData.selectServices===true&&a===false){this.requestData.selectedServices=this.viewModel.selectedServices();this.app.shell.goBack(this.requestData);this.requestData={}}}.bind(this)})});c.init=f.init;f.prototype.show=function j(a){d.prototype.show.call(this,a);var b=this.requestData&&this.requestData.route;var c=b&&b.segments&&b.segments[0];c=parseInt(c,10);if(c){console.log("jobTitleID",c);this.app.model.userJobProfile.getUserJobTitle(c).then(function(a){if(!a){console.log("No user job title");return}this.app.model.getJobTitle(c).then(function(a){if(!a){console.log("No job title");return}this.navBar.leftAction().text(a.singularName())}.bind(this));console.log("Job Title Pricing/Services load not supported still")}.bind(this))}if(this.requestData.selectServices===true){this.viewModel.isSelectionMode(true)}};function g(a){a.isSelected=e.observable(false);return a}function h(){this.services=e.observableArray([]);this.isSelectionMode=e.observable(false);this.groupedServices=e.computed(function(){var a=this.services();var b=this.isSelectionMode();var c={group:b?"Select standalone services":"Standalone services",services:[]},d={group:b?"Select add-on services":"Add-on services",services:[]},e=[c,d];a.forEach(function(a){var b=a.isAddon();if(b){d.services.push(a)}else{c.services.push(a)}});return e},this);this.selectedServices=e.observableArray([]);this.toggleServiceSelection=function(a){var b=-1,c=this.selectedServices().some(function(c,d){if(c===a){b=d;return true}});a.isSelected(!c);if(c)this.selectedServices.splice(b,1);else this.selectedServices.push(a)}.bind(this);this.endSelection=function(){this.isSelectionMode(false)}.bind(this)}},{"../components/Activity":44,"../testdata/services":79,knockout:false}],35:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../components/Activity");var f=e.extends(function i(){e.apply(this,arguments);this.accessLevel=this.app.UserType.Anonymous;this.viewModel=new h(this.app);this.navBar=e.createSectionNavBar(null);this.registerHandler({target:this.viewModel.isSigningUp,handler:function(a){if(a===true){var b=this.$activity.find('[type="submit"]');b.button("loading");this.viewModel.signupError("");var c=function d(){this.viewModel.isSigningUp(false);b.button("reset")}.bind(this);if(this.viewModel.username.error()||this.viewModel.password.error()){this.viewModel.signupError("Review your data");c();return}this.app.model.signup(this.viewModel.username(),this.viewModel.password(),this.viewModel.profile()).then(function(){this.viewModel.signupError("");c();this.viewModel.username("");this.viewModel.password("");this.app.goDashboard()}.bind(this)).catch(function(a){var b=a&&a.responseJSON&&a.responseJSON.errorMessage||a&&a.statusText||"Invalid username or password";this.viewModel.signupError(b);c()}.bind(this))}}.bind(this)});this.registerHandler({target:this.viewModel.signupError,handler:function(a){var b=this.$activity.find(":input").get(0);if(a)b.focus();else b.blur()}})});c.init=f.init;f.prototype.show=function j(a){e.prototype.show.call(this,a);if(a&&a.route&&a.route.segments&&a.route.segments.length){this.viewModel.profile(a.route.segments[0])}};var g=a("../viewmodels/FormCredentials");function h(){var a=new g;this.username=a.username;this.password=a.password;this.signupError=d.observable("");this.isSigningUp=d.observable(false);this.performSignup=function b(){this.isSigningUp(true)}.bind(this);this.profile=d.observable("customer")}},{"../components/Activity":44,"../viewmodels/FormCredentials":120,knockout:false}],36:[function(a,b,c){"use strict";var d=a("knockout"),e=a("events").EventEmitter,f=a("../components/Activity");var g=f.extends(function i(){f.apply(this,arguments);this.accessLevel=this.app.UserType.LoggedUser;this.viewModel=new h(this.app);this.navBar=f.createSubsectionNavBar("");this.$textarea=this.$activity.find("textarea");this.textarea=this.$textarea.get(0);this.registerHandler({target:this.viewModel,event:"saved",handler:function(){if(this.requestInfo){this.requestInfo.text=this.viewModel.text()}this.app.shell.goBack(this.requestInfo)}.bind(this)});this.registerHandler({target:this.viewModel,event:"cancel",handler:function(){this.app.shell.goBack()}.bind(this)})});c.init=g.init;g.prototype.show=function j(a){f.prototype.show.call(this,a);this.navBar.leftAction().text(a.title||"");this.viewModel.headerText(a.header);this.viewModel.text(a.text);if(a.rowsNumber)this.viewModel.rowsNumber(a.rowsNumber);this.textarea.focus();this.$textarea.click()};function h(){this.headerText=d.observable("Text");this.text=d.observable("");this.rowsNumber=d.observable(2);this.cancel=function a(){this.emit("cancel")};this.save=function b(){this.emit("saved")}}h._inherits(e)},{"../components/Activity":44,events:false,knockout:false}],37:[function(a,b,c){"use strict";var d=a("../components/Activity");var e=a("knockout");var f=d.extends(function h(){d.apply(this,arguments);this.viewModel=new g(this.app);this.accessLevel=this.app.UserType.Freelancer;this.navBar=d.createSubsectionNavBar("Scheduling");this.registerHandler({target:this.app.model.simplifiedWeeklySchedule,event:"error",handler:function(a){var b=a.task==="save"?"Error saving your weekly schedule.":"Error loading your weekly schedule.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=f.init;f.prototype.show=function i(a){d.prototype.show.call(this,a);this.app.model.simplifiedWeeklySchedule.sync();this.viewModel.discard()};function g(a){var b=a.model.simplifiedWeeklySchedule;var c=b.newVersion();c.isObsolete.subscribe(function(a){if(a){c.pull({evenIfNewer:true})}});this.schedule=c.version;this.isLocked=b.isLocked;this.submitText=e.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b);this.discard=function d(){c.pull({evenIfNewer:true})};this.save=function f(){c.push({evenIfObsolete:true})}}},{"../components/Activity":44,knockout:false}],38:[function(a,b,c){"use strict";var d=a("knockout");var e=a("./utils/jsPropertiesTools");function f(a){if(typeof a==="function")return a;else return d.observable(a)}c.registerAll=function(){d.components.register("app-navbar-action",{template:{element:"navbar-action-template"},viewModel:function(a){e.defineGetter(this,"action",function(){return a.action&&a.navBar()?a.navBar()[a.action]():null})}});d.components.register("app-unlabeled-input",{template:{element:"unlabeled-input-template"},viewModel:function(a){this.value=f(a.value);this.placeholder=f(a.placeholder);this.disable=f(a.disable)}});d.components.register("app-feedback-entry",{template:{element:"feedback-entry-template"},viewModel:function(a){this.section=f(a.section||"");this.url=d.pureComputed(function(){return"/feedback/"+this.section()},this)}})}},{"./utils/jsPropertiesTools":96,knockout:false}],39:[function(a,b,c){"use strict";var d=a("knockout"),e=a("jquery"),f=a("./viewmodels/NavBar"),g=a("./viewmodels/NavAction");c.extends=function(a){function b(){var b=a.model.user();if(b.isAnonymous()){a.navBar().rightAction(g.menuOut)}}a.navBar=d.observable(null);var c=function i(){e(".AppNav").trigger("contentChange")};var h=function j(a){if(a){a.text.subscribe(c);a.isTitle.subscribe(c);a.icon.subscribe(c);a.isMenu.subscribe(c)}};a.updateAppNav=function k(d){if("navBar"in d){a.navBar(d.navBar)}else{a.navBar(new f)}b();c();h(a.navBar().leftAction());h(a.navBar().rightAction())};a.updateMenu=function l(a){var b=e(".App-menus .navbar-collapse");b.find("li").removeClass("active");b.find(".go-"+a).closest("li").addClass("active");b.filter(":visible").collapse("hide")}}},{"./viewmodels/NavAction":121,"./viewmodels/NavBar":122,knockout:false}],40:[function(a,b,c){"use strict";b.exports={calendar:a("./activities/calendar"),datetimePicker:a("./activities/datetimePicker"),clients:a("./activities/clients"),services:a("./activities/services"),locations:a("./activities/locations"),textEditor:a("./activities/textEditor"),home:a("./activities/home"),appointment:a("./activities/appointment"),bookingConfirmation:a("./activities/bookingConfirmation"),index:a("./activities/index"),login:a("./activities/login"),logout:a("./activities/logout"),learnMore:a("./activities/learnMore"),signup:a("./activities/signup"),contactInfo:a("./activities/contactInfo"),onboardingPositions:a("./activities/onboardingPositions"),onboardingHome:a("./activities/onboardingHome"),locationEdition:a("./activities/locationEdition"),onboardingComplete:a("./activities/onboardingComplete"),account:a("./activities/account"),inbox:a("./activities/inbox"),conversation:a("./activities/conversation"),scheduling:a("./activities/scheduling"),jobtitles:a("./activities/jobtitles"),feedback:a("./activities/feedback"),faqs:a("./activities/faqs"),feedbackForm:a("./activities/feedbackForm"),contactForm:a("./activities/contactForm"),cms:a("./activities/cms"),clientEdition:a("./activities/clientEdition"),schedulingPreferences:a("./activities/schedulingPreferences"),calendarSyncing:a("./activities/calendarSyncing"),weeklySchedule:a("./activities/weeklySchedule"),bookMeButton:a("./activities/bookMeButton"),ownerInfo:a("./activities/ownerInfo"),privacySettings:a("./activities/privacySettings")}},{"./activities/account":2,"./activities/appointment":3,"./activities/bookMeButton":4,"./activities/bookingConfirmation":5,"./activities/calendar":6,"./activities/calendarSyncing":7,"./activities/clientEdition":8,"./activities/clients":9,"./activities/cms":10,"./activities/contactForm":11,"./activities/contactInfo":12,"./activities/conversation":13,"./activities/datetimePicker":14,"./activities/faqs":15,"./activities/feedback":16,"./activities/feedbackForm":17,"./activities/home":18,"./activities/inbox":19,"./activities/index":20,"./activities/jobtitles":21,"./activities/learnMore":22,"./activities/locationEdition":23,"./activities/locations":24,"./activities/login":25,"./activities/logout":26,"./activities/onboardingComplete":27,"./activities/onboardingHome":28,"./activities/onboardingPositions":29,"./activities/ownerInfo":30,"./activities/privacySettings":31,"./activities/scheduling":32,"./activities/schedulingPreferences":33,"./activities/services":34,"./activities/signup":35,"./activities/textEditor":36,"./activities/weeklySchedule":37}],41:[function(a,b,c){"use strict";var d=a("jquery");a("jquery-mobile");a("./utils/jquery.multiline");var e=a("knockout");e.bindingHandlers.format=a("ko/formatBinding").formatBinding;var f=a("./utils/bootknockBindingHelpers");a("./utils/Function.prototype._inherits");a("./utils/Function.prototype._delayed");a("es6-promise").polyfill();var g=a("layoutUpdateEvent");var h=a("./viewmodels/AppModel");a("./locales/en-US-LC");function i(){function a(a){var b,c=a.attr("data-target")||(b=a.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"");return d(c)}d(document).on("click.bs.collapse.data-api.workaround",'[data-toggle="collapse"]',function(){var b=d(this),c=a(b),e=c&&c.data("bs.collapse");if(e){e.$trigger=b}})}var j={shell:a("./app.shell"),model:new h,activities:a("./app.activities"),modals:a("./app.modals"),goDashboard:function l(){if(l._going===true){return}else{setTimeout(function(){l._going=true;var a=this.model.user().onboardingStep();if(a){this.shell.go("onboardingHome/"+a)}else{this.shell.go("home")}setTimeout(function(){l._going=false},1)}.bind(this),1)}}};a("./app-navbar").extends(j);a("./app-components").registerAll();j.getActivity=function m(a){var b=this.activities[a];if(b){var c=this.shell.items.find(a);if(c&&c.length)return b.init(c,this)}return null};j.getActivityControllerByRoute=function n(a){var b=a.name||this.shell.indexName;return this.getActivity(b)};j.shell.accessControl=a("./utils/accessControl")(j);j.UserType=j.model.user().constructor.UserType;var k=function o(){g.layoutUpdateEvent+=" orientationchange";g.on();var b=function p(){d(window).trigger("layoutUpdate")};window.addEventListener("native.keyboardshow",b);window.addEventListener("native.keyboardhide",b);if(window.StatusBar){window.StatusBar.overlaysWebView(false)}var c=false;if(window.device&&/iOS|iPad|iPhone|iPod/i.test(window.device.platform)){c=true}var h=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(h){var k=function q(){return window.innerHeight};d("html").height(k()+"px");d(window).on("layoutUpdate",function(){d("html").height(k()+"px")})}(function(){var a=d("body");var b=function c(){var b=a.height();d(".full-height").css("height","auto").css("min-height",b).css("height",function(){return d(this).outerHeight(false)})};b();d(window).on("layoutUpdate",function(){b()})})();setTimeout(function(){d(window).trigger("layoutUpdate")},200);i();a("bootstrap");f.plugIn(e);a("./utils/bootstrapSwitchBinding").plugIn(e);if(window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard){window.cordova.plugins.Keyboard.disableScroll(true)}d(document).on("tap","[data-shell]",function(a){var b=d(this).attr("data-shell")||"",c=b.split(" "),e=c[0];if(e&&typeof j.shell[e]==="function"){j.shell[e].apply(j.shell,c.slice(1));a.stopImmediatePropagation();a.preventDefault()}});if(window.cordova){d(document).on("tap",'[target="_blank"], [target="_system"]',function(a){window.open(this.getAttribute("href"),this.getAttribute("target"));a.preventDefault()})}j.shell.on(j.shell.events.itemReady,function(a,b){var c=a.data("activity");var d=j.getActivity(c);d.show(b);var e=d.menuItem||c;j.updateMenu(e);j.updateAppNav(d)});j.shell.on(j.shell.events.closed,function(a){var b=a.data("activity");var c=j.getActivity(b);if(c.hide)c.hide()});e.applyBindings({navBar:j.navBar},d(".AppNav").get(0));var l=a("./components/SmartNavBar");var m=l.getAll();m.forEach(function(a){d(a.el).on("contentChange",function(){a.refresh()})});var n=false;d(document).on("show.bs.collapse hide.bs.collapse",".AppNav .navbar-collapse",function(a){if(!n){n=true;var b=a.type==="show";d("body").toggleClass("use-backdrop",b);d(".collapsing, .collapse.in").collapse("hide");n=false}});var o=function(a){window.alert("There was an error loading: "+a&&a.message||a)};j.model.init().then(j.shell.run.bind(j.shell),o).then(function(){d("html").addClass("is-ready");if(window.navigator&&window.navigator.splashscreen){window.navigator.splashscreen.hide()}},o);window.app=j};if(window.cordova){d(function(){d(document).on("deviceready",k)})}else{d(k)}},{"./app-components":38,"./app-navbar":39,"./app.activities":40,"./app.modals":42,"./app.shell":43,"./components/SmartNavBar":46,"./locales/en-US-LC":47,"./utils/Function.prototype._delayed":82,"./utils/Function.prototype._inherits":83,"./utils/accessControl":88,"./utils/bootknockBindingHelpers":90,"./utils/bootstrapSwitchBinding":91,"./utils/jquery.multiline":95,"./viewmodels/AppModel":113,"es6-promise":false,knockout:false}],42:[function(a,b,c){"use strict";var d=a("jquery");c.getErrorMessageFrom=function e(a){if(!a){return"Unknow error"}else if(typeof a==="string"){return a}else{a=a.responseJSON||a;var b=a.name&&a.name+": "||"";b+=a.errorMessage||a.message||"";if(a.errors){if(Array.isArray(a.errors)){b+="\n"+a.errors.join("\n")}else{Object.keys(a.errors).forEach(function(c){b+="\n"+a.errors[c].join("\n")})}}else{b+="\nTechnical details: "+JSON.stringify(a)}return b}};c.showError=function f(a){var b=d("#errorModal"),e=b.find("#errorModal-label"),f=b.find("#errorModal-body");a=a||{};var g=f.data("default-text");if(a.error)g=c.getErrorMessageFrom(a.error);else if(a.message)g=a.message;f.multiline(g);e.text(a.title||e.data("default-text"));b.modal("show")}},{}],43:[function(a,b,c){"use strict";var d=window.location.pathname;var e=a("./utils/shell/hashbangHistory");var f=a("./utils/shell/index"),g=f.Shell,h=f.DomItemsManager;var i=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);var f=new g({root:"body",baseUrl:d,forceHashbang:true,indexName:"index",linkEvent:i?"tap":"click",loader:null,history:e,domItemsManager:new h({idAttributeName:"data-activity"})});f.on("error",function(a){var b="Unknow error";if(a){if(typeof a==="string"){b=a}else if(a.message){b=a.message}else{b=JSON.stringify(a)}}window.alert(b)});b.exports=f},{"./utils/shell/hashbangHistory":101,"./utils/shell/index":102}],44:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../viewmodels/NavAction"),f=a("../viewmodels/NavBar");a("../utils/Function.prototype._inherits");function g(a,b){this.$activity=a;this.app=b;this.accessLevel=b.UserType.None;this.viewState={};this.requestData=null;this.navBar=new f({title:null,leftAction:null,rightAction:null});
setTimeout(function c(){d.applyBindings(this.viewModel||{},a.get(0))}.bind(this),1)}b.exports=g;g.prototype.show=function i(a){a=a||{};this.requestData=a;if(this._handlers&&this._handlersAreConnected!==true){this._handlers.forEach(function(a){if(!a.event&&a.target.subscribe){var b=a.target.subscribe(a.handler);a._subscription=b;if(a._latestSubscribedValue!==a.target()){a.handler.call(a.target,a.target())}}else if(a.selector){a.target.on(a.event,a.selector,a.handler)}else{a.target.on(a.event,a.handler)}});this._handlersAreConnected=true}};g.prototype.hide=function j(){if(this._handlers){this._handlers.forEach(function(a){if(a._subscription){a._subscription.dispose();a._latestSubscribedValue=a.target()}else if(a.target.off){if(a.selector)a.target.off(a.event,a.selector,a.handler);else a.target.off(a.event,a.handler)}else{a.target.removeListener(a.event,a.handler)}});this._handlersAreConnected=false}};g.prototype.registerHandler=function k(a){if(!a)throw new Error("Register require a settings object");if(!a.target||!a.target.on&&!a.target.subscribe)throw new Error("Target is null or not a jQuery, EventEmmiter or Observable object");if(typeof a.handler!=="function"){throw new Error("Handler must be a function.")}if(!a.event&&!a.target.subscribe){throw new Error("Event is null; it's required for non observable objects")}this._handlers=this._handlers||[];this._handlers.push(a)};g.NavBar=f;g.NavAction=e;g.createSectionNavBar=function l(a){return new f({title:a,leftAction:e.menuNewItem,rightAction:e.menuIn})};g.createSubsectionNavBar=function m(a,b){b=b||{};var c={text:a,isTitle:true};if(b.backLink){c.link=b.backLink;c.isShell=false}return new f({title:"",leftAction:e.goBack.model.clone(c),rightAction:b.helpId?e.goHelpIndex.model.clone({link:"#"+b.helpId}):e.goHelpIndex})};var h=function n(a,b,c){n.instances=n.instances||{};if(n.instances[a.name]instanceof a){return n.instances[a.name]}else{var d=new a(b,c);n.instances[a.name]=d;return d}};g.extends=function o(a){a._inherits(g);a.init=h.bind(null,a);return a}},{"../utils/Function.prototype._inherits":83,"../viewmodels/NavAction":121,"../viewmodels/NavBar":122,knockout:false}],45:[function(a,b,c){var d=a("jquery");var e={component:"DatePicker",months:"DatePicker-months",days:"DatePicker-days",monthDay:"day",month:"month",year:"year",years:"DatePicker-years"};var f=function(a,b){this.element=d(a);this.format=g.parseFormat(b.format||this.element.data("date-format")||"mm/dd/yyyy");this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on"):false;this.isPlaceholder=this.element.is(".calendar-placeholder");this.picker=d(g.template).appendTo(this.isPlaceholder?this.element:"body").on("click tap",d.proxy(this.click,this));this.picker.addClass(this.isPlaceholder?"container":"dropdown-menu");if(this.isPlaceholder){this.picker.show();if(this.element.data("date")=="today"){this.date=new Date;this.set()}this.element.trigger({type:"show",date:this.date})}else if(this.isInput){this.element.on({focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this)})}else{if(this.component){this.component.on("click tap",d.proxy(this.show,this))}else{this.element.on("click tap",d.proxy(this.show,this))}}this.element.on("swipeleft",function(a){a.preventDefault();this.moveDate("next")}.bind(this)).on("swiperight",function(a){a.preventDefault();this.moveDate("prev")}.bind(this));this.minViewMode=b.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break}}this.viewMode=b.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode==="string"){switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0;break}}this.startViewMode=this.viewMode;this.weekStart=b.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.onRender=b.onRender;this.fillDow();this.fillMonths();this.update();this.showMode()};f.prototype={constructor:f,show:function(a){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();d(window).on("resize",d.proxy(this.place,this));if(a){a.stopPropagation();a.preventDefault()}if(!this.isInput){}var b=this;d(document).on("mousedown",function(a){if(d(a.target).closest("."+e.component).length===0){b.hide()}});this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();d(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){d(document).off("mousedown",this.hide)}this.element.trigger({type:"hide",date:this.date})},set:function(){var a=g.formatDate(this.date,this.format);if(!this.isInput){if(this.component){this.element.find("input").prop("value",a)}this.element.data("date",a)}else{this.element.prop("value",a)}},setValue:function(a,b){if(typeof a==="string"){this.date=g.parseDate(a,this.format)}else{this.date=new Date(a)}this.set();this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill();if(b!==true){this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})}},getValue:function(){return this.date},moveValue:function(a,b){if(["prev","next"].indexOf(a&&a.toLowerCase())==-1)return;b=b?g.modesSet[b]:g.modes[this.viewMode];this.date["set"+b.navFnc].call(this.date,this.date["get"+b.navFnc].call(this.date)+b.navStep*(a==="prev"?-1:1));this.setValue(this.date);return this.date},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},update:function(a){this.date=g.parseDate(typeof a==="string"?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format);this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},fillDow:function(){var a=this.weekStart;var b="<tr>";while(a<this.weekStart+7){b+='<th class="dow">'+g.dates.daysMin[a++%7]+"</th>"}b+="</tr>";this.picker.find("."+e.days+" thead").append(b)},fillMonths:function(){var a="";var b=0;while(b<12){a+='<span class="'+e.month+'">'+g.dates.monthsShort[b++]+"</span>"}this.picker.find("."+e.months+" td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),c=a.getMonth(),d=this.date.valueOf();this.picker.find("."+e.days+" th:eq(1)").html(g.dates.months[c]+" "+b);var f=new Date(b,c-1,28,0,0,0,0),h=g.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(h);f.setDate(h-(f.getDay()-this.weekStart+7)%7);var i=new Date(f);i.setDate(i.getDate()+42);i=i.valueOf();var j=[];var k,l,m;if(this._daysCreated!==true){while(f.valueOf()<i){if(f.getDay()===this.weekStart){j.push("<tr>")}k=this.onRender(f);l=f.getFullYear();m=f.getMonth();if(m<c&&l===b||l<b){k+=" old"}else if(m>c&&l===b||l>b){k+=" new"}if(f.valueOf()===d){k+=" active"}j.push('<td class="'+e.monthDay+" "+k+'">'+f.getDate()+"</td>");if(f.getDay()===this.weekEnd){j.push("</tr>")}f.setDate(f.getDate()+1)}this.picker.find("."+e.days+" tbody").empty().append(j.join(""));this._daysCreated=true}else{var n=this.picker.find("."+e.days+" tbody tr:first-child()");var o=null;while(f.valueOf()<i){var p=f.getDay()-this.weekStart;k=this.onRender(f);l=f.getFullYear();m=f.getMonth();if(m<c&&l===b||l<b){k+=" old"}else if(m>c&&l===b||l>b){k+=" new"}if(f.valueOf()===d){k+=" active"}o=n.find("td:eq("+p+")");o.attr("class","day "+k).text(f.getDate());if(f.getDay()===this.weekEnd){n=n.next("tr")}f.setDate(f.getDate()+1)}}var q=this.date.getFullYear();var r=this.picker.find("."+e.months).find("th:eq(1)").html(b).end().find("span").removeClass("active");if(q===b){r.eq(this.date.getMonth()).addClass("active")}j="";b=parseInt(b/10,10)*10;var s=this.picker.find("."+e.years).find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;var t;if(this._yearsCreated!==true){for(t=-1;t<11;t++){j+='<span class="'+e.year+(t===-1||t===10?" old":"")+(q===b?" active":"")+'">'+b+"</span>";b+=1}s.html(j);this._yearsCreated=true}else{var u=s.find("span:first-child()");for(t=-1;t<11;t++){u.text(b).attr("class","year"+(t===-1||t===10?" old":"")+(q===b?" active":""));b+=1;u=u.next()}}},moveDate:function(a,b){if(["prev","next"].indexOf(a&&a.toLowerCase())==-1)return;b=b||this.viewMode;this.viewDate["set"+g.modes[b].navFnc].call(this.viewDate,this.viewDate["get"+g.modes[b].navFnc].call(this.viewDate)+g.modes[b].navStep*(a==="prev"?-1:1));this.fill();this.set()},click:function(a){a.stopPropagation();a.preventDefault();var b=d(a.target).closest("span, td, th");if(b.length===1){var c,f;switch(b[0].nodeName.toLowerCase()){case"th":switch(b[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.moveDate(b[0].className);break}break;case"span":if(b.is("."+e.month)){c=b.parent().find("span").index(b);this.viewDate.setMonth(c)}else{f=parseInt(b.text(),10)||0;this.viewDate.setFullYear(f)}if(this.viewMode!==0){this.date=new Date(this.viewDate);this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})}this.showMode(-1);this.fill();this.set();break;case"td":if(b.is(".day")&&!b.is(".disabled")){var h=parseInt(b.text(),10)||1;c=this.viewDate.getMonth();if(b.is(".old")){c-=1}else if(b.is(".new")){c+=1}f=this.viewDate.getFullYear();this.date=new Date(f,c,h,0,0,0,0);this.viewDate=new Date(f,c,Math.min(28,h),0,0,0,0);this.fill();this.set();this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})}break}}},mousedown:function(a){a.stopPropagation();a.preventDefault()},showMode:function(a){if(a){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))}this.picker.find(">div").hide().filter("."+e.component+"-"+g.modes[this.viewMode].clsName).show()}};d.fn.datepicker=function(a){var b=Array.prototype.slice.call(arguments,1);var c;this.each(function(){var e=d(this),g=e.data("datepicker"),h=typeof a==="object"&&a;if(!g){e.data("datepicker",g=new f(this,d.extend({},d.fn.datepicker.defaults,h)))}if(typeof a==="string"){c=g[a].apply(g,b);if(typeof(c!=="undefined")){return false}}});if(typeof c!=="undefined")return c;else return this};d.fn.datepicker.defaults={onRender:function(){return""}};d.fn.datepicker.Constructor=f;var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"day",navFnc:"Date",navStep:1}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,g.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||c.length===0){throw new Error("Invalid date format.")}return{separator:b,parts:c}},parseDate:function(a,b){var c=a.split(b.separator),d;a=new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);if(c.length===b.parts.length){var e=a.getFullYear(),f=a.getDate(),g=a.getMonth();for(var h=0,i=b.parts.length;h<i;h++){d=parseInt(c[h],10)||1;switch(b.parts[h]){case"dd":case"d":f=d;a.setDate(d);break;case"mm":case"m":g=d-1;a.setMonth(d-1);break;case"yy":e=2e3+d;a.setFullYear(2e3+d);break;case"yyyy":e=d;a.setFullYear(d);break}}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d;c.mm=(c.m<10?"0":"")+c.m;a=[];for(var d=0,e=b.parts.length;d<e;d++){a.push(c[b.parts[d]])}return a.join(b.separator)},headTemplate:"<thead>"+"<tr>"+'<th class="prev">&lsaquo;</th>'+'<th colspan="5" class="switch"></th>'+'<th class="next">&rsaquo;</th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};g.template='<div class="'+e.component+'">'+'<div class="'+e.days+'">'+'<table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="'+e.months+'">'+'<table class="table-condensed">'+g.headTemplate+g.contTemplate+"</table>"+"</div>"+'<div class="'+e.years+'">'+'<table class="table-condensed">'+g.headTemplate+g.contTemplate+"</table>"+"</div>"+"</div>";g.modesSet={date:g.modes[3],month:g.modes[0],year:g.modes[1],decade:g.modes[2]};c.DatePicker=f;c.defaults=g;c.utils=g},{}],46:[function(a,b,c){var d=a("jquery");var e=function(a){while(a.firstChild){a.removeChild(a.firstChild)}};var f=function h(a){var b=a.parentNode.querySelectorAll(".SmartNavBar-edge.left")[0];var c=a.parentNode.querySelectorAll(".SmartNavBar-edge.right")[0];if(typeof b==="undefined"){b={offsetWidth:0,className:""}}if(typeof c==="undefined"){c={offsetWidth:0,className:""}}var d=Math.max(b.offsetWidth,c.offsetWidth);a.style.marginLeft=d+"px";a.style.marginRight=d+"px";var f=a.offsetWidth<a.scrollWidth?true:false;if(f){if(b.offsetWidth<c.offsetWidth){a.style.marginLeft=b.offsetWidth+"px";a.style.textAlign="right"}else{a.style.marginRight=c.offsetWidth+"px";a.style.textAlign="left"}f=a.offsetWidth<a.scrollWidth?true:false;if(f){if(new RegExp("arrow").test(b.className)){e(b.childNodes[1]);a.style.marginLeft="26px"}if(new RegExp("arrow").test(c.className)){e(c.childNodes[1]);a.style.marginRight="26px"}}}};c.textboxResize=f;var g=function i(a){this.el=a;this.refresh=function b(){var b=d(a).children("h1").get(0);if(b)f(b)};this.refresh()};c.SmartNavBar=g;c.getAll=function j(){var a=d(".SmartNavBar");return d.map(a,function(a){return new g(a)})};c.refreshAll=function k(){d(".SmartNavBar > h1").each(function(){f(this)})}},{}],47:[function(a,b,c){"use strict";var d=a("moment");var e=d.locale();d.locale("en-US-LC",{meridiemParse:/[ap]\.?\.?/i,meridiem:function(a,b,c){if(a>11){return c?"p":"P"}else{return c?"a":"A"}},calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"[last] dddd",nextWeek:"dddd",sameElse:"M/D"},longDateFormat:{LT:"h:mma",LTS:"h:mm:ssa",L:"MM/DD/YYYY",l:"M/D/YYYY",LL:"MMMM Do YYYY",ll:"MMM D YYYY",LLL:"MMMM Do YYYY LT",lll:"MMM D YYYY LT",LLLL:"dddd, MMMM Do YYYY LT",llll:"ddd, MMM D YYYY LT"}});d.locale(e)},{moment:false}],48:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model");function f(a){e(this);this.model.defProperties({addressID:0,addressName:"",jobTitleID:0,userID:0,addressLine1:null,addressLine2:null,postalCode:null,city:null,stateProvinceCode:null,stateProviceName:null,countryCode:null,latitude:null,longitude:null,specialInstructions:null,isServiceArea:false,isServiceLocation:false,serviceRadius:0,createdDate:null,updatedDate:null,kind:""},a);this.singleLine=d.computed(function(){var a=[this.addressLine1(),this.city(),this.postalCode(),this.stateProvinceCode()];return a.filter(function(a){return!!a}).join(", ")},this);var b={US:"United States",ES:"Spain"};this.countryName=d.computed(function(){return b[this.countryCode()]||"unknow"},this);this.latlng=d.computed(function(){return{lat:this.latitude(),lng:this.longitude()}},this)}b.exports=f},{"./Model":64,knockout:false}],49:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("./Client"),g=a("./Location"),h=a("./Service"),i=a("moment");function j(a){e(this);this.model.defProperties({id:null,startTime:null,endTime:null,summary:"New booking",subtotalPrice:0,feePrice:0,pfeePrice:0,totalPrice:0,ptotalPrice:0,preNotesToClient:null,postNotesToClient:null,preNotesToSelf:null,postNotesToSelf:null},a);a=a||{};this.client=d.observable(a.client?new f(a.client):null);this.location=d.observable(new g(a.location));this.locationSummary=d.computed(function(){return this.location().singleLine()},this);this.services=d.observableArray((a.services||[]).map(function(a){return a instanceof h?a:new h(a)}));this.servicesSummary=d.computed(function(){return this.services().map(function(a){return a.name()}).join(", ")},this);this.services.subscribe(function(a){this.ptotalPrice(a.reduce(function(a,b){return a+b.price()},0))}.bind(this));this.displayedDate=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").calendar()},this);this.displayedStartTime=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").format("LT")},this);this.displayedEndTime=d.pureComputed(function(){return i(this.endTime()).locale("en-US-LC").format("LT")},this);this.displayedTimeRange=d.pureComputed(function(){return this.displayedStartTime()+"-"+this.displayedEndTime()},this);this.itStarted=d.pureComputed(function(){return this.startTime()&&new Date>=this.startTime()},this);this.itEnded=d.pureComputed(function(){return this.endTime()&&new Date>=this.endTime()},this);this.isNew=d.pureComputed(function(){return!this.id()},this);this.stateHeader=d.pureComputed(function(){var a="";if(!this.isNew()){if(this.itStarted()){if(this.itEnded()){a="Completed:"}else{a="Now:"}}else{a="Upcoming:"}}return a},this)}b.exports=j},{"./Client":55,"./Location":60,"./Model":64,"./Service":70,knockout:false,moment:false}],50:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({bookingID:0,bookingRequestID:0,confirmedDateID:null,totalPricePaidByCustomer:null,totalServiceFeesPaidByCustomer:null,totalPaidToFreelancer:null,totalServiceFeesPaidByFreelancer:null,bookingStatusID:null,pricingAdjustmentApplied:false,reviewedByFreelancer:false,reviewedByCustomer:false,createdDate:null,updatedDate:null,bookingRequest:null},a);this.bookingRequest(new f(a&&a.bookingRequest))}b.exports=e;function f(a){d(this);this.model.defProperties({bookingRequestID:0,bookingTypeID:0,customerUserID:0,freelancerUserID:0,jobTitleID:0,pricingEstimateID:0,bookingRequestStatusID:0,specialRequests:null,preferredDateID:null,alternativeDate1ID:null,alternativeDate2ID:null,addressID:null,cancellationPolicyID:null,instantBooking:false,createdDate:null,updatedDate:null,pricingEstimate:null},a);this.pricingEstimate(new g(a&&a.pricingEstimate))}function g(a){d(this);this.model.defProperties({pricingEstimateID:0,pricingEstimateRevision:0,serviceDurationHours:null,firstSessionDurationHours:null,subtotalPrice:null,feePrice:null,totalPrice:null,pFeePrice:null,subtotalRefunded:null,feeRefunded:null,totalRefunded:null,dateRefunded:null,createdDate:null,updatedDate:null,details:[]},a);if(Array.isArray(a.details)){this.details(a.details.map(function(a){return new h(a)}))}}function h(a){d(this);this.model.defProperties({freelancerPricingID:0,freelancerPricingDataInput:null,customerPricingDataInput:null,hourlyPrice:null,subtotalPrice:null,feePrice:null,totalPrice:null,serviceDurationHours:null,firstSessionDurationHours:null,createdDate:null,updatedDate:null},a)}},{"./Model":64}],51:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("moment");function g(a){e(this);this.model.defProperties({quantity:0,concept:"",time:null,timeFormat:" [@] h:mma"},a);this.phrase=d.pureComputed(function(){var a=this.timeFormat()&&this.time()&&f(this.time()).format(this.timeFormat())||"";return this.concept()+a},this);this.url=d.pureComputed(function(){var a=this.time()&&"/calendar/"+this.time().toISOString();return a},this)}b.exports=g},{"./Model":64,knockout:false,moment:false}],52:[function(a,b,c){"use strict";function d(a){g(this);this.model.defProperties({frequencyTypeID:0,interval:1,until:null,count:null,ending:null,selectedWeekDays:[],monthlyWeekDay:false,incompatible:false,tooMany:false},a)}function e(a){g(this);this.model.defProperties({startTime:null,endTime:null},a)}var f=a("knockout"),g=a("./Model");function h(a){g(this);if(a){a.startTime=a.startTime&&new Date(Date.parse(a.startTime))||null;a.endTime=a.endTime&&new Date(Date.parse(a.endTime))||null}this.model.defProperties({calendarEventID:0,userID:0,eventTypeID:3,summary:"",availabilityTypeID:0,startTime:null,endTime:null,kind:0,isAllDay:false,timeZone:"Z",location:null,updatedDate:null,createdDate:null,description:"",readOnly:false},a);this.recurrenceRule=f.observable(a&&a.recurrenceRule&&new d(a.recurrenceRule));this.recurrenceOccurrences=f.observableArray([]);if(a&&a.recurrenceOccurrences){a.recurrenceOccurrences.forEach(function(a){this.RecurrenceOccurrences.push(new e(a))}.bind(this))}}b.exports=h;h.RecurrenceRule=d;h.RecurrenceOccurrence=e},{"./Model":64,knockout:false}],53:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({startTime:null,endTime:null,subject:"",description:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}b.exports=e},{"./Model":64}],54:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({icalExportUrl:"",icalImportUrl:""},a)}b.exports=e},{"./Model":64}],55:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model");function f(a){e(this);this.model.defProperties({id:0,firstName:"",lastName:"",email:"",phone:null,canReceiveSms:false,birthMonthDay:null,birthMonth:null,notesAboutClient:null},a);this.fullName=d.pureComputed(function(){return this.firstName()+" "+this.lastName()},this);this.birthDay=d.pureComputed(function(){if(this.birthMonthDay()&&this.birthMonth()){return this.birthMonth()+"/"+this.birthMonthDay()}else{return null}},this)}b.exports=f},{"./Model":64,knockout:false}],56:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("./ListViewItem");function g(a){e(this);this.model.defProperties({availability:false,payments:false,profile:false,coop:true},a);var b={availability:new f({contentLine1:"Complete your availability to create a cleaner calendar",markerIcon:"glyphicon glyphicon-calendar",actionIcon:"glyphicon glyphicon-chevron-right"}),payments:new f({contentLine1:"Start accepting payments through Loconomics",markerIcon:"glyphicon glyphicon-usd",actionIcon:"glyphicon glyphicon-chevron-right"}),profile:new f({contentLine1:"Activate your profile in the marketplace",markerIcon:"glyphicon glyphicon-user",actionIcon:"glyphicon glyphicon-chevron-right"}),coop:new f({contentLine1:"Learn more about our cooperative",actionIcon:"glyphicon glyphicon-chevron-right"})};this.items=d.pureComputed(function(){var a=[];Object.keys(b).forEach(function(c){if(this[c]())a.push(b[c])}.bind(this));return a},this)}b.exports=g},{"./ListViewItem":59,"./Model":64,knockout:false}],57:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("./JobTitlePricingType");function g(a){e(this);this.model.defProperties({jobTitleID:0,singularName:"",pluralName:"",aliases:"",description:null,searchDescription:null,createdDate:null,updatedDate:null},a);this.model.defID(["jobTitleID"]);this.pricingTypes=d.observableArray([]);if(a&&a.pricingTypes){a.pricingTypes.forEach(function(a){this.pricingTypes.push(new f(a))}.bind(this))}}b.exports=g},{"./JobTitlePricingType":58,"./Model":64,knockout:false}],58:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({pricingTypeID:0,clientTypeID:1,createdDate:null,updatedDate:null},a);this.model.defID(["pricingTypeID","clientTypeID"])}b.exports=e},{"./Model":64}],59:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({markerLine1:null,markerLine2:null,markerIcon:null,contentLine1:"",contentLine2:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}b.exports=e},{"./Model":64}],60:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model");function f(a){e(this);this.model.defProperties({locationID:0,name:"",addressLine1:null,addressLine2:null,city:null,stateProvinceCode:null,stateProviceID:null,postalCode:null,postalCodeID:null,countryID:null,latitude:null,longitude:null,specialInstructions:null,isServiceRadius:false,isServiceLocation:false,serviceRadius:0},a);this.singleLine=d.computed(function(){var a=[this.addressLine1(),this.city(),this.postalCode(),this.stateProvinceCode()];return a.filter(function(a){return!!a}).join(", ")},this);this.countryName=d.computed(function(){return this.countryID()===1?"United States":this.countryID()===2?"Spain":"unknow"},this);this.countryCodeAlpha2=d.computed(function(){return this.countryID()===1?"US":this.countryID()===2?"ES":""},this);this.latlng=d.computed(function(){return{lat:this.latitude(),lng:this.longitude()}},this)}b.exports=f},{"./Model":64,knockout:false}],61:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("lodash");function g(a){e(this);this.model.defProperties({messages:[],topNumber:10},a);this.top=d.pureComputed(function b(a){if(a)this.topNumber(a);return f.first(this.messages(),this.topNumber())},this)}b.exports=g},{"./Model":64,knockout:false,lodash:false}],62:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({userID:0,publicBio:"",freelancerProfileUrlSlug:"",freelancerProfileUrl:"",freelancerWebsiteUrl:"",bookCode:"",createdDate:null,updatedDate:null},a)}b.exports=e},{"./Model":64}],63:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("moment");function g(a){e(this);this.model.defProperties({id:0,createdDate:null,updatedDate:null,subject:"",content:null,link:"#",actionIcon:null,actionText:null,classNames:""},a);this.displayedDate=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").calendar()},this);this.displayedTime=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").format("LT")},this)}b.exports=g},{"./Model":64,knockout:false,moment:false}],64:[function(a,b,c){"use strict";var d=a("knockout");d.mapping=a("knockout.mapping");var e=a("jquery");var f=function(a){return e.extend(true,{},a)};function g(a){if(!(this instanceof g)){var b=new g(a);a.model=b;return b}this.modelObject=a;this.propertiesList=[];this.fieldsList=[];this.mappingOptions={};this.dataTimestamp=d.observable(new Date).extend({rateLimit:0})}b.exports=g;g.prototype.defProperties=function h(a,b){b=b||{};var c=this.modelObject,e=this.propertiesList,f=this.dataTimestamp;Object.keys(a).forEach(function(g){var h=a[g];c[g]=Array.isArray(h)?d.observableArray(h):d.observable(h);c[g]._defaultValue=h;c[g]._initialValue=b[g];if(typeof b[g]!=="undefined"){c[g](b[g])}c[g].subscribe(function(){f(new Date)});e.push(g)});f(new Date)};g.prototype.defFields=function i(a,b){b=b||{};var c=this.modelObject,d=this.fieldsList;Object.keys(a).each(function(e){var f=a[e];c[e]=f;if(typeof b[e]!=="undefined"){c[e]=b[e]}d.push(e)})};g.prototype.defID=function j(a){this.idFieldsNames=a;if(a.length===1){var b=a[0];this.modelObject.id=d.pureComputed(function(){return this[b]()},this.modelObject)}else{this.modelObject.id=d.pureComputed(function(){return a.map(function(a){return this[a]()}.bind(this))},this.modelObject)}};g.prototype.regTimestamp=function k(a){var b=this.modelObject[a];if(typeof b!=="function"){throw new Error("There is no observable property with name ["+a+"] to register as timestamp.")}this.dataTimestamp.subscribe(function(a){b(a)})};g.prototype.toPlainObject=function l(a){var b={},c=this.modelObject;function d(c,d){if(typeof d==="object"){if(a===true){if(d instanceof Date){b[c]=new Date(d)}else if(d&&d.model instanceof g){b[c]=d.model.toPlainObject(a)}else if(d===null){b[c]=null}else{b[c]=f(d)}}else if(a===false){b[c]=d}}else{b[c]=d}}this.propertiesList.forEach(function(a){var b=c[a]();d(a,b)});this.fieldsList.forEach(function(a){var b=c[a];d(a,b)});return b};g.prototype.updateWith=function m(a,b){var c=null;if(a&&a.model instanceof g){c=a.model.dataTimestamp();a=a.model.toPlainObject(b)}d.mapping.fromJS(a,this.mappingOptions,this.modelObject);if(c)this.modelObject.model.dataTimestamp(c)};g.prototype.clone=function n(a,b){var c=this.toPlainObject(b);var d=new this.modelObject.constructor(c);if(a){d.model.updateWith(a)}return d}},{knockout:false,"knockout.mapping":false}],65:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("./ListViewItem"),g=a("moment"),h=a("numeral");function i(a){e(this);a=a||{};this.earnings=new j(a.earnings);var b=new f;b.markerLine1=d.computed(function(){var a=h(this.currentAmount()).format("$0,0");return a},this.earnings);b.contentLine1=d.computed(function(){return this.currentConcept()},this.earnings);b.markerLine2=d.computed(function(){var a=h(this.nextAmount()).format("$0,0");return a},this.earnings);b.contentLine2=d.computed(function(){return this.nextConcept()},this.earnings);this.timeBooked=new k(a.timeBooked);var c=new f;c.markerLine1=d.computed(function(){var a=h(this.percent()).format("0%");return a},this.timeBooked);c.contentLine1=d.computed(function(){return this.concept()},this.timeBooked);this.items=d.pureComputed(function(){var a=[];a.push(b);a.push(c);return a},this)}b.exports=i;function j(a){e(this);this.model.defProperties({currentAmount:0,currentConceptTemplate:"already paid this month",nextAmount:0,nextConceptTemplate:"projected {month} earnings"},a);this.currentConcept=d.pureComputed(function(){var a=g().format("MMMM");return this.currentConceptTemplate().replace(/\{month\}/,a)},this);this.nextConcept=d.pureComputed(function(){var a=g().add(1,"month").format("MMMM");return this.nextConceptTemplate().replace(/\{month\}/,a)},this)}function k(a){e(this);this.model.defProperties({percent:0,conceptTemplate:"of available time booked in {month}"},a);this.concept=d.pureComputed(function(){var a=g().add(1,"month").format("MMMM");return this.conceptTemplate().replace(/\{month\}/,a)},this)}},{"./ListViewItem":59,"./Model":64,knockout:false,moment:false,numeral:1}],66:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({positionID:0,positionSingular:"",positionPlural:"",description:"",active:true},a)}b.exports=e},{"./Model":64}],67:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({pricingTypeID:0,singularName:"",pluralName:"",slugName:"",addNewLabel:null,freelancerDescription:null,priceCalculation:null,isAddon:false,namePlaceHolder:null,suggestedName:null,fixedName:null,durationLabel:null,priceLabel:null,priceNote:null,firstTimeClientsOnlyLabel:null,descriptionPlaceHolder:null,priceRateQuantityLabel:null,priceRateUnitLabel:null,noPriceRateLabel:null,numberOfSessionsLabel:null,inPersonPhoneLabel:null,successOnDelete:null,errorOnDelete:null,successOnSave:null,errorOnSave:null,priceRateIsRequiredValidationError:null,priceRateUnitIsRequiredValidationError:null,learnMoreLabel:null,learnMoreText:null,priceRateLearnMoreLabel:null,priceRateLearnMoreText:null,noPriceRateLearnMoreLabel:null,noPriceRateLearnMoreText:null,requireDuration:false,includeServiceAttributes:false,includeSpecialPromotion:false,summaryFormat:null,summaryFormatMultipleSessions:null,summaryFormatNoDuration:null,summaryFormatMultipleSessionsNoDuration:null,withoutServiceAttributesCustomerMessage:null,withoutServiceAttributesFreelancerMessage:null,firstTimeClientsOnlyListText:null,priceRateQuantityListLabel:null,priceRateUnitListLabel:null,noPriceRateListMessage:null,nameAndSummaryFormat:null,nameAndSummaryFormatMultipleSessions:null,nameAndSummaryFormatNoDuration:null,nameAndSummaryFormatMultipleSessionsNoDuration:null,createdDate:null,updatedDate:null},a);this.model.defID(["pricingTypeID"])}b.exports=e;var f={FixedPrice:1,HourlyPrice:2};e.PriceCalculationType=f},{"./Model":64}],68:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({userID:0,smsBookingCommunication:false,phoneBookingCommunication:false,loconomicsCommunityCommunication:false,loconomicsDbmCampaigns:false,profileSeoPermission:false,loconomicsMarketingCampaigns:false,coBrandedPartnerPermissions:false,createdDate:null,updatedDate:null},a);this.model.defID(["userID"])}b.exports=e},{"./Model":64}],69:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);
this.model.defProperties({advanceTime:24,betweenTime:0,incrementsSizeInMinutes:15},a)}b.exports=e},{"./Model":64}],70:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model");function f(a){e(this);this.model.defProperties({name:"",price:0,duration:0,isAddon:false},a);this.durationText=d.computed(function(){var a=this.duration()||0;return a?a+" minutes":""},this)}b.exports=f},{"./Model":64,knockout:false}],71:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model");function f(a){e(this);this.model.defProperties({from:0,to:0},a);this.isEnabled=d.computed({read:function(){return typeof this.from()==="number"&&typeof this.to()==="number"&&this.from()<this.to()},write:function(a){if(a===true){this.fromHour(9);this.toHour(17)}else{this.toHour(0);this.from(0)}},owner:this}).extend({rateLimit:0});this.isAllDay=d.computed({read:function(){return this.from()===0&&this.to()===1440},write:function(){this.from(0);this.to(1440)},owner:this}).extend({rateLimit:0});this.fromHour=d.computed({read:function(){return Math.floor(this.from()/60)},write:function(a){this.from(a*60|0)},owner:this});this.toHour=d.computed({read:function(){return Math.ceil(this.to()/60)},write:function(a){this.to(a*60|0)},owner:this});this.fromTime=d.computed({read:function(){return i(this.from()|0)},write:function(a){this.from(k(a))},owner:this});this.toTime=d.computed({read:function(){return i(this.to()|0)},write:function(a){this.to(k(a))},owner:this})}function g(a){e(this);this.model.defProperties({sunday:new f,monday:new f,tuesday:new f,wednesday:new f,thursday:new f,friday:new f,saturday:new f,isAllTime:false},a)}b.exports=g;function h(a){return Math.floor(a/10)+""+a%10}function i(a){var b=j.duration(a,"minutes"),c=b.hours(),d=b.minutes(),e=b.seconds();return h(c)+":"+h(d)+":"+h(e)}var j=a("moment");function k(a){return j.duration(a).asMinutes()|0}},{"./Model":64,knockout:false,moment:false}],72:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model"),f=a("./BookingSummary");function g(){e(this);this.today=new f({concept:"more today",timeFormat:" [ending @] h:mma"});this.tomorrow=new f({concept:"tomorrow",timeFormat:" [starting @] h:mma"});this.nextWeek=new f({concept:"next week",timeFormat:null});this.items=d.pureComputed(function(){var a=[];a.push(this.today);a.push(this.tomorrow);a.push(this.nextWeek);return a},this)}b.exports=g},{"./BookingSummary":51,"./Model":64,knockout:false}],73:[function(a,b,c){"use strict";var d=a("knockout"),e=a("./Model");var f={None:0,Anonymous:1,Customer:2,Freelancer:4,Admin:8,LoggedUser:14,User:15,System:16};function g(a){e(this);this.model.defProperties({userID:0,email:"",firstName:"",lastName:"",secondLastName:"",businessName:"",alternativeEmail:"",phone:"",canReceiveSms:"",birthMonthDay:null,birthMonth:null,isFreelancer:false,isCustomer:false,isMember:false,isAdmin:false,onboardingStep:null,accountStatusID:0,createdDate:null,updatedDate:null},a);this.fullName=d.pureComputed(function(){var a=[this.firstName()];if(this.lastName())a.push(this.lastName());if(this.secondLastName())a.push(this.secondLastName);return a.join(" ")},this);this.birthDay=d.pureComputed(function(){if(this.birthMonthDay()&&this.birthMonth()){return this.birthMonth()+"/"+this.birthMonthDay()}else{return null}},this);this.userType=d.pureComputed({read:function(){var a=this.isCustomer(),b=this.isFreelancer(),c=this.isAdmin();var d=0;if(this.isAnonymous())d=d|f.Anonymous;if(a)d=d|f.Customer;if(b)d=d|f.Freelancer;if(c)d=d|f.Admin;return d},owner:this});this.isAnonymous=d.pureComputed(function(){return this.userID()<1},this);this.isUserType=function b(a){return this.userType()&a}.bind(this)}b.exports=g;g.UserType=f;g.newAnonymous=function h(){return new g({userID:0,email:"",firstName:"",onboardingStep:null})}},{"./Model":64,knockout:false}],74:[function(a,b,c){"use strict";var d=a("./Model");function e(a){d(this);this.model.defProperties({userID:0,jobTitleID:0,intro:null,statusID:0,cancellationPolicyID:0,instantBooking:false,createdDate:null,updatedDate:null},a);this.model.defID(["userID","jobTitleID"])}b.exports=e},{"./Model":64}],75:[function(a,b,c){var d=a("../models/Appointment");var e=a("./locations").locations;var f=a("./services").services;var g=a("knockout");var h=a("moment");var i=h().add(1,"days"),j=i.clone().hours(10).minutes(0).seconds(0),k=i.clone().hours(16).minutes(30).seconds(0);var l=[new d({id:1,startTime:j,endTime:k,summary:"Massage Therapist Booking",services:f,ptotalPrice:95,location:g.toJS(e[0]),preNotesToClient:"Looking forward to seeing the new color",preNotesToSelf:"Ask him about his new color",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:2,startTime:new Date(2014,11,1,13,0,0),endTime:new Date(2014,11,1,13,50,0),summary:"Massage Therapist Booking",services:[f[0]],ptotalPrice:95,location:g.toJS(e[1]),preNotesToClient:"Something else",preNotesToSelf:"Remember that thing",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:3,startTime:new Date(2014,11,1,16,0,0),endTime:new Date(2014,11,1,18,0,0),summary:"Massage Therapist Booking",services:[f[1]],ptotalPrice:95,location:g.toJS(e[2]),preNotesToClient:"",preNotesToSelf:"Ask him about the forgotten notes",client:{firstName:"Joshua",lastName:"Danielson"}})];c.appointments=l},{"../models/Appointment":49,"./locations":77,"./services":79,knockout:false,moment:false}],76:[function(a,b,c){var d=a("../models/Client");var e=[new d({id:1,firstName:"Joshua",lastName:"Danielson"}),new d({id:2,firstName:"Iago",lastName:"Lorenzo"}),new d({id:3,firstName:"Fernando",lastName:"Gago"}),new d({id:4,firstName:"Adam",lastName:"Finch"}),new d({id:5,firstName:"Alan",lastName:"Ferguson"}),new d({id:6,firstName:"Alex",lastName:"Pena"}),new d({id:7,firstName:"Alexis",lastName:"Peaca"}),new d({id:8,firstName:"Arthur",lastName:"Miller"})];c.clients=e},{"../models/Client":55}],77:[function(a,b,c){var d=a("../models/Location");var e=[new d({locationID:1,name:"ActviSpace",addressLine1:"3150 18th Street",postalCode:90001,isServiceRadius:true,serviceRadius:2}),new d({locationID:2,name:"Corey's Apt",addressLine1:"187 Bocana St.",postalCode:90002}),new d({locationID:3,name:"Josh'a Apt",addressLine1:"429 Corbett Ave",postalCode:90003})];c.locations=e},{"../models/Location":60}],78:[function(a,b,c){var d=a("../models/Message");var e=a("../utils/Time");var f=new Date,g=new Date,h=new Date,i=new Date;g.setDate(g.getDate()-1);h.setDate(h.getDate()-2);i.setDate(i.getDate()-16);var j=[new d({id:1,createdDate:new e(f,11,0,0),subject:"CONFIRM-Susan Dee",content:"Deep Tissue Massage",link:"/conversation/1",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({id:3,createdDate:new e(g,13,0,0),subject:'Do you do "Exotic Massage"?',content:"Hi, I wanted to know if you perform as par of your services...",link:"/conversation/3",actionIcon:"glyphicon glyphicon-share-alt",actionText:null,classNames:null}),new d({id:2,createdDate:new e(h,12,0,0),subject:"Josh Danielson",content:"Deep Tissue Massage",link:"/conversation/2",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({id:4,createdDate:new e(i,15,0,0),subject:"Inquiry",content:"Another question from another client.",link:"/conversation/4",actionIcon:"glyphicon glyphicon-share-alt",classNames:null})];c.messages=j},{"../models/Message":63,"../utils/Time":87}],79:[function(a,b,c){var d=a("../models/Service");var e=[new d({name:"Deep Tissue Massage",price:95,duration:120}),new d({name:"Tissue Massage",price:60,duration:60}),new d({name:"Special oils",price:95,isAddon:true}),new d({name:"Some service extra",price:40,duration:20,isAddon:true})];c.services=e},{"../models/Service":70}],80:[function(a,b,c){var d=a("../utils/Time");var e=a("moment");var f=new Date,g=new Date;g.setDate(g.getDate()+1);var h=e(f).format("YYYY-MM-DD"),i=e(g).format("YYYY-MM-DD");var j=[d(f,9,15),d(f,11,30),d(f,12,0),d(f,12,30),d(f,16,15),d(f,18,0),d(f,18,30),d(f,19,0),d(f,19,30),d(f,21,30),d(f,22,0)];var k=[d(g,8,0),d(g,10,30),d(g,11,0),d(g,11,30),d(g,12,0),d(g,12,30),d(g,13,0),d(g,13,30),d(g,14,45),d(g,16,0),d(g,16,30)];var l=[];var m={"default":l};m[h]=j;m[i]=k;c.timeSlots=m},{"../utils/Time":87,moment:false}],81:[function(a,b,c){"use strict";var d=a("moment");function e(a){a=a||{};this.ttl=d.duration(a.ttl).asMilliseconds();this.latest=a.latest||null;this.mustRevalidate=function b(){var a=this.latest&&new Date-this.latest||Number.POSITIVE_INFINITY;return a>this.ttl}}b.exports=e},{moment:false}],82:[function(a,b,c){Function.prototype._delayed=function d(a){var b=this;return function(){var c=this,d=arguments;setTimeout(function(){b.apply(c,d)},a)}}},{}],83:[function(a,b,c){Function.prototype._inherits=function d(a){this.prototype=Object.create(a.prototype,{constructor:{value:this,enumerable:false,writable:true,configurable:true}})}},{}],84:[function(a,b,c){"use strict";var d=a("knockout"),e=a("events").EventEmitter;function f(a){e.call(this);this.original=a;this.version=a.model.clone();this.areDifferent=d.pureComputed(function b(){return this.original.model.dataTimestamp()!==this.version.model.dataTimestamp()},this).extend({rateLimit:0});this.isNewer=d.pureComputed(function c(){return this.original.model.dataTimestamp()<this.version.model.dataTimestamp()},this).extend({rateLimit:0});this.isObsolete=d.pureComputed(function f(){return this.original.model.dataTimestamp()>this.version.model.dataTimestamp()},this).extend({rateLimit:0})}b.exports=f;f._inherits(e);f.prototype.pull=function h(a){a=a||{};var b=false,c=null;if(a.evenIfNewer||!this.isNewer()){c=g(this.version);this.version.model.updateWith(this.original,true);b=true}this.emit("pull",b,c);return b};f.prototype.push=function i(a){a=a||{};var b=false,c=null;if(a.evenIfObsolete||!this.isObsolete()){c=g(this.original);this.original.model.updateWith(this.version,true);b=true}this.emit("push",b,c);return b};f.prototype.sync=function j(){if(this.isNewer())return this.push();else if(this.isObsolete())return this.pull();else return false};function g(a){var b=a.model.toPlainObject(true),c=a.model.dataTimestamp();return function d(){a.model.updateWith(b);a.model.dataTimestamp(c)}}},{events:false,knockout:false}],85:[function(a,b,c){"use strict";var d=a("../utils/ModelVersion"),e=a("../utils/CacheControl"),f=a("knockout"),g=a("localforage"),h=a("events").EventEmitter;function i(a){h.call(this);a=a||{};var b=true;this.isLoading=f.observable(false);this.isSaving=f.observable(false);this.isSyncing=f.observable(false);this.isLocked=f.pureComputed(function(){return this.isLoading()||this.isSaving()},this);if(!a.data)throw new Error("RemoteModel data must be set on constructor and no changed later");this.data=a.data;this.cache=new e({ttl:a.ttl});this.localStorageName=a.localStorageName||null;this.getData=function i(){this.load();return this.data};this.newVersion=function j(){var a=new d(this.data);this.isLoading.subscribe(function(b){if(!b){a.pull({evenIfNewer:true})}});a.on("push",function(b,c){if(b){this.save().then(function(){a.pull({evenIfNewer:true})}).catch(function(){c()})}}.bind(this));return a};this.fetch=a.fetch||function k(){throw new Error("Not implemented")};this.push=a.push||function l(){throw new Error("Not implementd")};var c=function m(){return this.fetch().then(function(a){if(a){this.data.model.updateWith(a,true);if(this.localStorageName){g.setItem(this.localStorageName,a)}}else{throw new Error('Remote model did not returned data, response must be a "Not Found"')}if(this.isLoading()){this.emit("load",a)}else{this.emit("synced",a)}this.isLoading(false);this.isSyncing(false);this.cache.latest=new Date;return this.data}.bind(this)).catch(function(a){var b=this.isLoading();this.isLoading(false);this.isSyncing(false);var c={task:b?"load":"sync",error:a};if(h.listenerCount(this,"error")>0){this.emit("error",c)}else{console.error("RemoteModel Error",c)}return a}.bind(this))}.bind(this);this.load=function n(){if(this.cache.mustRevalidate()){if(b)this.isLoading(true);else this.isSyncing(true);var a=null;if(b&&this.localStorageName){a=g.getItem(this.localStorageName).then(function(a){if(a){this.data.model.updateWith(a,true);this.isLoading(false);this.isSyncing(false);c();return this.data}else{return c()}}.bind(this))}else{a=c()}if(b){b=false;return a}else{return Promise.resolve(this.data)}}else{return Promise.resolve(this.data)}};this.save=function o(){this.isSaving(true);var a=this.data.model.dataTimestamp();return this.push().then(function(b){this.data.model.updateWith(b,true);this.data.model.dataTimestamp(a);if(this.localStorageName){g.setItem(this.localStorageName,b)}this.emit("saved",b);this.isSaving(false);this.cache.latest=new Date;return this.data}.bind(this)).catch(function(a){this.isSaving(false);var b={task:"save",error:a};if(h.listenerCount(this,"error")>0){this.emit("error",b)}else{console.error("RemoteModel Error",b)}return a}.bind(this))};this.sync=function p(){this.load().catch(function(){})}}b.exports=i;i._inherits(h)},{"../utils/CacheControl":81,"../utils/ModelVersion":84,events:false,knockout:false,localforage:false}],86:[function(a,b,c){"use strict";var d=a("jquery");function e(a){return a&&a[0]&&a[0].toLowerCase&&a[0].toLowerCase()+a.slice(1)||a}function f(a){if(!a||typeof a!=="object")return a;var b=Array.isArray(a)?[]:{};for(var c in a){if(a.hasOwnProperty(c)){var d=e(c);b[d]=typeof a[c]==="object"?f(a[c]):a[c]}}return b}function g(a){var b=typeof a==="string"?a:a&&a.url;this.baseUrl=b;this.extraHeaders=null}g.prototype.get=function h(a,b){return this.request(a,"get",b)};g.prototype.put=function i(a,b){return this.request(a,"put",b)};g.prototype.post=function j(a,b){return this.request(a,"post",b)};g.prototype.delete=function k(a,b){return this.request(a,"delete",b)};g.prototype.putFile=function l(a,b){return this.request(a,"delete",b,"multipart/form-data")};g.prototype.request=function m(a,b,c,e){var g=this;var h=this.baseUrl+a;return Promise.resolve(d.ajax({url:h,cache:false,dataType:"json",method:b,headers:this.extraHeaders,data:c&&JSON.parse(JSON.stringify(c)),contentType:e||"application/x-www-form-urlencoded"})).then(f).catch(function(d){if(d.status===401){var f=m.bind(this,a,b,c,e);var h=g.onAuthorizationRequired(f);if(h){return Promise.resolve(h).catch(function(){return d})}}return d})};g.prototype.onAuthorizationRequired=function n(){return};b.exports=g},{}],87:[function(a,b,c){function d(a,b,c,d){if(!(a instanceof Date)){d=c;c=b;b=a;a=new Date}return new Date(a.getFullYear(),a.getMonth(),a.getDate(),b||0,c||0,d||0)}b.exports=d},{}],88:[function(a,b,c){"use strict";b.exports=function d(a){return function b(c){var d=a.getActivityControllerByRoute(c);var e=a.model.user();var f=e&&e.userType();if(d&&d.accessLevel){var g=d.accessLevel&f;if(!g){return{requiredLevel:d.accessLevel,currentType:f}}}return null}}},{}],89:[function(a,b,c){"use strict";var d=function e(a){return typeof a==="function"?a():a};c.defineCrudApiForRest=function f(a){var b=a.extendedObject,c=a.Model,e=a.modelName,f=a.modelListName,g=a.modelUrl,h=a.idPropertyName;b["get"+f]=function i(a){return this.rest.get(g,a).then(function(a){return a&&a.map(function(a){return new c(a)})})};b["get"+e]=function j(a){return this.rest.get(g+"/"+a).then(function(a){return a&&new c(a)})};b["post"+e]=function k(a){return this.rest.post(g,a).then(function(a){return new c(a)})};b["put"+e]=function l(a){return this.rest.put(g+"/"+d(a[h]),a).then(function(a){return new c(a)})};b["set"+e]=function m(a){var b=d(a[h]);if(b)return this["put"+e](a);else return this["post"+e](a)};b["del"+e]=function n(a){var b=a&&d(a[h])||a;if(b)return this.rest.delete(g+"/"+b,a).then(function(a){return a&&new c(a)});else throw new Error("Need an ID or an object with the ID property to delete")}}},{}],90:[function(a,b,c){"use strict";var d=a("jquery");c.i18n=null;function e(a){var b={};b.popover={update:function(b,e){var f=a.unwrap(e());var g=d.extend(true,{},f);g.content=a.unwrap(f.content);if(g.content){g.content=c.i18n&&c.i18n.t(g.content)||g.content;d(b).popover("destroy").popover(g);if(d(b).is(":focus"))d(b).popover("show")}else{d(b).popover("destroy")}}};return b}function f(a,b){var c,d=e(a);for(var f in d){if(d.hasOwnProperty&&!d.hasOwnProperty(f))continue;c=b?b+f[0].toUpperCase()+f.slice(1):f;a.bindingHandlers[c]=d[f]}}c.plugIn=f;c.createBindingHelpers=e},{}],91:[function(a,b,c){"use strict";var d=a("jquery");a("bootstrap");a("bootstrap-switch");c.plugIn=function e(a,b){a.bindingHandlers[b?b+"switch":"switch"]={init:function(b,c){d(b).bootstrapSwitch();d(b).on("switchChange.bootstrapSwitch",function(b,d){var e=c()||{};var f=!!a.unwrap(e.state),g=!!d;if(f!==g){if(a.isObservable(e.state)){if(a.isWriteableObservable(e.state)){e.state(g)}}else{e.state=g}}})},update:function(b,c){var e=c();var f=e||{};f=a.toJS(f);var g=d(b);Object.keys(f).forEach(function(a){g.bootstrapSwitch(a,f[a])})}}}},{}],92:[function(a,b,c){"use strict";var d=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],e=RegExp("["+d.join("\\")+"]","g");var f=function(a){return a.replace(e,"\\$&")};b.exports=f},{}],93:[function(a,b,c){"use strict";var d=["#","&","~","=",">","'",":",'"',"!",";",","];var e=[".","*","+","|","[","]","(",")","/","^","$"];var f=new RegExp("("+d.join("|")+"|\\"+e.join("|\\")+")","g");b.exports=function(a){return a.replace(f,"\\$1")}},{}],94:[function(a,b,c){"user strict";b.exports=function d(a){a=a||window.location.href;var b=[],c,d=a.indexOf("?");if(d>-1){var e=a.slice(d+1).split("&");for(var f=0;f<e.length;f++){c=e[f].split("=");b.push(c[0]);b[c[0]]=c[1]}}return b}},{}],95:[function(a,b,c){"use strict";var d=a("jquery");d.fn.multiline=function(a){this.text(a);this.html(this.html().replace(/\n/g,"<br/>"));return this}},{}],96:[function(a,b,c){"use strict";function d(a,b){var c={enumerable:true,configurable:true};c[a]=b;return c}function e(a,b,c){if(Object.defineProperty)return Object.defineProperty(a,b,d("get",c));if(Object.prototype.__defineGetter__)return a.__defineGetter__(b,c);throw new Error("browser does not support getters")}function f(a,b,c){if(Object.defineProperty)return Object.defineProperty(a,b,d("set",c));if(Object.prototype.__defineSetter__)return a.__defineSetter__(b,c);throw new Error("browser does not support setters")}b.exports={defineGetter:e,defineSetter:f}},{}],97:[function(a,b,c){"use strict";var d=a("jquery");var e=a("../escapeSelector");function f(a){this.idAttributeName=a.idAttributeName||"id";this.allowDuplicates=!!a.allowDuplicates||false;this.$root=null;d(function(){this.$root=d(a.root||"body")}.bind(this))}b.exports=f;f.prototype.find=function g(a,b){var c=d(b||this.$root);return c.find("["+this.idAttributeName+'="'+e(a)+'"]')};f.prototype.getActive=function h(){return this.$root.find("["+this.idAttributeName+"]:visible")};f.prototype.inject=function i(a,b){b=b.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/g,"");var c=d("<div/>",{html:b}),e=this.find(a,c);if(e.length===0){e=c.attr(this.idAttributeName,a)}if(!this.allowDuplicates){var f=this.find(a);if(f.length>0){f.replaceWith(e);e=f}}e.appendTo(this.$root)};f.prototype.switch=function j(a,b,c,d){if(!b.is(":visible")){c.emit(c.events.willOpen,b,d);b.show();c.emit(c.events.itemReady,b,d);c.emit(c.events.opened,b,d)}else{c.emit(c.events.itemReady,b,d)}if(a.is(":visible")){c.emit(c.events.willClose,a,d);a.find(":focus").blur();a.hide();c.emit(c.events.closed,a,d)}};f.prototype.init=function k(){this.getActive().hide()}},{"../escapeSelector":93}],98:[function(a,b,c){"use strict";var d=a("./dependencies");function e(a){d.EventEmitter.call(this);this.$=a.jquery||d.jquery;this.$root=this.$(a.root);this.baseUrl=a.baseUrl||"";this.forceHashbang=a.forceHashbang||false;this.linkEvent=a.linkEvent||"click";this.parseUrl=(a.parseUrl||d.parseUrl).bind(this,this.baseUrl);this.absolutizeUrl=(a.absolutizeUrl||d.absolutizeUrl).bind(this,this.baseUrl);this.history=a.history||window.history;this.indexName=a.indexName||"index";this.items=a.domItemsManager;this.loader=typeof a.loader==="undefined"?d.loader:a.loader;if(this.loader)this.loader.baseUrl=this.baseUrl;this.events={willOpen:"shell-will-open",willClose:"shell-will-close",itemReady:"shell-item-ready",closed:"shell-closed",opened:"shell-opened"};this.accessControl=a.accessControl||d.accessControl;this.nonAccessName=a.nonAccessName||"index"}e.prototype=Object.create(d.EventEmitter.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});b.exports=e;e.prototype.go=function f(a,b){if(this.forceHashbang){if(!/^#!/.test(a)){a="#!"+a}}else{a=this.absolutizeUrl(a)}this.history.pushState(b,undefined,a);return this.replace(b)};e.prototype.goBack=function g(a,b){b=0-(b||1);if(b<0&&Math.abs(b)>=this.history.length){this.go(this.indexName)}else{this._pendingStateUpdate=a;this.history.go(b)}};e.prototype.getUpdatedState=function h(a){a=this._pendingStateUpdate||a||this.history.state||{};this._pendingStateUpdate=null;var b=/#!/.test(location.href)||this.forceHashbang;var c=(b?location.hash:location.pathname)+(location.search||"");a.route=this.parseUrl(c);return a};e.prototype.replace=function i(a){a=this.getUpdatedState(a);if(a.route.root===true){a.route=this.parseUrl(this.indexName)}var b=this.accessControl(a.route);if(b){return this.go(this.nonAccessName,b)}var c=this.items.find(a.route.name);var d=this;var e=null;if(c&&c.length){e=new Promise(function(b,e){try{var f=d.items.getActive();f=f.not(c);d.items.switch(f,c,d,a);b()}catch(g){e(g)}})}else{if(this.loader){e=this.loader.load(a.route).then(function(b){d.items.inject(a.route.name,b);if(d.items.find(a.route.name).length)return d.replace(a)})}else{var f=new Error("Page not found ("+a.route.name+")");console.warn("Shell Page not found, state:",a);e=Promise.reject(f);setTimeout(function(){this.goBack()}.bind(this),1)}}var g=this;e.catch(function(a){if(!(a instanceof Error))a=new Error(a);console.error("Shell, unexpected error.",a);g.emit("error",a);return a});return e};e.prototype.run=function j(){var a=this;this.$(window).on(this.history.popstateEvent||"popstate",function(b){var c=b.state||b.originalEvent&&b.originalEvent.state||a.history.state;a.replace(c)});this.$(document).on(this.linkEvent,"[href], [data-href]",function(b){var c=a.$(this),d=c.attr("href")||c.data("href");if(/^[a-z]+:/i.test(d)){return}else if(a.forceHashbang&&/^#([^!]|$)/.test(d)){b.preventDefault();return}b.preventDefault();setTimeout(function(){a.go(d)},1)});this.items.init();this.replace()}},{"./dependencies":100}],99:[function(a,b,c){"use strict";var d=a("./sanitizeUrl"),e=a("../escapeRegExp");function f(a,b){b=d(b);var c=new RegExp("^"+e(a),"i");if(c.test(b)){return b}return d(a+b)}b.exports=f},{"../escapeRegExp":92,"./sanitizeUrl":105}],100:[function(a,b,c){"use strict";b.exports={parseUrl:null,absolutizeUrl:null,jquery:null,loader:null,accessControl:function d(){return null},EventEmitter:null}},{}],101:[function(a,b,c){"use strict";var d=a("jquery"),e=a("./sanitizeUrl"),f=a("../getUrlQuery");var g=sessionStorage.getItem("hashbangHistory.store");if(!g){g={states:[]}}else{g=JSON.parse(g)}function h(a){var b=+f(a)._suid;if(isNaN(b))return null;else return b}function i(a,b){var c=f(a);c.push("_suid");c._suid=b;var d=[];for(var e=0;e<c.length;e++){d.push(c[e]+"="+encodeURIComponent(c[c[e]]))}d=d.join("&");if(d){var g=a.indexOf("?");if(g>-1)a=a.substr(0,g);a+="?"+d}return a}function j(){setTimeout(function(){sessionStorage.setItem("hashbangHistory.store",JSON.stringify(g))},1500)}function k(a){if(a){if(Object.keys(a).length>0){return a}return null}return a}function l(a){a=e(a||"");var b=a.indexOf("#");if(b>-1){a=a.substr(b+1)}a=a.replace(/^!/,"");return a}var m=null;var n={pushState:function p(a,b,c){c=l(c);a=k(a)||null;if(a!==null){g.states.push(a);var d=g.states.length-1;c=i(c,d);j()}m=c;location.hash="#!"+c},replaceState:function q(a,b,c){c=l(c);var d=h(c),e=d!==null;a=k(a)||null;if(a!==null||e){if(e){g.states[d]=a}else{g.states.push(a);d=g.states.length-1;c=i(c,d)}j()}m=c;location.hash="#!"+c},get state(){var a=h(location.hash);return a!==null?g.states[a]:null},get length(){return window.history.length},go:function r(a){window.history.go(a)},back:function s(){window.history.back()},forward:function t(){window.history.forward()}};var o=d(window);o.on("hashchange",function(a){var b=a.originalEvent.newURL;b=l(b);if(b===m)return;var c=h(b),e=null;if(c!==null)e=g.states[c];o.trigger(new d.Event("popstate",{state:e}),"hashbangHistory")});o.on("popstate",function(a,b){if(b==="hashbangHistory")return;a.preventDefault();a.stopImmediatePropagation()});b.exports=n},{"../getUrlQuery":94,"./sanitizeUrl":105}],102:[function(a,b,c){"use strict";var d=a("./dependencies"),e=a("./DomItemsManager"),f=a("./parseUrl"),g=a("./absolutizeUrl"),h=a("jquery"),i=a("./loader"),j=a("events").EventEmitter;h.extend(d,{parseUrl:f,absolutizeUrl:g,jquery:h,loader:i,EventEmitter:j});var k=a("./Shell");c.Shell=k;c.DomItemsManager=e},{"./DomItemsManager":97,"./Shell":98,"./absolutizeUrl":99,"./dependencies":100,"./loader":103,"./parseUrl":104,events:false}],103:[function(a,b,c){"use strict";var d=a("jquery");b.exports={baseUrl:"/",load:function e(a){return new Promise(function(c,e){console.log("Shell loading on demand",a.name,a);d.ajax({url:b.exports.baseUrl+a.name+".html",cache:false}).then(c,e)})}}},{}],104:[function(a,b,c){"use strict";var d=a("../getUrlQuery"),e=a("../escapeRegExp");function f(a,b){b=b||"";var c=b;b=b.replace(/^#!/,"").replace(/^#/,"");b=b.replace(/^\/|^\.\//,"");var f=d(b||"?");b=b.replace(/\?.*$/,"");var g=b.replace(new RegExp("^"+e(a),"i"),"");var h=/^\/?([^\/\.]+)[^\/]*(\/.*)*$/.exec(g);var i={root:true,name:null,segments:null,path:null,url:c,query:f};if(h){i.root=false;if(h[1]){i.name=h[1];if(h[2]){i.path=h[2];i.segments=h[2].replace(/^\//,"").split("/")}else{i.path="/";i.segments=[]}}}return i}b.exports=f},{"../escapeRegExp":92,"../getUrlQuery":94}],105:[function(a,b,c){"use strict";function d(a){return a.replace(/\.{2,}/g,"").replace(/\/{2,}/g,"/")}b.exports=d},{}],106:[function(a,b,c){"use strict";var d=a("localforage");c.plugIn=function(a){a.prototype.tryLogin=function b(){return d.getItem("credentials").then(function(a){if(a){return this.login(a.username,a.password)}else{throw new Error("No saved credentials")}}.bind(this))};a.prototype.login=function c(a,b){this.rest.extraHeaders=null;return this.rest.post("login",{username:a,password:b,returnProfile:true}).then(e(this,a,b))};a.prototype.logout=function f(){this.rest.extraHeaders=null;d.removeItem("credentials");d.removeItem("profile");this.rest.post("logout");return Promise.resolve()};a.prototype.signup=function g(a,b,c){this.rest.extraHeadres=null;return this.rest.post("signup?utm_source=app",{username:a,password:b,profileType:c,returnProfile:true}).then(e(this,a,b))}};function e(a,b,c){return function(e){a.rest.extraHeaders={alu:e.userID,alk:e.authKey};d.setItem("credentials",{userID:e.userID,username:b,password:c,authKey:e.authKey});d.setItem("profile",e.profile);a.user().model.updateWith(e.profile);return e}}},{localforage:false}],107:[function(a,b,c){"use strict";var d=a("../models/CalendarEvent"),e=a("../utils/apiHelper");c.plugIn=function(a){e.defineCrudApiForRest({extendedObject:a.prototype,Model:d,modelName:"CalendarEvent",modelListName:"CalendarEvents",modelUrl:"events",idPropertyName:"calendarEventID"})}},{"../models/CalendarEvent":52,"../utils/apiHelper":89}],108:[function(a,b,c){"use strict";var d=a("../models/Booking"),e=a("moment"),f=a("knockout");c.create=function g(a){var b={remote:{rest:a.rest,getBookings:function(b){return a.rest.get("bookings",b).then(function(a){return a&&a.map(function(a){return new d(a)})})}}};var c={};b.getBookingsByDate=function g(a){var d=e(a).format("YYYYMMDD");if(c.hasOwnProperty(d)){return Promise.resolve(c[d])}else{return b.remote.getBookings({start:a,end:e(a).add(1,"days").toDate()}).then(function(a){var b=f.observableArray(a);c[d]=b;return b})}};return b}},{"../models/Booking":50,knockout:false,moment:false}],109:[function(a,b,c){"use strict";var d=a("../models/CalendarEvent"),e=a("moment"),f=a("knockout");c.create=function g(a){var b={remote:{rest:a.rest,getCalendarEvents:function(b){return a.rest.get("events",b).then(function(a){return a&&a.map(function(a){return new d(a)})})}}};var c={};b.getEventsByDate=function g(a){var d=e(a).format("YYYYMMDD");if(c.hasOwnProperty(d)){return Promise.resolve(c[d])}else{return b.remote.getCalendarEvents({start:a,end:e(a).add(1,"days").toDate()}).then(function(a){var b=f.observableArray(a);c[d]=b;return b})}};return b}},{"../models/CalendarEvent":52,knockout:false,moment:false}],110:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../models/CalendarSyncing"),f=a("../utils/RemoteModel");c.create=function g(a){var b=new f({data:new e,ttl:{minutes:1},localStorageName:"calendarSyncing",fetch:function c(){return a.rest.get("calendar-syncing")},push:function g(){return a.rest.put("calendar-syncing",this.data.model.toPlainObject())}});b.isReseting=d.observable(false);b.resetExportUrl=function h(){b.isReseting(true);return a.rest.post("calendar-syncing/reset-export-url").then(function(a){b.data.model.updateWith(a);b.isReseting(false);return a})};return b}},{"../models/CalendarSyncing":54,"../utils/RemoteModel":85,knockout:false}],111:[function(a,b,c){"use strict";var d=a("../models/Address");var e=a("../utils/RemoteModel");c.create=function f(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"homeAddress",fetch:function b(){return a.rest.get("addresses/home")},push:function c(){return a.rest.put("addresses/home",this.data.model.toPlainObject())}})}},{"../models/Address":48,"../utils/RemoteModel":85}],112:[function(a,b,c){"use strict";var d=a("localforage"),e=a("../models/PricingType"),f=a("../models/JobTitle");c.create=function g(a){var b={},c={jobTitles:{},pricingTypes:null};function g(a){c.pricingTypes={};if(a){a.forEach(function(a){c.pricingTypes[a.pricingTypeID]=new e(a)})}return c.pricingTypes}b.getPricingTypes=function h(){if(c.pricingTypes){return Promise.resolve(c.pricingTypes)}else{return d.getItem("pricingTypes").then(function(b){if(b){return g(b)}else{return a.rest.get("pricing-types").then(function(a){d.setItem("pricingTypes",a);return g(a)})}})}};b.getPricingType=function i(a){return b.getPricingTypes().then(function(b){return b[a]||null})};b.getJobTitle=function j(b){if(!b)return Promise.reject("Needs an ID to get a Job Title");if(c.jobTitles[b]){return Promise.resolve(c.jobTitles[b])}else{return d.getItem("jobTitles/"+b).then(function(e){if(e){c.jobTitles[b]=new f(e);return c.jobTitles[b]}else{return a.rest.get("job-titles/"+b).then(function(a){d.setItem("jobTitles/"+b,a);c.jobTitles[b]=new f(a);return c.jobTitles[b]})}})}};return b}},{"../models/JobTitle":57,"../models/PricingType":67,localforage:false}],113:[function(a,b,c){var d=a("knockout"),e=a("jquery"),f=a("../models/Model"),g=a("../utils/Rest"),h=a("localforage");function i(){f(this);this.userProfile=a("./AppModel.userProfile").create(this);this.user=d.computed(function(){return this.userProfile.data},this);this.schedulingPreferences=a("./AppModel.schedulingPreferences").create(this);this.calendarSyncing=a("./AppModel.calendarSyncing").create(this);this.simplifiedWeeklySchedule=a("./AppModel.simplifiedWeeklySchedule").create(this);this.marketplaceProfile=a("./AppModel.marketplaceProfile").create(this);this.homeAddress=a("./AppModel.homeAddress").create(this);this.privacySettings=a("./AppModel.privacySettings").create(this);this.bookings=a("./AppModel.bookings").create(this);this.calendarEvents=a("./AppModel.calendarEvents").create(this);this.jobTitles=a("./AppModel.jobTitles").create(this);this.userJobProfile=a("./AppModel.userJobProfile").create(this)}a("./AppModel-account").plugIn(i);i.prototype.loadLocalCredentials=function j(){return new Promise(function(a){var b=function(b){console.warning("App Model Init err",b);a()};h.getItem("credentials").then(function(c){if(c&&c.userID&&c.username&&c.authKey){this.rest.extraHeaders={alu:c.userID,alk:c.authKey};this.userProfile.load().then(function(c){if(c){a()}else{this.tryLogin().then(a,b)
}}.bind(this),b)}else{a()}}.bind(this),b)}.bind(this))};i.prototype.init=function k(){h.config({name:"LoconomicsApp",version:.1,size:4980736,storeName:"keyvaluepairs",description:"Loconomics App",driver:h.LOCALSTORAGE});return h.getItem("config").then(function(a){a=a||{};if(a.siteUrl){e("html").attr("data-site-url",a.siteUrl)}else{a.siteUrl=e("html").attr("data-site-url")}this.rest=new g(a.siteUrl+"/api/v1/en-US/");this.rest.onAuthorizationRequired=function(a){this.tryLogin().then(function(){a()})}.bind(this);return this.loadLocalCredentials()}.bind(this))};i.prototype.getUpcomingBookings=function l(){return this.rest.get("upcoming-bookings")};i.prototype.getBooking=function m(a){return this.rest.get("get-booking",{bookingID:a})};b.exports=i;a("./AppModel-events").plugIn(i)},{"../models/Model":64,"../utils/Rest":86,"./AppModel-account":106,"./AppModel-events":107,"./AppModel.bookings":108,"./AppModel.calendarEvents":109,"./AppModel.calendarSyncing":110,"./AppModel.homeAddress":111,"./AppModel.jobTitles":112,"./AppModel.marketplaceProfile":114,"./AppModel.privacySettings":115,"./AppModel.schedulingPreferences":116,"./AppModel.simplifiedWeeklySchedule":117,"./AppModel.userJobProfile":118,"./AppModel.userProfile":119,knockout:false,localforage:false}],114:[function(a,b,c){"use strict";var d=a("../models/MarketplaceProfile");var e=a("../utils/RemoteModel");c.create=function f(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"marketplaceProfile",fetch:function b(){return a.rest.get("marketplace-profile")},push:function c(){return a.rest.put("marketplace-profile",this.data.model.toPlainObject())}})}},{"../models/MarketplaceProfile":62,"../utils/RemoteModel":85}],115:[function(a,b,c){"use strict";var d=a("../models/PrivacySettings");var e=a("../utils/RemoteModel");c.create=function f(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"privacySettings",fetch:function b(){return a.rest.get("privacy-settings")},push:function c(){return a.rest.put("privacy-settings",this.data.model.toPlainObject())}})}},{"../models/PrivacySettings":68,"../utils/RemoteModel":85}],116:[function(a,b,c){"use strict";var d=a("../models/SchedulingPreferences");var e=a("../utils/RemoteModel");c.create=function f(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"schedulingPreferences",fetch:function b(){return a.rest.get("scheduling-preferences")},push:function c(){return a.rest.put("scheduling-preferences",this.data.model.toPlainObject())}})}},{"../models/SchedulingPreferences":69,"../utils/RemoteModel":85}],117:[function(a,b,c){"use strict";var d=a("../models/SimplifiedWeeklySchedule"),e=a("../utils/RemoteModel"),f=a("moment");var g=15;var h=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];c.create=function m(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"weeklySchedule",fetch:function b(){return a.rest.get("availability/weekly-schedule").then(i)},push:function c(){var b={"all-time":false,"json-data":{}};if(this.data.isAllTime()===true){b["all-time"]=true}else{b["json-data"]=JSON.stringify(j(this.data.model.toPlainObject(true)))}return a.rest.put("availability/weekly-schedule",b).then(i)}})};function i(a){var b={};if(a.defaultStatus!=="unavailable"||a.status!=="available"){throw{name:"input-format",message:"Weekly schedule, given statuses not supported, status: "+a.status+", defaultStatus: "+a.defaultStatus}}var c=(a.slotSize||g)|0;Object.keys(a.slots).forEach(function(d){if(h.indexOf(d)===-1){return}var e=a.slots[d];var g=null,i=null,j=null;e.some(function(a){var b=f.duration(a).asMinutes()|0;if(g===null){g=b;j=b}else{if(j+c===b){i=b;j=b}else{return true}}});if(g!==null){var k={from:g,to:0};b[d]=k;if(i!==null){k.to=i+c}else{k.to=g+c}}});return b}function j(a){var b=g;var c={status:"available",defaultAvailability:"unavailable",slots:{},slotSize:b};Object.keys(a).forEach(function(d){if(h.indexOf(d)===-1){return}var e=a[d];var f=e.from|0,g=e.to|0;c.slots[d]=[];if(g>f){var i=f;while(i<g){c.slots[d].push(l(i));i+=b}}});return c}function k(a){return Math.floor(a/10)+""+a%10}function l(a){var b=f.duration(a,"minutes"),c=b.hours(),d=b.minutes(),e=b.seconds();return k(c)+":"+k(d)+":"+k(e)}},{"../models/SimplifiedWeeklySchedule":71,"../utils/RemoteModel":85,moment:false}],118:[function(a,b,c){"use strict";var d=a("../models/UserJobTitle"),e=a("../utils/CacheControl"),f=a("localforage");c.create=function g(a){var b={},c={minutes:1},g={userJobProfile:{cache:new e({ttl:c}),list:null},userJobTitles:{}};function h(a){g.userJobProfile.list=[];g.userJobTitles={};if(a){a.forEach(function(a){var b=new d(a);g.userJobProfile.list.push(b);j(a)})}g.userJobProfile.cache.latest=new Date;return g.userJobProfile.list}function i(){return f.getItem("userJobProfile").then(function(a){if(a){return h(a)}throw{name:"NotFoundLocal",message:"Not found on local storage"}})}function j(a){var b=g.userJobTitles[a.jobTitleID]||{};if(b.model){b.model.model.updateWith(a)}else{b.model=new d(a)}if(b.cache){b.cache.latest=new Date}else{b.cache=new e({ttl:c})}return b.model}function k(){var a=g.userJobProfile.list.map(function(a){return a.model.toPlainObject()});f.setItem("userJobProfile",a)}var l=function(){return a.rest.get("user-job-profile").then(function(a){f.setItem("userJobProfile",a);return h(a)})};b.getUserJobProfile=function(){if(g.userJobProfile.cache.mustRevalidate()){return l()}else{if(g.userJobProfile.list)return Promise.resolve(g.userJobProfile.list);else return i().catch(l)}};var m=function(b){return a.rest.get("user-job-profile/"+b).then(function(a){var b=j(a);k();return b})};b.getUserJobTitle=function(a){if(!a)return Promise.reject("Job Title ID required");if(!g.userJobTitles[a]||g.userJobTitles[a].cache.mustRevalidate()){return m(a)}else{if(g.userJobTitles[a]&&g.userJobTitles[a].model){return Promise.resolve(g.userJobTitles[a].model)}else{return i().then(function(){return g.userJobTitles[a].model}).catch(m.bind(null,a))}}};return b}},{"../models/UserJobTitle":74,"../utils/CacheControl":81,localforage:false}],119:[function(a,b,c){"use strict";var d=a("../models/User");var e=a("../utils/RemoteModel");c.create=function f(a){return new e({data:d.newAnonymous(),ttl:{minutes:1},localStorageName:"profile",fetch:function b(){return a.rest.get("profile")},push:function c(){return a.rest.put("profile",this.data.model.toPlainObject())}})}},{"../models/User":73,"../utils/RemoteModel":85}],120:[function(a,b,c){"use strict";var d=a("knockout");function e(){this.username=d.observable("");this.password=d.observable("");var a=/^[-0-9A-Za-z!#$%&'*+/=?^_`{|}~.]+@[-0-9A-Za-z!#$%&'*+/=?^_`{|}~.]+$/;this.username.error=d.observable("");this.username.subscribe(function(b){if(b){if(a.test(b)){this.username.error("")}else{this.username.error("Is not a valid email")}}else{this.username.error("Required")}}.bind(this));this.password.error=d.observable("");this.password.subscribe(function(a){var b="";if(!a)b="Required";this.password.error(b)}.bind(this))}b.exports=e},{knockout:false}],121:[function(a,b,c){var d=a("../models/Model");function e(a){d(this);this.model.defProperties({link:"",icon:"",text:"",isTitle:false,isModal:false,isShell:false,isMenu:false},a)}b.exports=e;e.prototype.getHref=function f(){return this.isMenu()||this.isModal()||this.isShell()?"#":this.link()};e.prototype.getModalTarget=function g(){return this.isMenu()||!this.isModal()||this.isShell()?"":this.link()};e.prototype.getShellCommand=function h(){return this.isMenu()||!this.isShell()?"":this.link()};e.prototype.getMenuID=function i(){return!this.isMenu()?"":this.link()};e.prototype.getMenuLink=function j(){return!this.isMenu()?"":"#"+this.link()};e.goHome=new e({link:"/",icon:"glyphicon glyphicon-home"});e.goBack=new e({link:"goBack",icon:"glyphicon glyphicon-arrow-left",isShell:true});e.newItem=new e({link:"#newItem",icon:"glyphicon glyphicon-plus",isModal:true});e.menuIn=new e({link:"menuIn",icon:"menu",isMenu:true});e.menuOut=new e({link:"menuOut",icon:"menu",isMenu:true});e.menuNewItem=new e({link:"menuNewItem",icon:"glyphicon glyphicon-plus",isMenu:true});e.goHelpIndex=new e({link:"#helpIndex",text:"help",isModal:true});e.goLogin=new e({link:"/login",text:"log-in"});e.goLogout=new e({link:"/logout",text:"log-out"});e.goSignup=new e({link:"/signup",text:"sign-up"})},{"../models/Model":64}],122:[function(a,b,c){var d=a("../models/Model");function e(a){d(this);this.model.defProperties({title:"",leftAction:null,rightAction:null},a)}b.exports=e},{"../models/Model":64}],123:[function(a,b,c){"use strict";var d=a("knockout");function e(a){this.userJobProfile=d.observableArray([]);this.isFirstTime=d.observable(true);this.isLoading=d.observable(false);this.isSyncing=d.observable(false);this.thereIsError=d.observable(false);var b={};function c(c){return a.model.jobTitles.getJobTitle(c).then(function(a){b[c]=a})}function e(a){a.jobTitle=d.computed(function(){return b[this.jobTitleID()]},a)}var f=function g(b){a.modals.showError({title:"An error happening when loading your job profile.",error:b&&b.error||b});this.isLoading(false);this.isSyncing(false);this.thereIsError(true)}.bind(this);this.sync=function h(){var b=this.isFirstTime();this.isFirstTime(false);if(b){this.isLoading(true)}else{this.isSyncing(true)}a.model.userJobProfile.getUserJobProfile().then(function(a){Promise.all(a.map(function(a){return c(a.jobTitleID())})).then(function(){a.forEach(e);this.userJobProfile(a);this.isLoading(false);this.isSyncing(false);this.thereIsError(false)}.bind(this)).catch(f)}.bind(this)).catch(f)}.bind(this)}b.exports=e},{knockout:false}]},{},[41]);