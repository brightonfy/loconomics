!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("__browserify_process"),d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};(function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(){}function h(){return function(){c.nextTick(l)}}function i(){var a=0,b=new O(l),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function j(){var a=new MessageChannel;return a.port1.onmessage=l,function(){a.port2.postMessage(0)}}function k(){return function(){setTimeout(l,1)}}function l(){for(var a=0;L>a;a+=2){var b=Q[a],c=Q[a+1];b(c),Q[a]=void 0,Q[a+1]=void 0}L=0}function m(){}function n(){return new TypeError("You cannot resolve a promise with itself")}function o(){return new TypeError("A promises callback cannot return that same promise.")}function p(a){try{return a.then}catch(b){return U.error=b,U}}function q(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function r(a,b,c){M(function(a){var d=!1,e=q(c,b,function(c){d||(d=!0,b!==c?u(a,c):w(a,c))},function(b){d||(d=!0,x(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,x(a,e))},a)}function s(a,b){b._state===S?w(a,b._result):a._state===T?x(a,b._result):y(b,void 0,function(b){u(a,b)},function(b){x(a,b)})}function t(a,b){if(b.constructor===a.constructor)s(a,b);else{var c=p(b);c===U?x(a,U.error):void 0===c?w(a,b):e(c)?r(a,b,c):w(a,b)}}function u(b,c){b===c?x(b,n()):a(c)?t(b,c):w(b,c)}function v(a){a._onerror&&a._onerror(a._result),z(a)}function w(a,b){a._state===R&&(a._result=b,a._state=S,0===a._subscribers.length||M(z,a))}function x(a,b){a._state===R&&(a._state=T,a._result=b,M(v,a))}function y(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+S]=c,e[f+T]=d,0===f&&a._state&&M(z,a)}function z(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function A(){this.error=null}function B(a,b){try{return a(b)}catch(c){return V.error=c,V}}function C(a,b,c,d){var f,g,h,i,j=e(c);if(j){if(f=B(c,d),f===V?(i=!0,g=f.error,f=null):h=!0,b===f)return void x(b,o())}else f=d,h=!0;b._state!==R||(j&&h?u(b,f):i?x(b,g):a===S?w(b,f):a===T&&x(b,f))}function D(a,b){try{b(function(b){u(a,b)},function(b){x(a,b)})}catch(c){x(a,c)}}function E(a,b,c,d){this._instanceConstructor=a,this.promise=new a(m,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,this._validationError())}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(a){this._id=_++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==a&&(e(a)||F(),this instanceof H||G(),D(this,a))}var I;I=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var J,K=I,L=(Date.now||function(){return(new Date).getTime()},Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return g.prototype=a,new g},0),M=function(a,b){Q[L]=a,Q[L+1]=b,L+=2,2===L&&J()},N="undefined"!=typeof window?window:{},O=N.MutationObserver||N.WebKitMutationObserver,P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3);J="undefined"!=typeof c&&"[object process]"==={}.toString.call(c)?h():O?i():P?j():k();var R=void 0,S=1,T=2,U=new A,V=new A;E.prototype._validateInput=function(a){return K(a)},E.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},E.prototype._init=function(){this._result=new Array(this.length)};var W=E;E.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===R&&a>d;d++)this._eachEntry(c[d],d)},E.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;f(a)?a.constructor===c&&a._state!==R?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(S,b,a))},E.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===R&&(this._remaining--,this._abortOnReject&&a===T?x(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&w(d,this._result)},E.prototype._makeResult=function(a,b,c){return c},E.prototype._willSettleAt=function(a,b){var c=this;y(a,void 0,function(a){c._settledAt(S,b,a)},function(a){c._settledAt(T,b,a)})};var X=function(a,b){return new W(this,a,!0,b).promise},Y=function(a,b){function c(a){u(f,a)}function d(a){x(f,a)}var e=this,f=new e(m,b);if(!K(a))return x(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===R&&g>h;h++)y(e.resolve(a[h]),void 0,c,d);return f},Z=function(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(m,b);return u(d,a),d},$=function(a,b){var c=this,d=new c(m,b);return x(d,a),d},_=0,ab=H;H.all=X,H.race=Y,H.resolve=Z,H.reject=$,H.prototype={constructor:H,then:function(a,b){var c=this,d=c._state;if(d===S&&!a||d===T&&!b)return this;var e=new this.constructor(m),f=c._result;if(d){var g=arguments[d-1];M(function(){C(d,e,g,f)})}else y(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var bb=function(){var a;a="undefined"!=typeof d?d:"undefined"!=typeof window&&window.document?window:self;var b="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),e(b)}();b||(a.Promise=ab)},cb={Promise:ab,polyfill:bb};"function"==typeof define&&define.amd?define(function(){return cb}):"undefined"!=typeof b&&b.exports?b.exports=cb:"undefined"!=typeof this&&(this.ES6Promise=cb)}).call(this)},{__browserify_process:45}],2:[function(a,b){(function(){function a(a){this._value=a}function c(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function d(a,b,c){var d;return d=b.indexOf("$")>-1?f(a,b,c):b.indexOf("%")>-1?g(a,b,c):b.indexOf(":")>-1?h(a,b):j(a._value,b,c)}function e(a,b){var c,d,e,f,g,h=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=i(b);else if(b===r)a._value=0;else{for("."!==p[q].delimiters.decimal&&(b=b.replace(/\./g,"").replace(p[q].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+p[q].abbreviations.thousand+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+p[q].abbreviations.million+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+p[q].abbreviations.billion+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+p[q].abbreviations.trillion+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(h.match(c)?Math.pow(10,3):1)*(h.match(d)?Math.pow(10,6):1)*(h.match(e)?Math.pow(10,9):1)*(h.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function f(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),i="";return b.indexOf(" $")>-1?(i=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(i=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=j(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,p[q].currency.symbol+i),e=e.join("")):e=p[q].currency.symbol+i+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,i+p[q].currency.symbol),e=e.join("")):e=e+i+p[q].currency.symbol,e}function g(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=j(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function h(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function i(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function j(a,b,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",o=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==r)return r;if(b.indexOf("(")>-1?(k=!0,b=b.slice(1,-1)):b.indexOf("+")>-1&&(l=!0,b=b.replace(/\+/g,"")),b.indexOf("a")>-1&&(o=b.indexOf("aK")>=0,s=b.indexOf("aM")>=0,t=b.indexOf("aB")>=0,u=b.indexOf("aT")>=0,v=o||s||t||u,b.indexOf(" a")>-1?(n=" ",b=b.replace(" a","")):b=b.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=p[q].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=p[q].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=p[q].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||o)&&(n+=p[q].abbreviations.thousand,a/=Math.pow(10,3))),b.indexOf("b")>-1)for(b.indexOf(" b")>-1?(w=" ",b=b.replace(" b","")):b=b.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return b.indexOf("o")>-1&&(b.indexOf(" o")>-1?(x=" ",b=b.replace(" o","")):b=b.replace("o",""),x+=p[q].ordinal(a)),b.indexOf("[.]")>-1&&(m=!0,b=b.replace("[.]",".")),h=a.toString().split(".")[0],i=b.split(".")[1],j=b.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=c(a,i[0].length+i[1].length,d,i[1].length)):A=c(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?p[q].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=c(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[q].delimiters.thousands)),0===b.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function k(a,b){p[a]=b}function l(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function m(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=l(a),d=l(b);return c>d?c:d},-1/0)}var n,o="1.5.3",p={},q="en",r=null,s="0,0",t="undefined"!=typeof b&&b.exports;n=function(b){return n.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=n.fn.unformat(b)),new a(Number(b))},n.version=o,n.isNumeral=function(b){return b instanceof a},n.language=function(a,b){if(!a)return q;if(a&&!b){if(!p[a])throw new Error("Unknown language : "+a);q=a}return(b||!p[a])&&k(a,b),n},n.languageData=function(a){if(!a)return p[q];if(!p[a])throw new Error("Unknown language : "+a);return p[a]},n.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),n.zeroFormat=function(a){r="string"==typeof a?a:null},n.defaultFormat=function(a){s="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),n.fn=a.prototype={clone:function(){return n(this)},format:function(a,b){return d(this,a?a:s,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:e(this,a?a:s)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=m.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=m.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=m(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=m(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(n(this._value).subtract(a).value())}},t&&(b.exports=n),"undefined"==typeof ender&&(this.numeral=n),"function"==typeof define&&define.amd&&define([],function(){return n})}).call(this)},{}],3:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.$appointmentView=a.find("#calendarAppointmentView"),this.$chooseNew=e("#calendarChooseNew"),this.app=b,this.requestInfo=null,this.navAction=h.newCalendarItem,this.initAppointment()}var e=a("jquery"),f=a("moment"),g=a("knockout"),h=a("../viewmodels/NavAction");a("../components/DatePicker");var i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){if(this.requestInfo=a||{},null!==a){var b=this.appointmentsDataView.currentAppointment();if("textEditor"===a.request&&b)b[a.field](a.text);else if(a.selectClient===!0&&b)b.client(a.selectedClient);else if("undefined"!=typeof a.selectedDatetime&&b){b.startTime(a.selectedDatetime);var c=60;b.endTime(f(b.startTime()).add(c,"minutes").toDate())}else a.selectServices===!0&&b?b.services(a.selectedServices):a.selectLocation===!0&&b&&b.location(a.selectedLocation)}this.showAppointment(a&&a.appointmentId)};var j=a("../models/Appointment");d.prototype.showAppointment=function(a){a||0===a&&(this.appointmentsDataView.newAppointment(new j),this.appointmentsDataView.editMode(!0))},d.prototype.initAppointment=function(){if(!this.__initedAppointment){this.__initedAppointment=!0;var b=this.app,c=a("../testdata/calendarAppointments").appointments,d={appointments:g.observableArray(c),currentIndex:g.observable(0),editMode:g.observable(!1),newAppointment:g.observable(null)};this.appointmentsDataView=d,d.isNew=g.computed(function(){return null!==this.newAppointment()},d),d.currentAppointment=g.computed({read:function(){return this.isNew()?this.newAppointment():this.appointments()[this.currentIndex()%this.appointments().length]},write:function(a){var b=this.currentIndex()%this.appointments().length;this.appointments()[b]=a,this.appointments.valueHasMutated()},owner:d}),d.originalEditedAppointment={},d.goPrevious=function(){this.editMode()||this.currentIndex(0===this.currentIndex()?this.appointments().length-1:(this.currentIndex()-1)%this.appointments().length)},d.goNext=function(){this.editMode()||this.currentIndex((this.currentIndex()+1)%this.appointments().length)},d.edit=function(){this.editMode(!0)}.bind(d),d.cancel=function(){this.isNew()?this.newAppointment(null):this.currentAppointment(new j(this.originalEditedAppointment)),this.editMode(!1)}.bind(d),d.save=function(){if(this.isNew()){var a=this.newAppointment();a.summary("Massage Therapist Booking"),a.id(4),this.appointments.push(a),this.newAppointment(null),this.currentIndex(this.appointments().length-1),b.showActivity("bookingConfirmation",{booking:a})}this.editMode(!1)}.bind(d),d.editMode.subscribe(function(a){this.$activity.toggleClass("in-edit",a),this.$appointmentView.find(".AppointmentCard").toggleClass("in-edit",a),a?(d.originalEditedAppointment=g.toJS(d.currentAppointment()),b.navAction(null)):b.navAction(this.navAction)}.bind(this)),d.pickDateTime=function(){b.popActivity("datetimePicker",{selectedDatetime:null})},d.pickClient=function(){b.popActivity("clients",{selectClient:!0,selectedClient:null})},d.pickService=function(){b.popActivity("services",{selectServices:!0,selectedServices:d.currentAppointment().services()})},d.changePrice=function(){},d.pickLocation=function(){b.popActivity("locations",{selectLocation:!0,selectedLocation:d.currentAppointment().location()})};var e={preNotesToClient:"Notes to client",postNotesToClient:"Notes to client (afterwards)",preNotesToSelf:"Notes to self",postNotesToSelf:"Booking summary"};d.editTextField=function(a){b.popActivity("textEditor",{request:"textEditor",field:a,header:e[a],text:d.currentAppointment()[a]()})}.bind(this),d.returnToCalendar=function(){if(this.requestInfo){var a=this.appointmentsDataView.currentDate();a&&(this.requestInfo.date=a),this.app.goBack(this.requestInfo),this.requestInfo=null}}.bind(this),d.currentDate=g.computed(function(){var a=this.currentAppointment(),b=null;return a&&a.startTime()&&(b=f(a.startTime()).hours(0).minutes(0).seconds(0).toDate()),b},d),g.applyBindings(d,this.$activity.get(0))}}},{"../components/DatePicker":17,"../models/Appointment":18,"../testdata/calendarAppointments":31,"../viewmodels/NavAction":44,knockout:!1,moment:!1}],4:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0))}function e(){this.booking=f.observable(null)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){a&&a.booking&&this.dataView.booking(a.booking)}},{knockout:!1}],5:[function(a,b,c){"use strict";function d(b,c){this.$activity=b,this.$datepicker=b.find("#calendarDatePicker"),this.$dailyView=b.find("#calendarDailyView"),this.$dateHeader=b.find("#calendarDateHeader"),this.$dateTitle=this.$dateHeader.children(".CalendarDateHeader-date"),this.$chooseNew=f("#calendarChooseNew"),this.app=c,this.$datepicker.show().datepicker(),this.dataView=new e,h.applyBindings(this.dataView,b.get(0)),this.dataView.slotsData(a("../testdata/calendarSlots").calendar),this.requestInfo=null,this.dataView.currentDate.subscribe(function(a){var b=g(a);this.$datepicker.removeClass("is-visible"),this.$datepicker.datepicker("getValue").toISOString()!==b.toISOString()&&this.$datepicker.datepicker("setValue",a,!0)}.bind(this)),this.$dailyView.on("swipeleft swiperight",function(a){a.preventDefault();var b="swipeleft"===a.type?"next":"prev";f(document).trigger("touchend"),this.$datepicker.datepicker("moveValue",b,"date")}.bind(this)),this.$dateHeader.on("tap",".CalendarDateHeader-switch",function(a){switch(a.currentTarget.getAttribute("href")){case"#prev":this.$datepicker.datepicker("moveValue","prev","date");break;case"#next":this.$datepicker.datepicker("moveValue","next","date");break;default:return}a.preventDefault(),a.stopPropagation()}.bind(this)),this.$dateTitle.on("tap",function(a){this.$datepicker.toggleClass("is-visible"),a.preventDefault(),a.stopPropagation()}.bind(this)),this.$datepicker.on("changeDate",function(a){"days"===a.viewMode&&this.dataView.currentDate(a.date)}.bind(this)),this.dataView.currentDate(this.$datepicker.datepicker("getValue")),this.navAction=i.newCalendarItem}function e(){this.slots=h.observableArray([]),this.slotsData=h.observable({}),this.currentDate=h.observable(new Date),this.currentDate.subscribe(function(a){var b=g(a),c=b.format("YYYY-MM-DD"),d=this.slotsData();this.slots(d.hasOwnProperty(c)?d[c]:d["default"])}.bind(this))}var f=a("jquery"),g=a("moment");a("../components/DatePicker");var h=a("knockout"),i=(a("../models/CalendarSlot"),a("../viewmodels/NavAction")),j=null;c.init=function(a,b){return null===j&&(j=new d(a,b)),j},d.prototype.show=function(a){if(a&&a.date instanceof Date&&this.dataView.currentDate(a.date),a&&a.route)switch(a.route.segments[0]){case"appointment":this.$chooseNew.modal("hide");var b=a.route.segments[1];this.showAppointment(b||0);break;case"new":switch(a.route.segments[1]){case"booking":this.$chooseNew.modal("hide"),this.showAppointment(0);break;case"event":break;default:this.$chooseNew.modal("show")}}},d.prototype.showAppointment=function(a){this.app.showActivity("appointment",{date:this.dataView.currentDate(),appointmentId:a})}},{"../components/DatePicker":17,"../models/CalendarSlot":20,"../testdata/calendarSlots":32,"../viewmodels/NavAction":44,knockout:!1,moment:!1}],6:[function(a,b,c){"use strict";function d(b,c){this.$activity=b,this.app=c,this.$index=b.find("#clientsIndex"),this.$listView=b.find("#clientsListView"),this.dataView=new e,f.applyBindings(this.dataView,b.get(0)),this.dataView.clients(a("../testdata/clients").clients),this.dataView.isSelectionMode.subscribe(function(a){this.dataView.headerText(a?"Select a client":"Clients")}.bind(this)),this.requestInfo=null,this.dataView.isSelectionMode.subscribe(function(a){this.requestInfo&&this.requestInfo.selectClient===!0&&a===!1&&(this.requestInfo.selectedClient=this.dataView.selectedClient(),this.app.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(){this.headerText=f.observable("Clients"),this.isSelectionMode=f.observable(!1),this.clients=f.observableArray([]),this.searchText=f.observable(""),this.getFilteredList=function(){var a=(this.searchText()||"").toLowerCase();return this.clients().filter(function(b){var c=b&&b.fullName()&&b.fullName()||"";return c=c.toLowerCase(),c.indexOf(a)>-1})},this.filteredClients=f.computed(function(){return this.getFilteredList()},this),this.groupedClients=f.computed(function(){var a=this.filteredClients().sort(function(a,b){return a.firstName()>b.firstName()}),b=[],c=null,d=null;return a.forEach(function(a){var e=(a.firstName()[0]||"").toUpperCase();e!==d?(c={letter:e,clients:[a]},b.push(c),d=e):c.clients.push(a)}),b},this),this.selectedClient=f.observable(null),this.selectClient=function(a){this.selectedClient(a),this.isSelectionMode(!1)}.bind(this)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){this.dataView.searchText(""),a=a||{},this.requestInfo=a,a.selectClient===!0&&this.dataView.isSelectionMode(!0)}},{"../testdata/clients":33,knockout:!1}],7:[function(a,b,c){"use strict";function d(b,c){this.app=c,this.$activity=b,this.$datePicker=b.find("#datetimePickerDatePicker"),this.$timePicker=b.find("#datetimePickerTimePicker"),this.$datePicker.show().datepicker();var d=this.dataView=new e;d.headerText="Select a start time",g.applyBindings(d,b.get(0)),this.$datePicker.on("changeDate",function(a){"days"===a.viewMode&&d.selectedDate(a.date)}.bind(this)),d.slotsData=a("../testdata/timeSlots").timeSlots,d.selectedDate.subscribe(function(a){this.bindDateData(a)}.bind(this)),this.bindDateData(new Date),this.requestInfo=null,this.dataView.selectedDatetime.subscribe(function(){this.requestInfo&&(this.requestInfo.selectedDatetime=this.dataView.selectedDatetime(),this.app.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(){this.headerText=g.observable("Select a time"),this.selectedDate=g.observable(new Date),this.slotsData={},this.slots=g.observableArray([]),this.groupedSlots=g.computed(function(){var a=this.slots()&&this.slots()[0]||new Date,b=[{group:"Morning",slots:[],starts:new h(a,0,0),ends:new h(a,12,0)},{group:"Afternoon",slots:[],starts:new h(a,12,0),ends:new h(a,17,0)},{group:"Evening",slots:[],starts:new h(a,17,0),ends:new h(a,24,0)}],c=this.slots().sort();return c.forEach(function(a){b.forEach(function(b){a>=b.starts&&a<b.ends&&b.slots.push(a)})}),b},this),this.selectedDatetime=g.observable(null),this.selectDatetime=function(a){this.selectedDatetime(a)}.bind(this)}var f=(a("jquery"),a("moment")),g=a("knockout"),h=a("../utils/Time");a("../components/DatePicker");var i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){a=a||{},this.requestInfo=a},d.prototype.bindDateData=function(a){var b=f(a).format("YYYY-MM-DD"),c=this.dataView.slotsData;this.dataView.slots(c.hasOwnProperty(b)?c[b]:c["default"])}},{"../components/DatePicker":17,"../testdata/timeSlots":37,"../utils/Time":41,knockout:!1,moment:!1}],8:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.$nextBooking=a.find("#homeNextBooking"),this.$upcomingBookings=a.find("#homeUpcomingBookings"),this.$inbox=a.find("#homeInbox"),this.$performance=a.find("#homePerformance"),this.$getMore=a.find("#homeGetMore"),this.dataView=new e,g.applyBindings(this.dataView,a.get(0)),f(this.dataView),this.requestInfo=null,this.navAction=h.newItem}function e(){this.upcomingBookings=new j,this.nextBooking=g.observable(null),this.inbox=new k({topNumber:4}),this.performance=new l,this.getMore=new m}function f(b){b.nextBooking(a("../testdata/calendarAppointments").appointments[0]),b.upcomingBookings.today.quantity(8),b.upcomingBookings.today.time(new n(5,15)),b.upcomingBookings.tomorrow.quantity(14),b.upcomingBookings.tomorrow.time(new n(8,30)),b.upcomingBookings.nextWeek.quantity(123),b.inbox.messages(a("../testdata/messages").messages),b.performance.earnings.currentAmount(2400),b.performance.earnings.nextAmount(6200.54),b.performance.timeBooked.percent(.93),b.getMore.model.updateWith({availability:!0,payments:!0,profile:!0,coop:!0})}var g=(a("jquery"),a("knockout")),h=a("../viewmodels/NavAction"),i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){a=a||{},this.requestInfo=a};var j=a("../models/UpcomingBookingsSummary"),k=a("../models/MailFolder"),l=a("../models/PerformanceSummary"),m=a("../models/GetMore"),n=a("../utils/Time")},{"../models/GetMore":22,"../models/MailFolder":25,"../models/PerformanceSummary":28,"../models/UpcomingBookingsSummary":30,"../testdata/calendarAppointments":31,"../testdata/messages":35,"../utils/Time":41,"../viewmodels/NavAction":44,knockout:!1}],9:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.navAction=null}var e=null;c.init=function(a,b){return null===e&&(e=new d(a,b)),e},d.prototype.show=function(){}},{}],10:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0)),this.navAction=g.goBack}function e(){this.profile=f.observable("customer")}var f=a("knockout"),g=a("../viewmodels/NavAction"),h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){a&&a.route&&a.route.segments&&a.route.segments.length&&this.dataView.profile(a.route.segments[0])}},{"../viewmodels/NavAction":44,knockout:!1}],11:[function(a,b,c){"use strict";function d(b,c){this.app=c,this.$activity=b,this.$listView=b.find("#locationsListView");var d=this.dataView=new e;f.applyBindings(d,b.get(0)),d.locations(a("../testdata/locations").locations),this.dataView.isSelectionMode.subscribe(function(a){this.dataView.headerText(a?"Select/Add location":"Locations")}.bind(this)),this.requestInfo=null,this.dataView.isSelectionMode.subscribe(function(a){this.requestInfo&&this.requestInfo.selectLocation===!0&&a===!1&&(this.requestInfo.selectedLocation=this.dataView.selectedLocation(),this.app.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(){this.headerText=f.observable("Locations"),this.locations=f.observableArray([]),this.isSelectionMode=f.observable(!1),this.selectedLocation=f.observable(null),this.selectLocation=function(a){this.selectedLocation(a),this.isSelectionMode(!1)}.bind(this)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){a=a||{},this.requestInfo=a,a.selectLocation===!0&&(this.dataView.isSelectionMode(!0),this.dataView.selectedLocation(a.selectedLocation))}},{"../testdata/locations":34,knockout:!1}],12:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.navAction=h.goBack,a.find("#accountLogInBtn").on("click",function(a){var b=f(a.target).button("loading");return setTimeout(function(){b.button("reset"),e(this.app);var a=!1;this.app.go(a?"onboardingHome":"home")},1e3),!1}.bind(this))}function e(a){a.model.user({email:g.observable("test@loconomics.com"),firstName:g.observable("Username"),onboardingStep:g.observable(null),userType:g.observable("p")})}var f=a("jquery"),g=a("knockout"),h=a("../viewmodels/NavAction"),i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(){this.app.status("login")}},{"../viewmodels/NavAction":44,knockout:!1}],13:[function(a,b,c){"use strict";function d(b,c){this.app=c,this.$activity=b,this.$listView=b.find("#servicesListView");var d=this.dataView=new f;g.applyBindings(d,b.get(0)),d.services(a("../testdata/services").services.map(e)),this.dataView.isSelectionMode.subscribe(function(a){this.dataView.headerText(a?"Select service(s)":"Services")}.bind(this)),this.requestInfo=null,this.dataView.isSelectionMode.subscribe(function(a){this.requestInfo&&this.requestInfo.selectServices===!0&&a===!1&&(this.requestInfo.selectedServices=this.dataView.selectedServices(),this.app.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(a){return a.isSelected=g.observable(!1),a}function f(){this.headerText=g.observable("Services"),this.services=g.observableArray([]),this.isSelectionMode=g.observable(!1),this.groupedServices=g.computed(function(){var a=this.services(),b={group:"Services",services:[]},c={group:"Add-on services",services:[]},d=[b,c];return a.forEach(function(a){var d=a.isAddon();d?c.services.push(a):b.services.push(a)}),d},this),this.selectedServices=g.observableArray([]),this.toggleServiceSelection=function(a){var b=-1,c=this.selectedServices().some(function(c,d){return c===a?(b=d,!0):void 0});a.isSelected(!c),c?this.selectedServices.splice(b,1):this.selectedServices.push(a)}.bind(this),this.endSelection=function(){this.isSelectionMode(!1)}.bind(this)}var g=(a("jquery"),a("knockout")),h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){a=a||{},this.requestInfo=a,a.selectServices===!0&&this.dataView.isSelectionMode(!0)}},{"../testdata/services":36,knockout:!1}],14:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.dataView=new f,h.applyBindings(this.dataView,a.get(0)),this.navAction=i.goBack,a.find("#accountSignUpBtn").on("click",function(a){var b=g(a.target).button("loading");return setTimeout(function(){b.button("reset"),e(this.app);var a=!1;this.app.go(a?"onboardingHome":"home")},1e3),!1}.bind(this))}function e(a){a.model.user({email:h.observable("test@loconomics.com"),firstName:h.observable("Username"),onboardingStep:h.observable(null),userType:h.observable("p")})}function f(){this.profile=h.observable("customer")}var g=a("jquery"),h=a("knockout"),i=a("../viewmodels/NavAction"),j=null;c.init=function(a,b){return null===j&&(j=new d(a,b)),j},d.prototype.show=function(a){a&&a.route&&a.route.segments&&a.route.segments.length&&this.dataView.profile(a.route.segments[0])}},{"../viewmodels/NavAction":44,knockout:!1}],15:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.$textarea=this.$activity.find("textarea"),this.textarea=this.$textarea.get(0),this.dataView=new e,f.applyBindings(this.dataView,a.get(0)),this.requestInfo=null,this.dataView.on("saved",function(){this.requestInfo&&(this.requestInfo.text=this.dataView.text()),this.app.goBack(this.requestInfo)}.bind(this)),this.dataView.on("cancel",function(){b.goBack()}.bind(this))}function e(){this.headerText=f.observable("Text"),this.text=f.observable(""),this.rowsNumber=f.observable(2),this.cancel=function(){this.emit("cancel")
},this.save=function(){this.emit("saved")}}var f=(a("jquery"),a("knockout")),g=a("events").EventEmitter,h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){a=a||{},this.requestInfo=a,this.dataView.headerText(a.header),this.dataView.text(a.text),a.rowsNumber&&this.dataView.rowsNumber(a.rowsNumber),this.textarea.focus(),this.$textarea.click()},e._inherits(g)},{events:!1,knockout:!1}],16:[function(a){"use strict";function b(){var a=i.model.user();a.onboardingStep()?i.status("onboarding"):"a"===a.userType()?i.status("out"):"p"===a.userType()&&i.status("in")}var c=a("jquery");a("jquery-mobile");var d=a("knockout");d.bindingHandlers.format=a("ko/formatBinding").formatBinding,a("es6-promise").polyfill(),a("./utils/Function.prototype._inherits"),a("./utils/Function.prototype._delayed");var e=a("layoutUpdateEvent"),f=a("./utils/Shell"),g=a("./viewmodels/NavAction"),h=a("moment");h.locale("en-US-LC",{meridiemParse:/[ap]\.?\.?/i,meridiem:function(a,b,c){return a>11?c?"p":"P":c?"a":"A"},calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"[last] dddd",nextWeek:"dddd",sameElse:"M/D"},longDateFormat:{LT:"h:mma",LTS:"h:mm:ssa",L:"MM/DD/YYYY",l:"M/D/YYYY",LL:"MMMM Do YYYY",ll:"MMM D YYYY",LLL:"MMMM Do YYYY LT",lll:"MMM D YYYY LT",LLLL:"dddd, MMMM Do YYYY LT",llll:"ddd, MMM D YYYY LT"}}),h.locale("en-US");var i=new f;i.model={user:d.observable({email:d.observable(""),firstName:d.observable(""),onboardingStep:d.observable(null),userType:d.observable("a")})},i.model.user.subscribe(b),i.model.user().userType.subscribe(b),i.model.user().onboardingStep.subscribe(b),i.activities={calendar:a("./activities/calendar"),datetimePicker:a("./activities/datetimePicker"),clients:a("./activities/clients"),services:a("./activities/services"),locations:a("./activities/locations"),textEditor:a("./activities/textEditor"),home:a("./activities/home"),appointment:a("./activities/appointment"),bookingConfirmation:a("./activities/bookingConfirmation"),index:a("./activities/index"),login:a("./activities/login"),learnMore:a("./activities/learnMore"),signup:a("./activities/signup")},c(function(){e.on();var a=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);a&&(c("html").height(window.innerHeight+"px"),c(window).on("layoutUpdate",function(){c("html").height(window.innerHeight+"px")})),i.baseUrl="activities/",i.defaultNavAction=g.goHome,i.init(),window.app=i})},{"./activities/appointment":3,"./activities/bookingConfirmation":4,"./activities/calendar":5,"./activities/clients":6,"./activities/datetimePicker":7,"./activities/home":8,"./activities/index":9,"./activities/learnMore":10,"./activities/locations":11,"./activities/login":12,"./activities/services":13,"./activities/signup":14,"./activities/textEditor":15,"./utils/Function.prototype._delayed":38,"./utils/Function.prototype._inherits":39,"./utils/Shell":40,"./viewmodels/NavAction":44,"es6-promise":1,knockout:!1,moment:!1}],17:[function(a,b,c){var d=a("jquery"),e={component:"DatePicker",months:"DatePicker-months",days:"DatePicker-days",monthDay:"day",month:"month",year:"year",years:"DatePicker-years"},f=function(a,b){if(this.element=d(a),this.format=g.parseFormat(b.format||this.element.data("date-format")||"mm/dd/yyyy"),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isPlaceholder=this.element.is(".calendar-placeholder"),this.picker=d(g.template).appendTo(this.isPlaceholder?this.element:"body").on("click tap",d.proxy(this.click,this)),this.picker.addClass(this.isPlaceholder?"container":"dropdown-menu"),this.isPlaceholder?(this.picker.show(),"today"==this.element.data("date")&&(this.date=new Date,this.set()),this.element.trigger({type:"show",date:this.date})):this.isInput?this.element.on({focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this)}):this.component?this.component.on("click tap",d.proxy(this.show,this)):this.element.on("click tap",d.proxy(this.show,this)),this.element.on("swipeleft",function(a){a.preventDefault(),this.moveDate("next")}.bind(this)).on("swiperight",function(a){a.preventDefault(),this.moveDate("prev")}.bind(this)),this.minViewMode=b.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=b.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=b.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=b.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};f.prototype={constructor:f,show:function(a){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),d(window).on("resize",d.proxy(this.place,this)),a&&(a.stopPropagation(),a.preventDefault()),!this.isInput;var b=this;d(document).on("mousedown",function(a){0===d(a.target).closest("."+e.component).length&&b.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),d(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||d(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var a=g.formatDate(this.date,this.format);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setValue:function(a,b){this.date="string"==typeof a?g.parseDate(a,this.format):new Date(a),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill(),b!==!0&&this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})},getValue:function(){return this.date},moveValue:function(a,b){return-1!=["prev","next"].indexOf(a&&a.toLowerCase())?(b=b?g.modesSet[b]:g.modes[this.viewMode],this.date["set"+b.navFnc].call(this.date,this.date["get"+b.navFnc].call(this.date)+b.navStep*("prev"===a?-1:1)),this.setValue(this.date),this.date):void 0},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},update:function(a){this.date=g.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+g.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find("."+e.days+" thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="'+e.month+'">'+g.dates.monthsShort[b++]+"</span>";this.picker.find("."+e.months+" td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),c=a.getMonth(),d=this.date.valueOf();this.picker.find("."+e.days+" th:eq(1)").html(g.dates.months[c]+" "+b);var f=new Date(b,c-1,28,0,0,0,0),h=g.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(h),f.setDate(h-(f.getDay()-this.weekStart+7)%7);var i=new Date(f);i.setDate(i.getDate()+42),i=i.valueOf();var j,k,l,m=[];if(this._daysCreated!==!0){for(;f.valueOf()<i;)f.getDay()===this.weekStart&&m.push("<tr>"),j=this.onRender(f),k=f.getFullYear(),l=f.getMonth(),c>l&&k===b||b>k?j+=" old":(l>c&&k===b||k>b)&&(j+=" new"),f.valueOf()===d&&(j+=" active"),m.push('<td class="'+e.monthDay+" "+j+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&m.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find("."+e.days+" tbody").empty().append(m.join("")),this._daysCreated=!0}else for(var n=this.picker.find("."+e.days+" tbody tr:first-child()"),o=null;f.valueOf()<i;){var p=f.getDay()-this.weekStart;j=this.onRender(f),k=f.getFullYear(),l=f.getMonth(),c>l&&k===b||b>k?j+=" old":(l>c&&k===b||k>b)&&(j+=" new"),f.valueOf()===d&&(j+=" active"),o=n.find("td:eq("+p+")"),o.attr("class","day "+j).text(f.getDate()),f.getDay()===this.weekEnd&&(n=n.next("tr")),f.setDate(f.getDate()+1)}var q=this.date.getFullYear(),r=this.picker.find("."+e.months).find("th:eq(1)").html(b).end().find("span").removeClass("active");q===b&&r.eq(this.date.getMonth()).addClass("active"),m="",b=10*parseInt(b/10,10);var s=this.picker.find("."+e.years).find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;var t;if(this._yearsCreated!==!0){for(t=-1;11>t;t++)m+='<span class="'+e.year+(-1===t||10===t?" old":"")+(q===b?" active":"")+'">'+b+"</span>",b+=1;s.html(m),this._yearsCreated=!0}else{var u=s.find("span:first-child()");for(t=-1;11>t;t++)u.text(b).attr("class","year"+(-1===t||10===t?" old":"")+(q===b?" active":"")),b+=1,u=u.next()}},moveDate:function(a,b){-1!=["prev","next"].indexOf(a&&a.toLowerCase())&&(b=b||this.viewMode,this.viewDate["set"+g.modes[b].navFnc].call(this.viewDate,this.viewDate["get"+g.modes[b].navFnc].call(this.viewDate)+g.modes[b].navStep*("prev"===a?-1:1)),this.fill(),this.set())},click:function(a){a.stopPropagation(),a.preventDefault();var b=d(a.target).closest("span, td, th");if(1===b.length){var c,f;switch(b[0].nodeName.toLowerCase()){case"th":switch(b[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.moveDate(b[0].className)}break;case"span":b.is("."+e.month)?(c=b.parent().find("span").index(b),this.viewDate.setMonth(c)):(f=parseInt(b.text(),10)||0,this.viewDate.setFullYear(f)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(b.is(".day")&&!b.is(".disabled")){var h=parseInt(b.text(),10)||1;c=this.viewDate.getMonth(),b.is(".old")?c-=1:b.is(".new")&&(c+=1),f=this.viewDate.getFullYear(),this.date=new Date(f,c,h,0,0,0,0),this.viewDate=new Date(f,c,Math.min(28,h),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})}}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter("."+e.component+"-"+g.modes[this.viewMode].clsName).show()}},d.fn.datepicker=function(a){var b,c=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=d(this),g=e.data("datepicker"),h="object"==typeof a&&a;return g||e.data("datepicker",g=new f(this,d.extend({},d.fn.datepicker.defaults,h))),"string"==typeof a?(b=g[a].apply(g,c),!1):void 0}),"undefined"!=typeof b?b:this},d.fn.datepicker.defaults={onRender:function(){return""}},d.fn.datepicker.Constructor=f;var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"day",navFnc:"Date",navStep:1}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,g.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a,b){var c,d=a.split(b.separator);if(a=new Date,a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),d.length===b.parts.length){for(var e=a.getFullYear(),f=a.getDate(),g=a.getMonth(),h=0,i=b.parts.length;i>h;h++)switch(c=parseInt(d[h],10)||1,b.parts[h]){case"dd":case"d":f=c,a.setDate(c);break;case"mm":case"m":g=c-1,a.setMonth(c-1);break;case"yy":e=2e3+c,a.setFullYear(2e3+c);break;case"yyyy":e=c,a.setFullYear(c)}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m,a=[];for(var d=0,e=b.parts.length;e>d;d++)a.push(c[b.parts[d]]);return a.join(b.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};g.template='<div class="'+e.component+'"><div class="'+e.days+'"><table class=" table-condensed">'+g.headTemplate+'<tbody></tbody></table></div><div class="'+e.months+'"><table class="table-condensed">'+g.headTemplate+g.contTemplate+'</table></div><div class="'+e.years+'"><table class="table-condensed">'+g.headTemplate+g.contTemplate+"</table></div></div>",g.modesSet={date:g.modes[3],month:g.modes[0],year:g.modes[1],decade:g.modes[2]},c.DatePicker=f,c.defaults=g,c.utils=g},{}],18:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({id:null,startTime:null,endTime:null,summary:"New booking",subtotalPrice:0,feePrice:0,pfeePrice:0,totalPrice:0,ptotalPrice:0,preNotesToClient:null,postNotesToClient:null,preNotesToSelf:null,postNotesToSelf:null},a),a=a||{},this.client=d.observable(a.client?new f(a.client):null),this.location=d.observable(new g(a.location)),this.locationSummary=d.computed(function(){return this.location().singleLine()},this),this.services=d.observableArray((a.services||[]).map(function(a){return a instanceof h?a:new h(a)})),this.servicesSummary=d.computed(function(){return this.services().map(function(a){return a.name()}).join(", ")},this),this.services.subscribe(function(a){this.ptotalPrice(a.reduce(function(a,b){return a+b.price()},0))}.bind(this)),this.displayedDate=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").calendar()},this),this.displayedStartTime=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").format("LT")},this),this.displayedEndTime=d.pureComputed(function(){return i(this.endTime()).locale("en-US-LC").format("LT")},this),this.displayedTimeRange=d.pureComputed(function(){return this.displayedStartTime()+"-"+this.displayedEndTime()},this),this.itStarted=d.pureComputed(function(){return this.startTime()&&new Date>=this.startTime()},this),this.itEnded=d.pureComputed(function(){return this.endTime()&&new Date>=this.endTime()},this),this.isNew=d.pureComputed(function(){return!this.id()},this),this.stateHeader=d.pureComputed(function(){var a="";return this.isNew()||(a=this.itStarted()?this.itEnded()?"Completed:":"Now:":"Upcoming:"),a},this)}var d=a("knockout"),e=a("./Model"),f=a("./Client"),g=a("./Location"),h=a("./Service"),i=a("moment");b.exports=c},{"./Client":21,"./Location":24,"./Model":27,"./Service":29,knockout:!1,moment:!1}],19:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({quantity:0,concept:"",time:null,timeFormat:" [@] h:mma"},a),this.phrase=d.pureComputed(function(){var a=this.time()&&f(this.time()).format(this.timeFormat())||"";return this.concept()+a},this)}var d=a("knockout"),e=a("./Model"),f=a("moment");b.exports=c},{"./Model":27,knockout:!1,moment:!1}],20:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({startTime:null,endTime:null,subject:"",description:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}{var d=(a("knockout"),a("./Model"));a("./Client")}b.exports=c},{"./Client":21,"./Model":27,knockout:!1}],21:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({firstName:"",lastName:""},a),this.fullName=d.computed(function(){return this.firstName()+" "+this.lastName()},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":27,knockout:!1}],22:[function(a,b){"use strict";function c(){e(this),this.model.defProperties({availability:!1,payments:!1,profile:!1,coop:!0});var a={availability:new f({contentLine1:"Complete your availability to create a cleaner calendar",markerIcon:"glyphicon glyphicon-calendar",actionIcon:"glyphicon glyphicon-chevron-right"}),payments:new f({contentLine1:"Start accepting payments through Loconomics",markerIcon:"glyphicon glyphicon-usd",actionIcon:"glyphicon glyphicon-chevron-right"}),profile:new f({contentLine1:"Activate your profile in the marketplace",markerIcon:"glyphicon glyphicon-user",actionIcon:"glyphicon glyphicon-chevron-right"}),coop:new f({contentLine1:"Learn more about our cooperative",actionIcon:"glyphicon glyphicon-chevron-right"})};this.items=d.pureComputed(function(){var b=[];return Object.keys(a).forEach(function(c){this[c]()&&b.push(a[c])}.bind(this)),b},this)}var d=a("knockout"),e=a("./Model"),f=a("./ListViewItem");b.exports=c},{"./ListViewItem":23,"./Model":27,knockout:!1}],23:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({markerLine1:null,markerLine2:null,markerIcon:null,contentLine1:"",contentLine2:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}{var d=(a("knockout"),a("./Model"));a("moment")}b.exports=c},{"./Model":27,knockout:!1,moment:!1}],24:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({name:"",addressLine1:null,addressLine2:null,city:null,stateProvinceCode:null,stateProviceID:null,postalCode:null,postalCodeID:null,countryID:null,latitude:null,longitude:null,specialInstructions:null},a),this.singleLine=d.computed(function(){var a=[this.addressLine1(),this.city(),this.postalCode(),this.stateProvinceCode()];return a.filter(function(a){return!!a}).join(", ")},this),this.countryName=d.computed(function(){return 1===this.countryID()?"United States":2===this.countryID()?"Spain":"unknow"},this),this.countryCodeAlpha2=d.computed(function(){return 1===this.countryID()?"US":2===this.countryID()?"ES":""},this),this.latlng=d.computed(function(){return{lat:this.latitude(),lng:this.longitude()}},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":27,knockout:!1}],25:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({messages:[],topNumber:10},a),this.top=d.pureComputed(function(a){return a&&this.topNumber(a),f.first(this.messages(),this.topNumber())},this)}var d=a("knockout"),e=a("./Model"),f=(a("moment"),a("lodash"));b.exports=c},{"./Model":27,knockout:!1,lodash:!1,moment:!1}],26:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({createdDate:null,updatedDate:null,subject:"",content:null,link:"#",actionIcon:null,actionText:null,classNames:""},a),this.displayedDate=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").calendar()},this),this.displayedTime=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").format("LT")},this)}var d=a("knockout"),e=a("./Model"),f=a("moment");b.exports=c},{"./Model":27,knockout:!1,moment:!1}],27:[function(a,b){"use strict";function c(a){if(!(this instanceof c)){var b=new c(a);return a.model=b,b}this.modelObject=a,this.propertiesList=[],this.fieldsList=[],this.mappingOptions={}}var d=a("knockout");d.mapping=a("knockout.mapping"),b.exports=c,c.prototype.defProperties=function(a,b){b=b||{};var c=this.modelObject,e=this.propertiesList;Object.keys(a).forEach(function(f){var g=a[f];c[f]=Array.isArray(g)?d.observableArray(g):d.observable(g),c[f]._defaultValue=g,"undefined"!=typeof b[f]&&c[f](b[f]),e.push(f)})},c.prototype.defFields=function(a,b){b=b||{};var c=this.modelObject,d=this.fieldsList;Object.keys(a).each(function(e){var f=a[e];c[e]=f,"undefined"!=typeof b[e]&&(c[e]=b[e]),d.push(e)})},c.prototype.updateWith=function(a){d.mapping.fromJS(a,this.mappingOptions,this.modelObject)}},{knockout:!1,"knockout.mapping":!1}],28:[function(a,b){"use strict";function c(a){g(this),a=a||{},this.earnings=new d(a.earnings);var b=new h;b.markerLine1=f.computed(function(){var a=j(this.currentAmount()).format("$0,0");return a},this.earnings),b.contentLine1=f.computed(function(){return this.currentConcept()},this.earnings),b.markerLine2=f.computed(function(){var a=j(this.nextAmount()).format("$0,0");return a},this.earnings),b.contentLine2=f.computed(function(){return this.nextConcept()},this.earnings),this.timeBooked=new e(a.timeBooked);var c=new h;c.markerLine1=f.computed(function(){var a=j(this.percent()).format("0%");return a},this.timeBooked),c.contentLine1=f.computed(function(){return this.concept()},this.timeBooked),this.items=f.pureComputed(function(){var a=[];return a.push(b),a.push(c),a},this)}function d(a){g(this),this.model.defProperties({currentAmount:0,currentConceptTemplate:"already paid this month",nextAmount:0,nextConceptTemplate:"projected {month} earnings"},a),this.currentConcept=f.pureComputed(function(){var a=i().format("MMMM");return this.currentConceptTemplate().replace(/\{month\}/,a)},this),this.nextConcept=f.pureComputed(function(){var a=i().add(1,"month").format("MMMM");return this.nextConceptTemplate().replace(/\{month\}/,a)},this)}function e(a){g(this),this.model.defProperties({percent:0,conceptTemplate:"of available time booked in {month}"},a),this.concept=f.pureComputed(function(){var a=i().add(1,"month").format("MMMM");return this.conceptTemplate().replace(/\{month\}/,a)},this)}var f=a("knockout"),g=a("./Model"),h=a("./ListViewItem"),i=a("moment"),j=a("numeral");b.exports=c},{"./ListViewItem":23,"./Model":27,knockout:!1,moment:!1,numeral:2}],29:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({name:"",price:0,duration:0,isAddon:!1},a),this.durationText=d.computed(function(){var a=this.duration()||0;return a?a+" minutes":""},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":27,knockout:!1}],30:[function(a,b){"use strict";function c(){e(this),this.today=new f({concept:"left today",timeFormat:" [ending @] h:mma"}),this.tomorrow=new f({concept:"tomorrow",timeFormat:" [starting @] h:mma"}),this.nextWeek=new f({concept:"next week"}),this.items=d.pureComputed(function(){var a=[];return this.today.quantity()&&a.push(this.today),this.tomorrow.quantity()&&a.push(this.tomorrow),this.nextWeek.quantity()&&a.push(this.nextWeek),a},this)}var d=a("knockout"),e=a("./Model"),f=a("./BookingSummary");b.exports=c},{"./BookingSummary":19,"./Model":27,knockout:!1}],31:[function(a,b,c){var d=a("../models/Appointment"),e=a("./locations").locations,f=a("./services").services,g=a("knockout"),h=a("moment"),i=(h(),h().add(1,"days")),j=i.clone().hours(10).minutes(0).seconds(0),k=i.clone().hours(16).minutes(30).seconds(0),l=[new d({id:1,startTime:j,endTime:k,summary:"Massage Therapist Booking",services:f,ptotalPrice:95,location:g.toJS(e[0]),preNotesToClient:"Looking forward to seeing the new color",preNotesToSelf:"Ask him about his new color",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:2,startTime:new Date(2014,11,1,13,0,0),endTime:new Date(2014,11,1,13,50,0),summary:"Massage Therapist Booking",services:[f[0]],ptotalPrice:95,location:g.toJS(e[1]),preNotesToClient:"Something else",preNotesToSelf:"Remember that thing",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:3,startTime:new Date(2014,11,1,16,0,0),endTime:new Date(2014,11,1,18,0,0),summary:"Massage Therapist Booking",services:[f[1]],ptotalPrice:95,location:g.toJS(e[2]),preNotesToClient:"",preNotesToSelf:"Ask him about the forgotten notes",client:{firstName:"Joshua",lastName:"Danielson"}})];c.appointments=l},{"../models/Appointment":18,"./locations":34,"./services":36,knockout:!1,moment:!1}],32:[function(a,b,c){var d=a("../models/CalendarSlot"),e=a("../utils/Time"),f=a("moment"),g=new Date,h=new Date;h.setDate(h.getDate()+1);var i=f(g).format("YYYY-MM-DD"),j=f(h).format("YYYY-MM-DD"),k=[new d({startTime:new e(g,0,0,0),endTime:new e(g,12,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(g,12,0,0),endTime:new e(g,13,0,0),subject:"Josh Danielson",description:"Deep Tissue Massage",link:"#!calendar/appointment/3",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({startTime:new e(g,13,0,0),endTime:new e(g,15,0,0),subject:"Do that important thing",description:null,link:"#!calendar/event/8",actionIcon:"glyphicon glyphicon-new-window",actionText:null,classNames:null}),new d({startTime:new e(g,15,0,0),endTime:new e(g,16,0,0),subject:"Iago Lorenzo",description:"Deep Tissue Massage Long Name",link:"#!calendar/appointment/5",actionIcon:null,actionText:"$159.90",classNames:null}),new d({startTime:new e(g,16,0,0),endTime:new e(g,0,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})],l=[new d({startTime:new e(h,0,0,0),endTime:new e(h,9,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,9,0,0),endTime:new e(h,10,0,0),subject:"Jaren Freely",description:"Deep Tissue Massage Long Name",link:"#!calendar/appointment/1",actionIcon:null,actionText:"$59.90",classNames:null}),new d({startTime:new e(h,10,0,0),endTime:new e(h,11,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,11,0,0),endTime:new e(h,12,45,0),subject:"CONFIRM-Susan Dee",description:"Deep Tissue Massage",link:"#!calendar/appointment/2",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({startTime:new e(h,12,45,0),endTime:new e(h,16,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,16,0,0),endTime:new e(h,17,15,0),subject:"Susan Dee",description:"Deep Tissue Massage",link:"#!calendar/appointment/3",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({startTime:new e(h,17,15,0),endTime:new e(h,18,30,0),subject:"Dentist appointment",description:null,link:"#!calendar/event/4",actionIcon:"glyphicon glyphicon-new-window",actionText:null,classNames:null}),new d({startTime:new e(h,18,30,0),endTime:new e(h,19,30,0),subject:"Susan Dee",description:"Deep Tissue Massage Long Name",link:"#!calendar/appointment/5",actionIcon:null,actionText:"$159.90",classNames:null}),new d({startTime:new e(h,19,30,0),endTime:new e(h,23,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,23,0,0),endTime:new e(h,0,0,0),subject:"Jaren Freely",description:"Deep Tissue Massage",link:"#!calendar/appointment/6",actionIcon:null,actionText:"$80",classNames:null})],m=[new d({startTime:new e(h,0,0,0),endTime:new e(h,0,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})],n={"default":m};n[i]=k,n[j]=l,c.calendar=n},{"../models/CalendarSlot":20,"../utils/Time":41,moment:!1}],33:[function(a,b,c){var d=a("../models/Client"),e=[new d({firstName:"Joshua",lastName:"Danielson"}),new d({firstName:"Iago",lastName:"Lorenzo"}),new d({firstName:"Fernando",lastName:"Gago"}),new d({firstName:"Adam",lastName:"Finch"}),new d({firstName:"Alan",lastName:"Ferguson"}),new d({firstName:"Alex",lastName:"Pena"}),new d({firstName:"Alexis",lastName:"Peaca"}),new d({firstName:"Arthur",lastName:"Miller"})];c.clients=e},{"../models/Client":21}],34:[function(a,b,c){var d=a("../models/Location"),e=[new d({name:"ActviSpace",addressLine1:"3150 18th Street"}),new d({name:"Corey's Apt",addressLine1:"187 Bocana St."}),new d({name:"Josh'a Apt",addressLine1:"429 Corbett Ave"})];c.locations=e},{"../models/Location":24}],35:[function(a,b,c){var d=a("../models/Message"),e=a("../utils/Time"),f=(a("moment"),new Date),g=new Date,h=new Date,i=new Date;g.setDate(g.getDate()-1),h.setDate(h.getDate()-2),i.setDate(i.getDate()-16);var j=[new d({createdDate:new e(f,11,0,0),subject:"CONFIRM-Susan Dee",content:"Deep Tissue Massage",link:"#messages/inbox/1",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({createdDate:new e(g,13,0,0),subject:'Do you do "Exotic Massage"?',content:"Hi, I wanted to know if you perform as par of your services...",link:"#messages/inbox/3",actionIcon:"glyphicon glyphicon-share-alt",actionText:null,classNames:null}),new d({createdDate:new e(h,12,0,0),subject:"Josh Danielson",content:"Deep Tissue Massage",link:"#messages/inbox/2",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({createdDate:new e(i,15,0,0),subject:"Inquiry",content:"Another question from another client.",link:"#messages/inbox/4",actionIcon:"glyphicon glyphicon-share-alt",classNames:null})];c.messages=j},{"../models/Message":26,"../utils/Time":41,moment:!1}],36:[function(a,b,c){var d=a("../models/Service"),e=[new d({name:"Deep Tissue Massage",price:95,duration:120}),new d({name:"Tissue Massage",price:60,duration:60}),new d({name:"Special oils",price:95,isAddon:!0}),new d({name:"Some service extra",price:40,duration:20,isAddon:!0})];c.services=e},{"../models/Service":29}],37:[function(a,b,c){var d=a("../utils/Time"),e=a("moment"),f=new Date,g=new Date;g.setDate(g.getDate()+1);var h=e(f).format("YYYY-MM-DD"),i=e(g).format("YYYY-MM-DD"),j=[d(f,9,15),d(f,11,30),d(f,12,0),d(f,12,30),d(f,16,15),d(f,18,0),d(f,18,30),d(f,19,0),d(f,19,30),d(f,21,30),d(f,22,0)],k=[d(g,8,0),d(g,10,30),d(g,11,0),d(g,11,30),d(g,12,0),d(g,12,30),d(g,13,0),d(g,13,30),d(g,14,45),d(g,16,0),d(g,16,30)],l=[],m={"default":l};m[h]=j,m[i]=k,c.timeSlots=m},{"../utils/Time":41,moment:!1}],38:[function(){Function.prototype._delayed=function(a){var b=this;return function(){var c=this,d=arguments;setTimeout(function(){b.apply(c,d)},a)}}},{}],39:[function(){Function.prototype._inherits=function(a){this.prototype=Object.create(a.prototype,{constructor:{value:this,enumerable:!1,writable:!0,configurable:!0}})}},{}],40:[function(a,b){"use strict";var c=a("jquery"),d=a("knockout"),e=a("./escapeRegExp"),f=a("../viewmodels/NavAction"),g=a("../utils/getUrlQuery"),h={currentZIndex:1,history:[],baseUrl:"",activities:{},navAction:d.observable(null),status:d.observable("out"),defaultNavAction:null,specialRoutes:{"go-back":function(a){this.goBack();var b=parseInt(a.segments[0],10);if(b>0)for(;b-->1;)this.goBack()}},unexpectedError:function(a){var b="string"==typeof a?a:JSON.stringify(a);console.error("Unexpected error",a),window.alert(b)},updateAppNav:function(a){this.navAction("navAction"in a?a.navAction:this.defaultNavAction)},loadActivity:function(a){return new Promise(function(b,d){var e=this.findActivityElement(a);e.length?b(e):c.ajax({url:this.baseUrl+a+".html",cache:!1,async:!1}).then(function(f){var g='<div id="body-mock">'+f.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/g,"")+"</div>",h=c(c.parseHTML(g));e=this.findActivityElement(a,h),e.length?(c("body").append(e),b(e)):d(Error("Activity not found in the source file."))}.bind(this),d)}.bind(this))},findActivityElement:function(a,b){return b=b||c(document),b.find('[data-activity="'+a+'"]')},showActivity:function(a,b){return this.loadActivity(a).then(function(c){c.css("zIndex",++this.currentZIndex).show();var d=this.history[this.history.length-1];d&&this.unfocus(d.$activity),this.history.push({name:a,$activity:c,options:b});var e=this.activities[a].init(c,this);e.show(b),this.updateAppNav(e),d&&d.name!==a&&this.hideActivity(d.name)}.bind(this)).catch(this.unexpectedError)},popActivity:function(a,b){return this.showActivity(a,b).then(function(){this.navAction(f.goBack)}.bind(this))},hideActivity:function(a){var b=this.findActivityElement(a);b.hide()
},goBack:function(a){if(this.history.length<1)return void this.showActivity("index",a);var b=this.history.pop(),c=this.history[this.history.length-1],d=c.name;this.currentZIndex--,a=a||b.options,b&&this.unfocus(b.$activity),this.loadActivity(d).then(function(c){c.show();var e=this.activities[d].init(c,this);e.show(a),this.updateAppNav(e),b&&b.name!==d&&this.hideActivity(b.name)}.bind(this)).catch(this.unexpectedError)},unfocus:function(a){a&&a.find&&a.find(":focus").blur()},parseActivityLink:function(a){a=a||"",a=a.replace(/^#!/,"");var b=a.replace(new RegExp("^"+e(this.baseUrl),"i"),""),c=/^\/?([^\/\.]+)[^\/]*(\/.*)*$/.exec(b),d={root:!0,activity:null,segments:null,path:null,link:a,query:g(a||"?")};return c&&(d.root=!1,c[1]&&(d.activity=c[1],c[2]?(d.path=c[2],d.segments=c[2].replace(/^\//,"").split("/")):(d.path="/",d.segments=[]))),d},route:function(a){var b=this.parseActivityLink(a);return b.found=!1,b.activity?this.activities.hasOwnProperty(b.activity)?(this.showActivity(b.activity,{route:b}),b.found=!0):this.specialRoutes.hasOwnProperty(b.activity)&&(this.specialRoutes[b.activity].call(this,b),b.found=!0):b.root&&this.showActivity("index",{route:b}),b},go:function(a){var b=/#!/.test(a)?a:"#!"+a;window.location.hash=b},updateMenu:function(a){var b=this.$menu;b.find("li").removeClass("active"),b.find(".go-"+a).closest("li").addClass("active"),b.filter(":visible").collapse("hide")},init:function(){this.$menu=c("#navbar");var a=this.route(document.location.hash);a.found&&this.updateMenu(a.activity);var b=function(a,b){var c=this.route(a);c.found&&(this.updateMenu(c.activity),/#!/.test(a)?c.root&&(window.location.hash=""):b.preventDefault())}.bind(this);c(document).on("tap","a, [data-href]",function(a){var c=a.currentTarget.getAttribute("href")||a.currentTarget.getAttribute("data-href");b(c,a)}),c(window).on("hashchange",function(a){b(window.location.hash,a)}),d.applyBindings({navAction:this.navAction,status:this.status},c(".AppNav").get(0))}};b.exports=function(){return Object.create(h)}},{"../utils/getUrlQuery":43,"../viewmodels/NavAction":44,"./escapeRegExp":42,knockout:!1}],41:[function(a,b){function c(a,b,c,d){return a instanceof Date||(d=c,c=b,b=a,a=new Date),new Date(a.getFullYear(),a.getMonth(),a.getDate(),b||0,c||0,d||0)}b.exports=c},{}],42:[function(a,b){"use strict";var c=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],d=RegExp("["+c.join("\\")+"]","g"),e=function(a){return a.replace(d,"\\$&")};b.exports=e},{}],43:[function(a,b){"user strict";b.exports=function(a){a=a||window.location.href;for(var b,c=[],d=a.slice(a.indexOf("?")+1).split("&"),e=0;e<d.length;e++)b=d[e].split("="),c.push(b[0]),c[b[0]]=b[1];return c}},{}],44:[function(a,b){function c(a){d(this),this.model.defProperties({link:"",icon:""},a)}var d=(a("knockout"),a("../models/Model"));b.exports=c,c.goHome=new c({link:"/",icon:"glyphicon glyphicon-home"}),c.goBack=new c({link:"#!go-back",icon:"glyphicon glyphicon-arrow-left"}),c.newItem=new c({link:"#!new",icon:"glyphicon glyphicon-plus"}),c.newCalendarItem=new c({link:"#!calendar/new",icon:"glyphicon glyphicon-plus"})},{"../models/Model":27,knockout:!1}],45:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[16]);