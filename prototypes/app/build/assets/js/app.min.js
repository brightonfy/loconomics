!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(){function a(a){this._value=a}function c(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function d(a,b,c){var d;return d=b.indexOf("$")>-1?f(a,b,c):b.indexOf("%")>-1?g(a,b,c):b.indexOf(":")>-1?h(a,b):j(a._value,b,c)}function e(a,b){var c,d,e,f,g,h=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=i(b);else if(b===r)a._value=0;else{for("."!==p[q].delimiters.decimal&&(b=b.replace(/\./g,"").replace(p[q].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+p[q].abbreviations.thousand+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+p[q].abbreviations.million+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+p[q].abbreviations.billion+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+p[q].abbreviations.trillion+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(h.match(c)?Math.pow(10,3):1)*(h.match(d)?Math.pow(10,6):1)*(h.match(e)?Math.pow(10,9):1)*(h.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function f(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),i="";return b.indexOf(" $")>-1?(i=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(i=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=j(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,p[q].currency.symbol+i),e=e.join("")):e=p[q].currency.symbol+i+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,i+p[q].currency.symbol),e=e.join("")):e=e+i+p[q].currency.symbol,e}function g(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=j(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function h(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function i(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function j(a,b,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",o=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==r)return r;if(b.indexOf("(")>-1?(k=!0,b=b.slice(1,-1)):b.indexOf("+")>-1&&(l=!0,b=b.replace(/\+/g,"")),b.indexOf("a")>-1&&(o=b.indexOf("aK")>=0,s=b.indexOf("aM")>=0,t=b.indexOf("aB")>=0,u=b.indexOf("aT")>=0,v=o||s||t||u,b.indexOf(" a")>-1?(n=" ",b=b.replace(" a","")):b=b.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=p[q].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=p[q].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=p[q].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||o)&&(n+=p[q].abbreviations.thousand,a/=Math.pow(10,3))),b.indexOf("b")>-1)for(b.indexOf(" b")>-1?(w=" ",b=b.replace(" b","")):b=b.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return b.indexOf("o")>-1&&(b.indexOf(" o")>-1?(x=" ",b=b.replace(" o","")):b=b.replace("o",""),x+=p[q].ordinal(a)),b.indexOf("[.]")>-1&&(m=!0,b=b.replace("[.]",".")),h=a.toString().split(".")[0],i=b.split(".")[1],j=b.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=c(a,i[0].length+i[1].length,d,i[1].length)):A=c(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?p[q].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=c(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[q].delimiters.thousands)),0===b.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function k(a,b){p[a]=b}function l(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function m(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=l(a),d=l(b);return c>d?c:d},-1/0)}var n,o="1.5.3",p={},q="en",r=null,s="0,0",t="undefined"!=typeof b&&b.exports;n=function(b){return n.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=n.fn.unformat(b)),new a(Number(b))},n.version=o,n.isNumeral=function(b){return b instanceof a},n.language=function(a,b){if(!a)return q;if(a&&!b){if(!p[a])throw new Error("Unknown language : "+a);q=a}return(b||!p[a])&&k(a,b),n},n.languageData=function(a){if(!a)return p[q];if(!p[a])throw new Error("Unknown language : "+a);return p[a]},n.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),n.zeroFormat=function(a){r="string"==typeof a?a:null},n.defaultFormat=function(a){s="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),n.fn=a.prototype={clone:function(){return n(this)},format:function(a,b){return d(this,a?a:s,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:e(this,a?a:s)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=m.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=m.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=m(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=m(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(n(this._value).subtract(a).value())}},t&&(b.exports=n),"undefined"==typeof ender&&(this.numeral=n),"function"==typeof define&&define.amd&&define([],function(){return n})}).call(this)},{}],2:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=d.createSectionNavBar("Account")});c.init=e.init},{"../components/Activity":44}],3:[function(a,b,c){"use strict";var d=a("jquery"),e=a("moment"),f=a("knockout");a("../components/DatePicker");var g=a("../components/Activity"),h=g["extends"](function(){g.apply(this,arguments),this.accessLevel=this.app.UserType.Freelancer,this.menuItem="calendar";var a=new g.NavAction({link:"calendar/",icon:g.NavAction.goBack.icon(),isTitle:!0,text:"Calendar"});this.navBar=new g.NavBar({title:"",leftAction:a,rightAction:g.NavAction.goHelpIndex}),this.$appointmentView=this.$activity.find("#calendarAppointmentView"),this.$chooseNew=d("#calendarChooseNew"),this.initAppointment(),this.viewModel=this.appointmentsDataView;var b=a.text._initialValue;a.text=f.computed(function(){var a=this.appointmentsDataView.currentDate();if(!a)return b;var c=e(a),d=c.format("dddd [(]M/D[)]");return d},this);var c=a.link._initialValue;a.link=f.computed(function(){var a=this.appointmentsDataView.currentDate();return a?c+a.toISOString():c},this),this.appointmentsDataView.currentAppointment.subscribe(function(a){var b=a.id(),c=/appointment\/(\d+)/i.test(window.location);c=c&&c[1]||"","0"!==c&&null!==b&&c!==b.toString()&&(""===c?this.app.shell.history.replaceState(null,null,"appointment/"+b):this.app.shell.history.pushState(null,null,"appointment/"+b)),d(window).trigger("layoutUpdate")}.bind(this))});c.init=h.init,h.prototype.show=function(a){g.prototype.show.call(this,a);var b;if(this.requestData.appointment)b=this.requestData.appointment;else{var c=a&&a.route&&a.route.segments[0];c=parseInt(c,10),b=c||0}if(this.showAppointment(b),null!==a){var d=this.appointmentsDataView.currentAppointment();if("textEditor"===a.request&&d)d[a.field](a.text);else if(a.selectClient===!0&&d)d.client(a.selectedClient);else if("undefined"!=typeof a.selectedDatetime&&d){d.startTime(a.selectedDatetime);var f=60;d.endTime(e(d.startTime()).add(f,"minutes").toDate())}else a.selectServices===!0&&d?d.services(a.selectedServices):a.selectLocation===!0&&d&&d.location(a.selectedLocation)}};var i=a("../models/Appointment");h.prototype.showAppointment=function(a){"number"==typeof a?a||0===a&&(this.appointmentsDataView.newAppointment(new i),this.appointmentsDataView.editMode(!0)):a.id||(this.appointmentsDataView.newAppointment(new i(a)),this.appointmentsDataView.editMode(!0))},h.prototype.initAppointment=function(){if(!this.__initedAppointment){this.__initedAppointment=!0;var b=this.app,c=a("../testdata/calendarAppointments").appointments,d={appointments:f.observableArray(c),currentIndex:f.observable(0),editMode:f.observable(!1),newAppointment:f.observable(null)};this.appointmentsDataView=d,d.isNew=f.computed(function(){return null!==this.newAppointment()},d),d.currentAppointment=f.computed({read:function(){return this.isNew()?this.newAppointment():this.appointments()[this.currentIndex()%this.appointments().length]},write:function(a){var b=this.currentIndex()%this.appointments().length;this.appointments()[b]=a,this.appointments.valueHasMutated()},owner:d}),d.originalEditedAppointment={},d.goPrevious=function(){this.editMode()||this.currentIndex(0===this.currentIndex()?this.appointments().length-1:(this.currentIndex()-1)%this.appointments().length)},d.goNext=function(){this.editMode()||this.currentIndex((this.currentIndex()+1)%this.appointments().length)},d.edit=function(){this.editMode(!0)}.bind(d),d.cancel=function(){this.isNew()?this.newAppointment(null):this.currentAppointment(new i(this.originalEditedAppointment)),this.editMode(!1)}.bind(d),d.save=function(){if(this.isNew()){var a=this.newAppointment();a.summary("Massage Therapist Booking"),a.id(4),this.appointments.push(a),this.newAppointment(null),this.currentIndex(this.appointments().length-1),b.shell.go("bookingConfirmation",{booking:a})}this.editMode(!1)}.bind(d),d.editMode.subscribe(function(a){this.$activity.toggleClass("in-edit",a),this.$appointmentView.find(".AppointmentCard").toggleClass("in-edit",a),a&&(d.originalEditedAppointment=f.toJS(d.currentAppointment()))}.bind(this)),d.currentDate=f.computed(function(){var a=this.currentAppointment(),b=null;return a&&a.startTime()&&(b=e(a.startTime()).hours(0).minutes(0).seconds(0).toDate()),b},d);var g=function(a,c){c.appointment=d.currentAppointment().model.toPlainObject(!0),b.shell.go(a,c)};d.pickDateTime=function(){g("datetimePicker",{selectedDatetime:null})},d.pickClient=function(){g("clients",{selectClient:!0,selectedClient:null})},d.pickService=function(){g("services",{selectServices:!0,selectedServices:d.currentAppointment().services()})},d.changePrice=function(){},d.pickLocation=function(){g("locations",{selectLocation:!0,selectedLocation:d.currentAppointment().location()})};var h={preNotesToClient:"Notes to client",postNotesToClient:"Notes to client (afterwards)",preNotesToSelf:"Notes to self",postNotesToSelf:"Booking summary"};d.editTextField=function(a){g("textEditor",{request:"textEditor",field:a,title:d.isNew()?"New booking":"Booking",header:h[a],text:d.currentAppointment()[a]()})}.bind(this)}}},{"../components/Activity":44,"../components/DatePicker":45,"../models/Appointment":49,"../testdata/calendarAppointments":71,knockout:!1,moment:!1}],4:[function(a,b,c){"use strict";function d(a){var b=a.model.marketplaceProfile;this.bookCode=g.computed(function(){return b.data.bookCode()}),this.jobTitleID=g.observable(0),this.type=g.observable("medium"),this.isLocked=b.isLocked;var c='<!-- begin Loconomics book-me-button --><a style="display:inline-block"><img alt="" style="border:none" /></a><!-- end Loconomics book-me-button -->',d="<!-- begin Loconomics book-me-button --><a><span></span></a><!-- end Loconomics book-me-button -->";this.buttonHtmlCode=g.pureComputed(function(){if(b.isLoading())return"loading...";var a=this.type(),f=c;"link"===a&&(f=d);var g=h("html").attr("data-site-url"),i=g+"/book/"+this.bookCode()+"/"+this.jobTitleID()+"/",j=g+"/img/extern/book-me-button-"+a+".png",k=e({tpl:f,label:"Click here to book me now (on loconomics.com)",linkUrl:i,imgUrl:j});return k},this),this.copyCode=function(){},this.sendByEmail=function(){}}function e(a){var b=h(h.parseHTML("<div>"+a.tpl+"</div>"));return b.find("a").attr("href",a.linkUrl).find("span").text(a.label),b.find("img").attr("src",a.imgUrl).attr("alt",a.label),b.html()}var f=a("../components/Activity"),g=a("knockout"),h=a("jquery"),i=f["extends"](function(){f.apply(this,arguments),this.viewModel=new d(this.app),this.accessLevel=this.app.UserType.Freelancer,this.navBar=f.createSubsectionNavBar("Scheduling"),this.registerHandler({target:this.$activity,event:"click",selector:"textarea",handler:function(){h(this).select()}}),this.registerHandler({target:this.app.model.marketplaceProfile,event:"error",handler:function(a){if(!a||"save"!==a.task){var b="Error loading data to build the Button.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}}.bind(this)})});c.init=i.init,i.prototype.show=function(a){f.prototype.show.call(this,a),this.app.model.marketplaceProfile.sync();var b=0|a.route.segments[0];this.viewModel.jobTitleID(b)}},{"../components/Activity":44,knockout:!1}],5:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.LoggedUser,this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0))}function e(){this.booking=f.observable(null)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){a&&a.booking&&this.dataView.booking(a.booking)}},{knockout:!1}],6:[function(a,b,c){"use strict";function d(a){var b=a.start||new m(a.date,0,0,0),c=a.end||new m(a.date,0,0,0);return new j({startTime:b,endTime:c,subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})}function e(a,b){return new j({startTime:a.startTime(),endTime:a.endTime(),subject:a.summary(),description:a.description(),link:"#!appointment/"+a.calendarEventID(),actionIcon:null===b?"glyphicon glyphicon-chevron-right":null,actionText:null===b?null:b&&b.bookingRequest&&b.bookingRequest.pricingEstimate.totalPrice||"$0.00",classNames:null})}function f(a){this.slotsData=i.observable({}),this.currentDate=i.observable(new Date);var b=[d({date:this.currentDate()})];this.slots=i.observableArray(b),this.isLoading=i.observable(!1);var c=this.currentDate().toISOString();this.currentDate.subscribe(function(d){if(d=new Date(Date.parse(d.toISOString())),d.toISOString()!==c){c=d.toISOString();{var f=h(d);f.format("YYYYMMDD")}this.isLoading(!0),Promise.all([a.model.bookings.getBookingsByDate(d),a.model.calendarEvents.getEventsByDate(d)]).then(function(a){if(d.toISOString()===this.currentDate().toISOString()){var c=a[1],f=a[0];c&&c().length?(this.slots(c().map(function(a){var b=null;return f().some(function(c){var d=c.confirmedDateID()===a.calendarEventID();return d?(b=c,!0):void 0}),e(a,b)})),this.isLoading(!1)):(this.slots(b),this.isLoading(!1))}}.bind(this))["catch"](function(c){this.slots(b),this.isLoading(!1);var d="Error loading calendar events.";a.modals.showError({title:d,error:c&&c.error||c})}.bind(this))}}.bind(this))}var g=a("jquery"),h=a("moment"),i=a("knockout"),j=a("../models/CalendarSlot");a("../components/DatePicker");var k=a("../components/Activity"),l=k["extends"](function(){k.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.viewModel=new f(this.app),this.navBar=k.createSectionNavBar("Calendar"),this.$datepicker=this.$activity.find("#calendarDatePicker"),this.$dailyView=this.$activity.find("#calendarDailyView"),this.$dateHeader=this.$activity.find("#calendarDateHeader"),this.$dateTitle=this.$dateHeader.children(".CalendarDateHeader-date"),this.$chooseNew=g("#calendarChooseNew"),this.$datepicker.show().datepicker(),this.viewModel.slotsData(a("../testdata/calendarSlots").calendar),this.registerHandler({target:this.viewModel.currentDate,handler:function(a){if(g(window).trigger("layoutUpdate"),a){var b=h(a);if(b.isValid()){var c=b.toISOString();return this.$datepicker.removeClass("is-visible"),this.$datepicker.datepicker("getValue").toISOString()!==c&&this.$datepicker.datepicker("setValue",a,!0),void this.app.shell.history.pushState(null,null,"calendar/"+c)}}this.viewModel.currentDate(new Date)}.bind(this)}),this.registerHandler({target:this.$dailyView,event:"swipeleft swiperight",handler:function(a){a.preventDefault();var b="swipeleft"===a.type?"next":"prev";g(document).trigger("touchend"),this.$datepicker.datepicker("moveValue",b,"date")}.bind(this)}),this.registerHandler({target:this.$dateHeader,event:"tap",selector:".CalendarDateHeader-switch",handler:function(a){switch(a.currentTarget.getAttribute("href")){case"#prev":this.$datepicker.datepicker("moveValue","prev","date");break;case"#next":this.$datepicker.datepicker("moveValue","next","date");break;default:return}a.preventDefault(),a.stopPropagation()}.bind(this)}),this.registerHandler({target:this.$dateTitle,event:"tap",handler:function(a){this.$datepicker.toggleClass("is-visible"),a.preventDefault(),a.stopPropagation()}.bind(this)}),this.registerHandler({target:this.$datepicker,event:"changeDate",handler:function(a){"days"===a.viewMode&&this.viewModel.currentDate(a.date)}.bind(this)}),this.viewModel.currentDate(this.$datepicker.datepicker("getValue"))});c.init=l.init,l.prototype.show=function(a){if(k.prototype.show.call(this,a),a&&a.route&&a.route.segments){var b=a.route.segments[0],c=h(b),d=c.isValid()?c.toDate():null;d&&this.viewModel.currentDate(d)}};var m=a("../utils/Time")},{"../components/Activity":44,"../components/DatePicker":45,"../models/CalendarSlot":53,"../testdata/calendarSlots":72,"../utils/Time":84,knockout:!1,moment:!1}],7:[function(a,b,c){"use strict";function d(a){var b=a.model.calendarSyncing,c=b.newVersion();c.isObsolete.subscribe(function(a){a&&c.pull({evenIfNewer:!0})}),this.sync=c.version,this.isLocked=g.pureComputed(function(){return this.isLocked()||this.isReseting()},b),this.submitText=g.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b),this.resetText=g.pureComputed(function(){return this.isReseting()?"reseting...":"Reset Private URL"},b),this.discard=function(){c.pull({evenIfNewer:!0})},this.save=function(){c.push({evenIfObsolete:!0})},this.reset=function(){b.resetExportUrl()}}var e=a("../components/Activity"),f=a("jquery"),g=a("knockout"),h=(a("moment"),e["extends"](function(){e.apply(this,arguments),this.viewModel=new d(this.app),this.accessLevel=this.app.UserType.Freelancer,this.navBar=e.createSubsectionNavBar("Scheduling"),this.registerHandler({target:this.$activity.find("#calendarSync-icalExportUrl"),event:"click",handler:function(){f(this).select()}}),this.registerHandler({target:this.app.model.calendarSyncing,event:"error",handler:function(a){var b="save"===a.task?"Error saving calendar syncing settings.":"Error loading calendar syncing settings.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})}));c.init=h.init,h.prototype.show=function(a){e.prototype.show.call(this,a),this.app.model.calendarSyncing.sync(),this.viewModel.discard()}},{"../components/Activity":44,knockout:!1,moment:!1}],8:[function(a,b,c){"use strict";function d(){this.client=g.observable(new h),this.header=g.observable("Edit Location"),this.save=function(){},this.cancel=function(){}}var e=a("../components/Activity"),f=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSubsectionNavBar("clients")});c.init=f.init;var g=a("knockout"),h=a("../models/Client")},{"../components/Activity":44,"../models/Client":55,knockout:!1}],9:[function(a,b,c){"use strict";function d(){this.headerText=e.observable(""),this.isSelectionMode=e.observable(!1),this.clients=e.observableArray([]),this.searchText=e.observable(""),this.getFilteredList=function(){var a=(this.searchText()||"").toLowerCase();return this.clients().filter(function(b){var c=b&&b.fullName()||"";return c=c.toLowerCase(),c.indexOf(a)>-1})},this.filteredClients=e.computed(function(){return this.getFilteredList()},this),this.groupedClients=e.computed(function(){var a=this.filteredClients().sort(function(a,b){return a.firstName()>b.firstName()}),b=[],c=null,d=null;return a.forEach(function(a){var e=(a.firstName()[0]||"").toUpperCase();e!==d?(c={letter:e,clients:[a]},b.push(c),d=e):c.clients.push(a)}),b},this),this.selectedClient=e.observable(null),this.selectClient=function(a){this.selectedClient(a)}.bind(this)}var e=(a("jquery"),a("knockout")),f=a("../components/Activity"),g=f["extends"](function(){f.apply(this,arguments),this.accessLevel=this.app.UserType.Freelancer,this.viewModel=new d(this.app),this.navBar=f.createSubsectionNavBar("Clients"),this.$index=this.$activity.find("#clientsIndex"),this.$listView=this.$activity.find("#clientsListView"),this.viewModel.clients(a("../testdata/clients").clients),this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){this.viewModel.headerText(a?"Select a client":"")}.bind(this)}),this.registerHandler({target:this.viewModel.selectedClient,handler:function(a){this.requestData&&this.requestData.selectClient===!0&&a&&(this.requestData.selectedClient=a,this.app.shell.goBack(this.requestData),this.requestData=null)}.bind(this)})});c.init=g.init,g.prototype.show=function(a){f.prototype.show.call(this,a),this.viewModel.searchText(""),this.viewModel.isSelectionMode(a.selectClient===!0)}},{"../components/Activity":44,"../testdata/clients":73,knockout:!1}],10:[function(a,b,c){"use strict";function d(){this.clientsCount=f.observable()}var e=a("../components/Activity"),f=a("knockout"),g=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSectionNavBar("Client management");var b=f.observableArray(a("../testdata/clients").clients);this.viewModel.clientsCount(b().length),this.registerHandler({target:b,handler:function(){this.viewModel.clientsCount(b().length)}.bind(this)})});c.init=g.init},{"../components/Activity":44,"../testdata/clients":73,knockout:!1}],11:[function(a,b,c){"use strict";function d(){this.message=g.observable(""),this.wasSent=g.observable(!1);var a=function(){this.wasSent(!1)}.bind(this);this.message.subscribe(a),this.send=function(){this.message(""),this.wasSent(!0)}.bind(this)}var e=a("../components/Activity"),f=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSubsectionNavBar("Talk to us")});c.init=f.init;var g=a("knockout")},{"../components/Activity":44,knockout:!1}],12:[function(a,b,c){"use strict";function d(a){this.headerText=g.observable("Contact information"),this.buttonText=g.observable("Save");var b=a.model.userProfile,c=b.newVersion();c.isObsolete.subscribe(function(a){a&&c.pull({evenIfNewer:!0})}),this.profile=c.version,this.months=g.observableArray([{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}]),this.selectedBirthMonth=g.computed({read:function(){var a=this.profile.birthMonth();return a?this.months()[a-1]:null},write:function(a){this.profile.birthMonth(a&&a.id||null)},owner:this}),this.monthDays=g.observableArray([]);for(var d=1;31>=d;d++)this.monthDays.push(d);var e=a.model.homeAddress,f=e.newVersion();f.isObsolete.subscribe(function(a){a&&f.pull({evenIfNewer:!0})}),this.address=f.version,this.isLocked=g.computed(function(){return b.isLocked()||e.isLocked()},this),this.isLoading=g.computed(function(){return b.isLoading()||e.isLoading()},this),this.isSaving=g.computed(function(){return b.isSaving()||e.isSaving()},this),this.submitText=g.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},this),this.discard=function(){c.pull({evenIfNewer:!0}),f.pull({evenIfNewer:!0})}.bind(this),this.save=function(){c.push({evenIfObsolete:!0}),f.push({evenIfObsolete:!0})}.bind(this)}var e=a("../components/Activity"),f=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d(this.app),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSubsectionNavBar("Owner information"),this.registerHandler({target:this.viewModel.profile.onboardingStep,handler:function(a){a?(this.navBar.leftAction().text(""),this.viewModel.headerText("How can we reach you?"),this.viewModel.buttonText("Save and continue")):(this.navBar.leftAction().text("Account"),this.viewModel.headerText("Contact information"),this.viewModel.buttonText("Save"))}.bind(this)}),this.registerHandler({target:this.app.model.userProfile,event:"error",handler:function(a){var b="save"===a.task?"Error saving contact data.":"Error loading contact data.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)}),this.registerHandler({target:this.app.model.homeAddress,event:"error",handler:function(a){var b="save"===a.task?"Error saving address details.":"Error loading address details.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=f.init,f.prototype.show=function(a){e.prototype.show.call(this,a),this.viewModel.discard(),this.app.model.userProfile.sync(),this.app.model.homeAddress.sync()};var g=a("knockout")},{"../components/Activity":44,knockout:!1}],13:[function(a,b,c){"use strict";function d(){this.inbox=new h({topNumber:20}),this.conversationID=i.observable(null),this.conversation=i.pureComputed(function(){var a=this.conversationID();return this.inbox.messages().filter(function(b){return b&&b.id()===a})},this),this.subject=i.pureComputed(function(){var a=this.conversation()[0];return a?a.subject():"Conversation w/o subject"},this)}function e(b){b.inbox.messages(a("../testdata/messages").messages)}var f=a("../components/Activity"),g=f["extends"](function(){f.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=f.createSubsectionNavBar("Inbox"),e(this.viewModel)});c.init=g.init,g.prototype.show=function(a){f.prototype.show.call(this,a),a&&a.route&&a.route.segments&&this.viewModel.conversationID(parseInt(a.route.segments[0],10)||0)};var h=a("../models/MailFolder"),i=a("knockout")},{"../components/Activity":44,"../models/MailFolder":59,"../testdata/messages":75,knockout:!1}],14:[function(a,b,c){"use strict";function d(){this.headerText=f.observable("Select a time"),this.selectedDate=f.observable(new Date),this.slotsData={},this.slots=f.observableArray([]),this.groupedSlots=f.computed(function(){var a=this.slots()&&this.slots()[0]||new Date,b=[{group:"Morning",slots:[],starts:new g(a,0,0),ends:new g(a,12,0)},{group:"Afternoon",slots:[],starts:new g(a,12,0),ends:new g(a,17,0)},{group:"Evening",slots:[],starts:new g(a,17,0),ends:new g(a,24,0)}],c=this.slots().sort();return c.forEach(function(a){b.forEach(function(b){a>=b.starts&&a<b.ends&&b.slots.push(a)})}),b},this),this.selectedDatetime=f.observable(null),this.selectDatetime=function(a){this.selectedDatetime(a)}.bind(this)}var e=(a("jquery"),a("moment")),f=a("knockout"),g=a("../utils/Time");a("../components/DatePicker");var h=a("../components/Activity"),i=h["extends"](function(){h.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.viewModel=new d(this.app),this.navBar=h.createSubsectionNavBar(""),this.$datePicker=this.$activity.find("#datetimePickerDatePicker"),this.$timePicker=this.$activity.find("#datetimePickerTimePicker"),this.$datePicker.show().datepicker(),this.registerHandler({target:this.$datePicker,event:"changeDate",handler:function(a){"days"===a.viewMode&&this.viewModel.selectedDate(a.date)}.bind(this)}),this.registerHandler({target:this.viewModel.selectedDate,handler:function(a){this.bindDateData(a)}.bind(this)}),this.registerHandler({target:this.viewModel.selectedDatetime,handler:function(){this.requestData&&(this.requestData.selectedDatetime=this.viewModel.selectedDatetime(),this.app.shell.goBack(this.requestData),this.requestData=null)}.bind(this)}),this.viewModel.slotsData=a("../testdata/timeSlots").timeSlots,this.bindDateData(new Date)});c.init=i.init,i.prototype.show=function(a){h.prototype.show.call(this,a),this.viewModel.headerText("Select a start time")},i.prototype.bindDateData=function(a){var b=e(a).format("YYYY-MM-DD"),c=this.viewModel.slotsData;this.viewModel.slots(c.hasOwnProperty(b)?c[b]:c["default"])}},{"../components/Activity":44,"../components/DatePicker":45,"../testdata/timeSlots":77,"../utils/Time":84,knockout:!1,moment:!1}],15:[function(a,b,c){"use strict";function d(){this.faqs=i.observableArray([]),this.searchText=i.observable(""),this.filteredFaqs=i.pureComputed(function(){var a=this.searchText().toLowerCase();return this.faqs().filter(function(b){var c=b&&b.title()||"";return c+=b&&b.description()||"",c=c.toLowerCase(),c.indexOf(a)>-1})},this)}function e(a){j(this),this.model.defProperties({id:0,title:"",description:""},a)}function f(a){var b=[new e({id:1,title:"How do I set up a marketplace profile?",description:"Description about how I set up a marketplace profile"}),new e({id:2,title:"Another faq",description:"Another description"})];a.faqs(b)}var g=a("../components/Activity"),h=g["extends"](function(){g.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=g.createSubsectionNavBar("Talk to us"),f(this.viewModel)});c.init=h.init,h.prototype.show=function(a){g.prototype.show.call(this,a),this.viewModel.searchText("")};var i=a("knockout"),j=a("../models/Model")},{"../components/Activity":44,"../models/Model":62,knockout:!1}],16:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=d.createSectionNavBar("Talk to us")});c.init=e.init},{"../components/Activity":44}],17:[function(a,b,c){"use strict";function d(){this.message=g.observable(""),this.becomeCollaborator=g.observable(!1),this.wasSent=g.observable(!1);var a=function(){this.wasSent(!1)}.bind(this);this.message.subscribe(a),this.becomeCollaborator.subscribe(a),this.send=function(){this.message(""),this.becomeCollaborator(!1),this.wasSent(!0)}.bind(this)}var e=a("../components/Activity"),f=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSubsectionNavBar("Talk to us")});c.init=f.init;
var g=a("knockout")},{"../components/Activity":44,knockout:!1}],18:[function(a,b,c){"use strict";function d(){this.upcomingBookings=new i,this.nextBooking=f.observable(null),this.inbox=new j({topNumber:4}),this.performance=new k,this.getMore=new l}function e(b){b.inbox.messages(a("../testdata/messages").messages),b.performance.earnings.currentAmount(2400),b.performance.earnings.nextAmount(6200.54),b.performance.timeBooked.percent(.93),b.getMore.model.updateWith({availability:!0,payments:!0,profile:!0,coop:!0})}var f=(a("jquery"),a("knockout")),g=a("../components/Activity"),h=g["extends"](function(){g.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.viewModel=new d(this.app),this.navBar=g.createSectionNavBar(null),this.$nextBooking=this.$activity.find("#homeNextBooking"),this.$upcomingBookings=this.$activity.find("#homeUpcomingBookings"),this.$inbox=this.$activity.find("#homeInbox"),this.$performance=this.$activity.find("#homePerformance"),this.$getMore=this.$activity.find("#homeGetMore"),e(this.viewModel)});c.init=h.init,h.prototype.show=function(a){g.prototype.show.call(this,a);var b=this.viewModel,c=this.app.model;c.getUpcomingBookings().then(function(a){a.nextBookingID?c.getBooking(a.nextBookingID).then(b.nextBooking):b.nextBooking(null),b.upcomingBookings.today.quantity(a.today.quantity),b.upcomingBookings.today.time(a.today.time&&new Date(a.today.time)),b.upcomingBookings.tomorrow.quantity(a.tomorrow.quantity),b.upcomingBookings.tomorrow.time(a.tomorrow.time&&new Date(a.tomorrow.time)),b.upcomingBookings.nextWeek.quantity(a.nextWeek.quantity),b.upcomingBookings.nextWeek.time(a.nextWeek.time&&new Date(a.nextWeek.time))})};{var i=a("../models/UpcomingBookingsSummary"),j=a("../models/MailFolder"),k=a("../models/PerformanceSummary"),l=a("../models/GetMore");a("../utils/Time")}},{"../components/Activity":44,"../models/GetMore":56,"../models/MailFolder":59,"../models/PerformanceSummary":63,"../models/UpcomingBookingsSummary":69,"../testdata/messages":75,"../utils/Time":84,knockout:!1}],19:[function(a,b,c){"use strict";function d(){this.inbox=new i({topNumber:20}),this.searchText=g.observable("")}function e(b){b.inbox.messages(a("../testdata/messages").messages)}var f=a("../components/Activity"),g=a("knockout"),h=f["extends"](function(){f.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=f.createSectionNavBar("Inbox"),e(this.viewModel)});c.init=h.init;var i=a("../models/MailFolder")},{"../components/Activity":44,"../models/MailFolder":59,"../testdata/messages":75,knockout:!1}],20:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=null,this.navBar=d.createSectionNavBar(null)});c.init=e.init,e.prototype.show=function(a){d.prototype.show.call(this,a),this.app.model.user().isAnonymous()||this.app.goDashboard()}},{"../components/Activity":44}],21:[function(a,b,c){"use strict";function d(){}var e=a("../components/Activity"),f=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d,this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSubsectionNavBar("Scheduling")});c.init=f.init},{"../components/Activity":44}],22:[function(a,b,c){"use strict";function d(){this.profile=e.observable("customer")}var e=a("knockout"),f=a("../components/Activity"),g=f["extends"](function(){f.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.viewModel=new d(this.app),this.navBar=f.createSectionNavBar(null)});c.init=g.init,g.prototype.show=function(a){f.prototype.show.call(this,a),a&&a.route&&a.route.segments&&a.route.segments.length&&this.viewModel.profile(a.route.segments[0])}},{"../components/Activity":44,knockout:!1}],23:[function(a,b,c){"use strict";function d(){this.location=e.observable(new f),this.header=e.observable("Edit Location"),this.save=function(){},this.cancel=function(){}}var e=a("knockout"),f=a("../models/Location"),g=a("../components/Activity"),h=g["extends"](function(){g.apply(this,arguments),this.accessLevel=this.app.UserType.Freelancer,this.viewModel=new d(this.app),this.navBar=g.createSubsectionNavBar("Locations")});c.init=h.init,h.prototype.show=function(a){g.prototype.show.call(this,a);var b=0,c="";if(a&&(a.locationID?b=a.locationID:a.route&&a.route.segments?b=parseInt(a.route.segments[0]):a.create&&(c=a.create)),b){var d={1:new f({locationID:1,name:"Home",addressLine1:"Here Street",city:"San Francisco",postalCode:"90001",stateProvinceCode:"CA",countryID:1,isServiceRadius:!0,isServiceLocation:!1}),2:new f({locationID:1,name:"Workshop",addressLine1:"Unknow Street",city:"San Francisco",postalCode:"90001",stateProvinceCode:"CA",countryID:1,isServiceRadius:!1,isServiceLocation:!0})},e=d[b];e?(this.viewModel.location(e),this.viewModel.header("Edit Location")):(this.viewModel.location(null),this.viewModel.header("Unknow location or was deleted"))}else switch(this.viewModel.location(new f),a.create){case"serviceRadius":this.viewModel.location().isServiceRadius(!0),this.viewModel.header("Add a service radius");break;case"serviceLocation":this.viewModel.location().isServiceLocation(!0),this.viewModel.header("Add a service location");break;default:this.viewModel.location().isServiceRadius(!0),this.viewModel.location().isServiceLocation(!0),this.viewModel.header("Add a location")}}},{"../components/Activity":44,"../models/Location":58,knockout:!1}],24:[function(a,b,c){"use strict";function d(a){this.headerText=e.observable("Locations"),this.locations=e.observableArray([]),this.isSelectionMode=e.observable(!1),this.selectedLocation=e.observable(null),this.selectLocation=function(b){this.isSelectionMode()===!0?(this.selectedLocation(b),this.isSelectionMode(!1)):a.shell.go("locationEdition",{locationID:b.locationID()})}.bind(this)}var e=(a("jquery"),a("knockout")),f=a("../components/Activity"),g=f["extends"](function(){f.apply(this,arguments),this.accessLevel=this.app.UserType.Freelancer,this.viewModel=new d(this.app),this.navBar=f.createSubsectionNavBar("Scheduling"),this.$listView=this.$activity.find("#locationsListView"),this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){this.viewModel.headerText(a?"Select or add a service location":"Locations"),this.navBar.leftAction().text(a?"Booking":"Scheduling"),this.navBar.title("")}.bind(this)}),this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){this.requestInfo&&this.requestInfo.selectLocation===!0&&a===!1&&(this.requestInfo.selectedLocation=this.viewModel.selectedLocation(),this.app.shell.goBack(this.requestInfo),this.requestInfo=null)}.bind(this)}),this.viewModel.locations(a("../testdata/locations").locations)});c.init=g.init,g.prototype.show=function(a){if(f.prototype.show.call(this,a),a.selectLocation===!0)this.viewModel.isSelectionMode(!0),this.viewModel.selectedLocation(a.selectedLocation);else if(a.route&&a.route.segments){var b=a.route.segments[0];b&&("new"===b?this.app.shell.go("locationEdition",{create:a.route.segments[1]}):this.app.shell.go("locationEdition",{locationID:b}))}}},{"../components/Activity":44,"../testdata/locations":74,knockout:!1}],25:[function(a,b,c){"use strict";function d(){var a=new h;this.username=a.username,this.password=a.password,this.loginError=e.observable(""),this.isLogingIn=e.observable(!1),this.performLogin=function(){this.isLogingIn(!0)}.bind(this)}var e=(a("jquery"),a("knockout")),f=(a("../models/User"),a("../components/Activity")),g=f["extends"](function(){f.apply(this,arguments),this.accessLevel=this.app.UserType.Anonymous,this.viewModel=new d(this.app),this.navBar=f.createSectionNavBar("Log in"),this.registerHandler({target:this.viewModel.isLogingIn,handler:function(a){if(a===!0){var b=this.$activity.find('[type="submit"]');b.button("loading"),this.viewModel.loginError("");var c=function(){this.viewModel.isLogingIn(!1),b.button("reset")}.bind(this);if(this.viewModel.username.error()||this.viewModel.password.error())return this.viewModel.loginError("Review your data"),void c();this.app.model.login(this.viewModel.username(),this.viewModel.password()).then(function(){this.viewModel.loginError(""),c(),this.viewModel.username(""),this.viewModel.password(""),this.app.goDashboard()}.bind(this))["catch"](function(a){var b=a&&a.responseJSON&&a.responseJSON.errorMessage||a&&a.statusText||"Invalid username or password";this.viewModel.loginError(b),c()}.bind(this))}}.bind(this)}),this.registerHandler({target:this.viewModel.loginError,handler:function(a){var b=this.$activity.find(":input").get(0);a?b.focus():b.blur()}.bind(this)})});c.init=g.init;var h=a("../viewmodels/FormCredentials")},{"../components/Activity":44,"../models/User":70,"../viewmodels/FormCredentials":116,knockout:!1}],26:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser});c.init=e.init,e.prototype.show=function(a){d.prototype.show.call(this,a),this.app.model.logout().then(function(){var a=this.app.model.user().constructor.newAnonymous();this.app.model.user().model.updateWith(a),this.app.shell.go("/")}.bind(this))}},{"../components/Activity":44}],27:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=d.createSectionNavBar(null)});c.init=e.init},{"../components/Activity":44}],28:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=d.createSectionNavBar(null)});c.init=e.init},{"../components/Activity":44}],29:[function(a,b,c){"use strict";function d(){this.positions=f.observableArray([])}function e(a){a.positions.push(new i({positionSingular:"Massage Therapist"})),a.positions.push(new i({positionSingular:"Housekeeper"}))}var f=(a("jquery"),a("knockout")),g=a("../components/Activity"),h=g["extends"](function(){g.apply(this,arguments),this.accessLevel=this.app.UserType.Freelancer,this.viewModel=new d(this.app),this.navBar=g.createSectionNavBar("Job Titles"),e(this.viewModel)});c.init=h.init;var i=a("../models/Position")},{"../components/Activity":44,"../models/Position":64,knockout:!1}],30:[function(a,b,c){"use strict";var d=a("../components/Activity"),e=d["extends"](function(){d.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=d.createSubsectionNavBar("Account")});c.init=e.init},{"../components/Activity":44}],31:[function(a,b,c){"use strict";function d(a){var b=a.model.privacySettings,c=b.newVersion();c.isObsolete.subscribe(function(a){a&&c.pull({evenIfNewer:!0})}),this.settings=c.version,this.isLocked=b.isLocked,this.submitText=f.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b),this.discard=function(){c.pull({evenIfNewer:!0})}.bind(this),this.save=function(){c.push({evenIfObsolete:!0})}.bind(this)}var e=a("../components/Activity"),f=a("knockout"),g=(a("moment"),e["extends"](function(){e.apply(this,arguments),this.viewModel=new d(this.app),this.accessLevel=this.app.UserType.LoggedUser,this.navBar=e.createSubsectionNavBar("Account"),this.registerHandler({target:this.app.model.privacySettings,event:"error",handler:function(a){var b="save"===a.task?"Error saving privacy settings.":"Error loading privacy settings.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})}));c.init=g.init,g.prototype.show=function(a){e.prototype.show.call(this,a),this.app.model.privacySettings.sync(),this.viewModel.discard()}},{"../components/Activity":44,knockout:!1,moment:!1}],32:[function(a,b,c){"use strict";function d(){}var e=(a("knockout"),a("../components/Activity")),f=e["extends"](function(){e.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.viewModel=new d(this.app),this.navBar=e.createSectionNavBar("Scheduling")});c.init=f.init},{"../components/Activity":44,knockout:!1}],33:[function(a,b,c){"use strict";function d(a){var b=a.model.schedulingPreferences,c=b.newVersion();c.isObsolete.subscribe(function(a){a&&c.pull({evenIfNewer:!0})}),this.prefs=c.version,this.isLocked=b.isLocked,this.submitText=f.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b),this.discard=function(){c.pull({evenIfNewer:!0})}.bind(this),this.save=function(){c.push({evenIfObsolete:!0})}.bind(this),this.incrementsExample=f.pureComputed(function(){for(var a="e.g. ",b=this.incrementsSizeInMinutes(),c=g({hour:10,minute:0}),d=[c.format("HH:mm")],e=1;4>e;e++)d.push(c.add(b,"minutes").format("HH:mm"));return a+=d.join(", ")},this.prefs)}var e=a("../components/Activity"),f=a("knockout"),g=a("moment"),h=e["extends"](function(){e.apply(this,arguments),this.viewModel=new d(this.app),this.accessLevel=this.app.UserType.Freelancer,this.navBar=e.createSubsectionNavBar("Scheduling"),this.registerHandler({target:this.app.model.schedulingPreferences,event:"error",handler:function(a){var b="save"===a.task?"Error saving scheduling preferences.":"Error loading scheduling preferences.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})});c.init=h.init,h.prototype.show=function(a){e.prototype.show.call(this,a),this.app.model.schedulingPreferences.sync(),this.viewModel.discard()}},{"../components/Activity":44,knockout:!1,moment:!1}],34:[function(a,b,c){"use strict";function d(a){return a.isSelected=g.observable(!1),a}function e(){this.services=g.observableArray([]),this.isSelectionMode=g.observable(!1),this.groupedServices=g.computed(function(){var a=this.services(),b=this.isSelectionMode(),c={group:b?"Select standalone services":"Standalone services",services:[]},d={group:b?"Select add-on services":"Add-on services",services:[]},e=[c,d];return a.forEach(function(a){var b=a.isAddon();b?d.services.push(a):c.services.push(a)}),e},this),this.selectedServices=g.observableArray([]),this.toggleServiceSelection=function(a){var b=-1,c=this.selectedServices().some(function(c,d){return c===a?(b=d,!0):void 0});a.isSelected(!c),c?this.selectedServices.splice(b,1):this.selectedServices.push(a)}.bind(this),this.endSelection=function(){this.isSelectionMode(!1)}.bind(this)}var f=a("../components/Activity"),g=(a("jquery"),a("knockout")),h=f["extends"](function(){f.apply(this,arguments),this.accessLevel=this.app.UserType.Frelancer,this.navBar=f.createSubsectionNavBar("Job title"),this.viewModel=new e,this.viewModel.services(a("../testdata/services").services.map(d)),this.registerHandler({target:this.viewModel.isSelectionMode,handler:function(a){this.requestData&&this.requestData.selectServices===!0&&a===!1&&(this.requestData.selectedServices=this.viewModel.selectedServices(),this.app.shell.goBack(this.requestData),this.requestData={})}.bind(this)})});c.init=h.init,h.prototype.show=function(a){f.prototype.show.call(this,a);var b=this.requestData&&this.requestData.route,c=b&&b.segments&&b.segments[0];c=parseInt(c,10),c&&this.app.model.getUserJobTitle(c).then(function(a){return a?(this.viewModel.services(a.services()),void this.app.model.getJobTitle(c).then(function(a){return a?void this.navBar.leftAction().text(a.singularName()):void console.log("No job title")})):void console.log("No user job title")}),this.requestData.selectServices===!0&&this.viewModel.isSelectionMode(!0)}},{"../components/Activity":44,"../testdata/services":76,knockout:!1}],35:[function(a,b,c){"use strict";function d(){var a=new h;this.username=a.username,this.password=a.password,this.signupError=e.observable(""),this.isSigningUp=e.observable(!1),this.performSignup=function(){this.isSigningUp(!0)}.bind(this),this.profile=e.observable("customer")}var e=(a("jquery"),a("knockout")),f=a("../components/Activity"),g=f["extends"](function(){f.apply(this,arguments),this.accessLevel=this.app.UserType.Anonymous,this.viewModel=new d(this.app),this.navBar=f.createSectionNavBar(null),this.registerHandler({target:this.viewModel.isSigningUp,handler:function(a){if(a===!0){var b=this.$activity.find('[type="submit"]');b.button("loading"),this.viewModel.signupError("");var c=function(){this.viewModel.isSigningUp(!1),b.button("reset")}.bind(this);if(this.viewModel.username.error()||this.viewModel.password.error())return this.viewModel.signupError("Review your data"),void c();this.app.model.signup(this.viewModel.username(),this.viewModel.password(),this.viewModel.profile()).then(function(){this.viewModel.signupError(""),c(),this.viewModel.username(""),this.viewModel.password(""),this.app.goDashboard()}.bind(this))["catch"](function(a){var b=a&&a.responseJSON&&a.responseJSON.errorMessage||a&&a.statusText||"Invalid username or password";this.viewModel.signupError(b),c()}.bind(this))}}.bind(this)}),this.registerHandler({target:this.viewModel.signupError,handler:function(a){var b=this.$activity.find(":input").get(0);a?b.focus():b.blur()}})});c.init=g.init,g.prototype.show=function(a){f.prototype.show.call(this,a),a&&a.route&&a.route.segments&&a.route.segments.length&&this.viewModel.profile(a.route.segments[0])};var h=a("../viewmodels/FormCredentials")},{"../components/Activity":44,"../viewmodels/FormCredentials":116,knockout:!1}],36:[function(a,b,c){"use strict";function d(){this.headerText=e.observable("Text"),this.text=e.observable(""),this.rowsNumber=e.observable(2),this.cancel=function(){this.emit("cancel")},this.save=function(){this.emit("saved")}}var e=(a("jquery"),a("knockout")),f=a("events").EventEmitter,g=a("../components/Activity"),h=g["extends"](function(){g.apply(this,arguments),this.accessLevel=this.app.UserType.LoggedUser,this.viewModel=new d(this.app),this.navBar=g.createSubsectionNavBar(""),this.$textarea=this.$activity.find("textarea"),this.textarea=this.$textarea.get(0),this.registerHandler({target:this.viewModel,event:"saved",handler:function(){this.requestInfo&&(this.requestInfo.text=this.viewModel.text()),this.app.shell.goBack(this.requestInfo)}.bind(this)}),this.registerHandler({target:this.viewModel,event:"cancel",handler:function(){this.app.shell.goBack()}.bind(this)})});c.init=h.init,h.prototype.show=function(a){g.prototype.show.call(this,a),this.navBar.leftAction().text(a.title||""),this.viewModel.headerText(a.header),this.viewModel.text(a.text),a.rowsNumber&&this.viewModel.rowsNumber(a.rowsNumber),this.textarea.focus(),this.$textarea.click()},d._inherits(f)},{"../components/Activity":44,events:!1,knockout:!1}],37:[function(a,b,c){"use strict";function d(a){var b=a.model.simplifiedWeeklySchedule,c=b.newVersion();c.isObsolete.subscribe(function(a){a&&c.pull({evenIfNewer:!0})}),this.schedule=c.version,this.isLocked=b.isLocked,this.submitText=f.pureComputed(function(){return this.isLoading()?"loading...":this.isSaving()?"saving...":"Save"},b),this.discard=function(){c.pull({evenIfNewer:!0})},this.save=function(){c.push({evenIfObsolete:!0})}}var e=a("../components/Activity"),f=a("knockout"),g=(a("moment"),e["extends"](function(){e.apply(this,arguments),this.viewModel=new d(this.app),this.accessLevel=this.app.UserType.Freelancer,this.navBar=e.createSubsectionNavBar("Scheduling"),this.registerHandler({target:this.app.model.simplifiedWeeklySchedule,event:"error",handler:function(a){var b="save"===a.task?"Error saving your weekly schedule.":"Error loading your weekly schedule.";this.app.modals.showError({title:b,error:a&&a.task&&a.error||a})}.bind(this)})}));c.init=g.init,g.prototype.show=function(a){e.prototype.show.call(this,a),this.app.model.simplifiedWeeklySchedule.sync(),this.viewModel.discard()}},{"../components/Activity":44,knockout:!1,moment:!1}],38:[function(a,b,c){"use strict";function d(a){return"function"==typeof a?a:e.observable(a)}var e=a("knockout"),f=a("./utils/jsPropertiesTools");c.registerAll=function(){e.components.register("app-navbar-action",{template:{element:"navbar-action-template"},viewModel:function(a){f.defineGetter(this,"action",function(){return a.action&&a.navBar()?a.navBar()[a.action]():null})}}),e.components.register("app-unlabeled-input",{template:{element:"unlabeled-input-template"},viewModel:function(a){this.value=d(a.value),this.placeholder=d(a.placeholder),this.disable=d(a.disable)}}),e.components.register("app-feedback-entry",{template:{element:"feedback-entry-template"},viewModel:function(a){this.section=d(a.section||""),this.url=e.pureComputed(function(){return"/feedback/"+this.section()},this)}})}},{"./utils/jsPropertiesTools":93,knockout:!1}],39:[function(a,b,c){"use strict";var d=a("knockout"),e=a("jquery"),f=a("./viewmodels/NavBar"),g=a("./viewmodels/NavAction");c["extends"]=function(a){function b(){var b=a.model.user();b.isAnonymous()&&a.navBar().rightAction(g.menuOut)}a.navBar=d.observable(null);var c=function(){e(".AppNav").trigger("contentChange")},h=function(a){a&&(a.text.subscribe(c),a.isTitle.subscribe(c),a.icon.subscribe(c),a.isMenu.subscribe(c))};a.updateAppNav=function(d){a.navBar("navBar"in d?d.navBar:new f),b(),c(),h(a.navBar().leftAction()),h(a.navBar().rightAction())},a.updateMenu=function(a){var b=e(".App-menus .navbar-collapse");b.find("li").removeClass("active"),b.find(".go-"+a).closest("li").addClass("active"),b.filter(":visible").collapse("hide")}}},{"./viewmodels/NavAction":117,"./viewmodels/NavBar":118,knockout:!1}],40:[function(a,b){"use strict";b.exports={calendar:a("./activities/calendar"),datetimePicker:a("./activities/datetimePicker"),clients:a("./activities/clients"),services:a("./activities/services"),locations:a("./activities/locations"),textEditor:a("./activities/textEditor"),home:a("./activities/home"),appointment:a("./activities/appointment"),bookingConfirmation:a("./activities/bookingConfirmation"),index:a("./activities/index"),login:a("./activities/login"),logout:a("./activities/logout"),learnMore:a("./activities/learnMore"),signup:a("./activities/signup"),contactInfo:a("./activities/contactInfo"),onboardingPositions:a("./activities/onboardingPositions"),onboardingHome:a("./activities/onboardingHome"),locationEdition:a("./activities/locationEdition"),onboardingComplete:a("./activities/onboardingComplete"),account:a("./activities/account"),inbox:a("./activities/inbox"),conversation:a("./activities/conversation"),scheduling:a("./activities/scheduling"),jobtitles:a("./activities/jobtitles"),feedback:a("./activities/feedback"),faqs:a("./activities/faqs"),feedbackForm:a("./activities/feedbackForm"),contactForm:a("./activities/contactForm"),cms:a("./activities/cms"),clientEdition:a("./activities/clientEdition"),schedulingPreferences:a("./activities/schedulingPreferences"),calendarSyncing:a("./activities/calendarSyncing"),weeklySchedule:a("./activities/weeklySchedule"),bookMeButton:a("./activities/bookMeButton"),ownerInfo:a("./activities/ownerInfo"),privacySettings:a("./activities/privacySettings")}},{"./activities/account":2,"./activities/appointment":3,"./activities/bookMeButton":4,"./activities/bookingConfirmation":5,"./activities/calendar":6,"./activities/calendarSyncing":7,"./activities/clientEdition":8,"./activities/clients":9,"./activities/cms":10,"./activities/contactForm":11,"./activities/contactInfo":12,"./activities/conversation":13,"./activities/datetimePicker":14,"./activities/faqs":15,"./activities/feedback":16,"./activities/feedbackForm":17,"./activities/home":18,"./activities/inbox":19,"./activities/index":20,"./activities/jobtitles":21,"./activities/learnMore":22,"./activities/locationEdition":23,"./activities/locations":24,"./activities/login":25,"./activities/logout":26,"./activities/onboardingComplete":27,"./activities/onboardingHome":28,"./activities/onboardingPositions":29,"./activities/ownerInfo":30,"./activities/privacySettings":31,"./activities/scheduling":32,"./activities/schedulingPreferences":33,"./activities/services":34,"./activities/signup":35,"./activities/textEditor":36,"./activities/weeklySchedule":37}],41:[function(a){"use strict";function b(){function a(a){var b,d=a.attr("data-target")||(b=a.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"");return c(d)}c(document).on("click.bs.collapse.data-api.workaround",'[data-toggle="collapse"]',function(){var b=c(this),d=a(b),e=d&&d.data("bs.collapse");e&&(e.$trigger=b)})}var c=a("jquery");a("jquery-mobile"),a("./utils/jquery.multiline");var d=a("knockout");d.bindingHandlers.format=a("ko/formatBinding").formatBinding;var e=a("./utils/bootknockBindingHelpers");a("./utils/Function.prototype._inherits"),a("./utils/Function.prototype._delayed"),a("es6-promise").polyfill();var f=a("layoutUpdateEvent"),g=(a("./viewmodels/NavBar"),a("./viewmodels/NavAction"),a("./viewmodels/AppModel"));a("./locales/en-US-LC");var h={shell:a("./app.shell"),model:new g,activities:a("./app.activities"),modals:a("./app.modals"),goDashboard:function j(){j._going!==!0&&setTimeout(function(){j._going=!0;var a=this.model.user().onboardingStep();this.shell.go(a?"onboardingHome/"+a:"home"),setTimeout(function(){j._going=!1},1)}.bind(this),1)}};a("./app-navbar")["extends"](h),a("./app-components").registerAll(),h.getActivity=function(a){var b=this.activities[a];if(b){var c=this.shell.items.find(a);if(c&&c.length)return b.init(c,this)}return null},h.getActivityControllerByRoute=function(a){var b=a.name||this.shell.indexName;return this.getActivity(b)},h.shell.accessControl=a("./utils/accessControl")(h),h.UserType=h.model.user().constructor.UserType;var i=function(){f.layoutUpdateEvent+=" orientationchange",f.on();var g=function(){c(window).trigger("layoutUpdate")};window.addEventListener("native.keyboardshow",g),window.addEventListener("native.keyboardhide",g),window.StatusBar&&window.StatusBar.overlaysWebView(!1);var i=!1;window.device&&/iOS|iPad|iPhone|iPod/i.test(window.device.platform)&&(i=!0);var j=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(j){var k=function(){return window.innerHeight};c("html").height(k()+"px"),c(window).on("layoutUpdate",function(){c("html").height(k()+"px")})}!function(){var a=c("body"),b=function(){var b=a.height();c(".full-height").css("height","auto").css("min-height",b).css("height",function(){return c(this).outerHeight(!1)})};b(),c(window).on("layoutUpdate",function(){b()})}(),setTimeout(function(){c(window).trigger("layoutUpdate")},200),b(),a("bootstrap"),e.plugIn(d),a("./utils/bootstrapSwitchBinding").plugIn(d),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&window.cordova.plugins.Keyboard.disableScroll(!0),c(document).on("tap","[data-shell]",function(a){var b=c(this).attr("data-shell")||"",d=b.split(" "),e=d[0];e&&"function"==typeof h.shell[e]&&(h.shell[e].apply(h.shell,d.slice(1)),a.stopImmediatePropagation(),a.preventDefault())}),window.cordova&&c(document).on("tap",'[target="_blank"], [target="_system"]',function(a){window.open(this.getAttribute("href"),this.getAttribute("target")),a.preventDefault()}),h.shell.on(h.shell.events.itemReady,function(a,b){var c=a.data("activity"),d=h.getActivity(c);d.show(b);var e=d.menuItem||c;h.updateMenu(e),h.updateAppNav(d)}),h.shell.on(h.shell.events.closed,function(a){var b=a.data("activity"),c=h.getActivity(b);c.hide&&c.hide()}),d.applyBindings({navBar:h.navBar},c(".AppNav").get(0));var l=a("./components/SmartNavBar"),m=l.getAll();m.forEach(function(a){c(a.el).on("contentChange",function(){a.refresh()})});var n=!1;c(document).on("show.bs.collapse hide.bs.collapse",".AppNav .navbar-collapse",function(a){if(!n){n=!0;var b="show"===a.type;c("body").toggleClass("use-backdrop",b),c(".collapsing, .collapse.in").collapse("hide"),n=!1}});var o=function(a){window.alert("There was an error loading: "+a&&a.message||a)};h.model.init().then(h.shell.run.bind(h.shell),o).then(function(){c("html").addClass("is-ready"),window.navigator&&window.navigator.splashscreen&&window.navigator.splashscreen.hide()},o),window.app=h};c(window.cordova?function(){c(document).on("deviceready",i)}:i)},{"./app-components":38,"./app-navbar":39,"./app.activities":40,"./app.modals":42,"./app.shell":43,"./components/SmartNavBar":46,"./locales/en-US-LC":47,"./utils/Function.prototype._delayed":79,"./utils/Function.prototype._inherits":80,"./utils/accessControl":85,"./utils/bootknockBindingHelpers":87,"./utils/bootstrapSwitchBinding":88,"./utils/jquery.multiline":92,"./viewmodels/AppModel":110,"./viewmodels/NavAction":117,"./viewmodels/NavBar":118,"es6-promise":!1,knockout:!1}],42:[function(a,b,c){"use strict";var d=a("jquery");c.getErrorMessageFrom=function(a){if(a){if("string"==typeof a)return a;a=a.responseJSON||a;var b=a.name&&a.name+": "||"";return b+=a.errorMessage||a.message||"",a.errors?Array.isArray(a.errors)?b+="\n"+a.errors.join("\n"):Object.keys(a.errors).forEach(function(c){b+="\n"+a.errors[c].join("\n")}):b+="\nTechnical details: "+JSON.stringify(a),b}return"Unknow error"},c.showError=function(a){var b=d("#errorModal"),e=b.find("#errorModal-label"),f=b.find("#errorModal-body");a=a||{};var g=f.data("default-text");a.error?g=c.getErrorMessageFrom(a.error):a.message&&(g=a.message),f.multiline(g),e.text(a.title||e.data("default-text")),b.modal("show")}},{}],43:[function(a,b){"use strict";var c=window.location.pathname,d=a("./utils/shell/hashbangHistory"),e=a("./utils/shell/index"),f=e.Shell,g=e.DomItemsManager,h=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),e=new f({root:"body",baseUrl:c,forceHashbang:!0,indexName:"index",linkEvent:h?"tap":"click",loader:null,history:d,domItemsManager:new g({idAttributeName:"data-activity"})});e.on("error",function(a){var b="Unknow error";a&&(b="string"==typeof a?a:a.message?a.message:JSON.stringify(a)),window.alert(b)}),b.exports=e},{"./utils/shell/hashbangHistory":98,"./utils/shell/index":99}],44:[function(a,b){"use strict";function c(a,b){this.$activity=a,this.app=b,this.accessLevel=b.UserType.None,this.viewState={},this.requestData=null,this.navBar=new f({title:null,leftAction:null,rightAction:null}),setTimeout(function(){d.applyBindings(this.viewModel||{},a.get(0))}.bind(this),1)}var d=a("knockout"),e=a("../viewmodels/NavAction"),f=a("../viewmodels/NavBar");a("../utils/Function.prototype._inherits"),b.exports=c,c.prototype.show=function(a){a=a||{},this.requestData=a,this._handlers&&this._handlersAreConnected!==!0&&(this._handlers.forEach(function(a){if(!a.event&&a.target.subscribe){var b=a.target.subscribe(a.handler);a._subscription=b,a._latestSubscribedValue!==a.target()&&a.handler.call(a.target,a.target())}else a.selector?a.target.on(a.event,a.selector,a.handler):a.target.on(a.event,a.handler)}),this._handlersAreConnected=!0)},c.prototype.hide=function(){this._handlers&&(this._handlers.forEach(function(a){a._subscription?(a._subscription.dispose(),a._latestSubscribedValue=a.target()):a.target.off?a.selector?a.target.off(a.event,a.selector,a.handler):a.target.off(a.event,a.handler):a.target.removeListener(a.event,a.handler)}),this._handlersAreConnected=!1)},c.prototype.registerHandler=function(a){if(!a)throw new Error("Register require a settings object");if(!a.target||!a.target.on&&!a.target.subscribe)throw new Error("Target is null or not a jQuery, EventEmmiter or Observable object");if("function"!=typeof a.handler)throw new Error("Handler must be a function.");if(!a.event&&!a.target.subscribe)throw new Error("Event is null; it's required for non observable objects");this._handlers=this._handlers||[],this._handlers.push(a)},c.NavBar=f,c.NavAction=e,c.createSectionNavBar=function(a){return new f({title:a,leftAction:e.menuNewItem,rightAction:e.menuIn})},c.createSubsectionNavBar=function(a,b){b=b||{};var c={text:a,isTitle:!0};return b.backLink&&(c.link=b.backLink,c.isShell=!1),new f({title:"",leftAction:e.goBack.model.clone(c),rightAction:b.helpId?e.goHelpIndex.model.clone({link:"#"+b.helpId}):e.goHelpIndex})};var g=function h(a,b,c){if(h.instances=h.instances||{},h.instances[a.name]instanceof a)return h.instances[a.name];var d=new a(b,c);return h.instances[a.name]=d,d};c["extends"]=function(a){return a._inherits(c),a.init=g.bind(null,a),a}},{"../utils/Function.prototype._inherits":80,"../viewmodels/NavAction":117,"../viewmodels/NavBar":118,knockout:!1}],45:[function(a,b,c){var d=a("jquery"),e={component:"DatePicker",months:"DatePicker-months",days:"DatePicker-days",monthDay:"day",month:"month",year:"year",years:"DatePicker-years"},f=function(a,b){if(this.element=d(a),this.format=g.parseFormat(b.format||this.element.data("date-format")||"mm/dd/yyyy"),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isPlaceholder=this.element.is(".calendar-placeholder"),this.picker=d(g.template).appendTo(this.isPlaceholder?this.element:"body").on("click tap",d.proxy(this.click,this)),this.picker.addClass(this.isPlaceholder?"container":"dropdown-menu"),this.isPlaceholder?(this.picker.show(),"today"==this.element.data("date")&&(this.date=new Date,this.set()),this.element.trigger({type:"show",date:this.date})):this.isInput?this.element.on({focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this)}):this.component?this.component.on("click tap",d.proxy(this.show,this)):this.element.on("click tap",d.proxy(this.show,this)),this.element.on("swipeleft",function(a){a.preventDefault(),this.moveDate("next")
}.bind(this)).on("swiperight",function(a){a.preventDefault(),this.moveDate("prev")}.bind(this)),this.minViewMode=b.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=b.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=b.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=b.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};f.prototype={constructor:f,show:function(a){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),d(window).on("resize",d.proxy(this.place,this)),a&&(a.stopPropagation(),a.preventDefault()),!this.isInput;var b=this;d(document).on("mousedown",function(a){0===d(a.target).closest("."+e.component).length&&b.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),d(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||d(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var a=g.formatDate(this.date,this.format);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setValue:function(a,b){this.date="string"==typeof a?g.parseDate(a,this.format):new Date(a),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill(),b!==!0&&this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})},getValue:function(){return this.date},moveValue:function(a,b){return-1!=["prev","next"].indexOf(a&&a.toLowerCase())?(b=b?g.modesSet[b]:g.modes[this.viewMode],this.date["set"+b.navFnc].call(this.date,this.date["get"+b.navFnc].call(this.date)+b.navStep*("prev"===a?-1:1)),this.setValue(this.date),this.date):void 0},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},update:function(a){this.date=g.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+g.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find("."+e.days+" thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="'+e.month+'">'+g.dates.monthsShort[b++]+"</span>";this.picker.find("."+e.months+" td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),c=a.getMonth(),d=this.date.valueOf();this.picker.find("."+e.days+" th:eq(1)").html(g.dates.months[c]+" "+b);var f=new Date(b,c-1,28,0,0,0,0),h=g.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(h),f.setDate(h-(f.getDay()-this.weekStart+7)%7);var i=new Date(f);i.setDate(i.getDate()+42),i=i.valueOf();var j,k,l,m=[];if(this._daysCreated!==!0){for(;f.valueOf()<i;)f.getDay()===this.weekStart&&m.push("<tr>"),j=this.onRender(f),k=f.getFullYear(),l=f.getMonth(),c>l&&k===b||b>k?j+=" old":(l>c&&k===b||k>b)&&(j+=" new"),f.valueOf()===d&&(j+=" active"),m.push('<td class="'+e.monthDay+" "+j+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&m.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find("."+e.days+" tbody").empty().append(m.join("")),this._daysCreated=!0}else for(var n=this.picker.find("."+e.days+" tbody tr:first-child()"),o=null;f.valueOf()<i;){var p=f.getDay()-this.weekStart;j=this.onRender(f),k=f.getFullYear(),l=f.getMonth(),c>l&&k===b||b>k?j+=" old":(l>c&&k===b||k>b)&&(j+=" new"),f.valueOf()===d&&(j+=" active"),o=n.find("td:eq("+p+")"),o.attr("class","day "+j).text(f.getDate()),f.getDay()===this.weekEnd&&(n=n.next("tr")),f.setDate(f.getDate()+1)}var q=this.date.getFullYear(),r=this.picker.find("."+e.months).find("th:eq(1)").html(b).end().find("span").removeClass("active");q===b&&r.eq(this.date.getMonth()).addClass("active"),m="",b=10*parseInt(b/10,10);var s=this.picker.find("."+e.years).find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;var t;if(this._yearsCreated!==!0){for(t=-1;11>t;t++)m+='<span class="'+e.year+(-1===t||10===t?" old":"")+(q===b?" active":"")+'">'+b+"</span>",b+=1;s.html(m),this._yearsCreated=!0}else{var u=s.find("span:first-child()");for(t=-1;11>t;t++)u.text(b).attr("class","year"+(-1===t||10===t?" old":"")+(q===b?" active":"")),b+=1,u=u.next()}},moveDate:function(a,b){-1!=["prev","next"].indexOf(a&&a.toLowerCase())&&(b=b||this.viewMode,this.viewDate["set"+g.modes[b].navFnc].call(this.viewDate,this.viewDate["get"+g.modes[b].navFnc].call(this.viewDate)+g.modes[b].navStep*("prev"===a?-1:1)),this.fill(),this.set())},click:function(a){a.stopPropagation(),a.preventDefault();var b=d(a.target).closest("span, td, th");if(1===b.length){var c,f;switch(b[0].nodeName.toLowerCase()){case"th":switch(b[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.moveDate(b[0].className)}break;case"span":b.is("."+e.month)?(c=b.parent().find("span").index(b),this.viewDate.setMonth(c)):(f=parseInt(b.text(),10)||0,this.viewDate.setFullYear(f)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(b.is(".day")&&!b.is(".disabled")){var h=parseInt(b.text(),10)||1;c=this.viewDate.getMonth(),b.is(".old")?c-=1:b.is(".new")&&(c+=1),f=this.viewDate.getFullYear(),this.date=new Date(f,c,h,0,0,0,0),this.viewDate=new Date(f,c,Math.min(28,h),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})}}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter("."+e.component+"-"+g.modes[this.viewMode].clsName).show()}},d.fn.datepicker=function(a){var b,c=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=d(this),g=e.data("datepicker"),h="object"==typeof a&&a;return g||e.data("datepicker",g=new f(this,d.extend({},d.fn.datepicker.defaults,h))),"string"==typeof a?(b=g[a].apply(g,c),!1):void 0}),"undefined"!=typeof b?b:this},d.fn.datepicker.defaults={onRender:function(){return""}},d.fn.datepicker.Constructor=f;var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"day",navFnc:"Date",navStep:1}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,g.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a,b){var c,d=a.split(b.separator);if(a=new Date,a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),d.length===b.parts.length){for(var e=a.getFullYear(),f=a.getDate(),g=a.getMonth(),h=0,i=b.parts.length;i>h;h++)switch(c=parseInt(d[h],10)||1,b.parts[h]){case"dd":case"d":f=c,a.setDate(c);break;case"mm":case"m":g=c-1,a.setMonth(c-1);break;case"yy":e=2e3+c,a.setFullYear(2e3+c);break;case"yyyy":e=c,a.setFullYear(c)}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m,a=[];for(var d=0,e=b.parts.length;e>d;d++)a.push(c[b.parts[d]]);return a.join(b.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};g.template='<div class="'+e.component+'"><div class="'+e.days+'"><table class=" table-condensed">'+g.headTemplate+'<tbody></tbody></table></div><div class="'+e.months+'"><table class="table-condensed">'+g.headTemplate+g.contTemplate+'</table></div><div class="'+e.years+'"><table class="table-condensed">'+g.headTemplate+g.contTemplate+"</table></div></div>",g.modesSet={date:g.modes[3],month:g.modes[0],year:g.modes[1],decade:g.modes[2]},c.DatePicker=f,c.defaults=g,c.utils=g},{}],46:[function(a,b,c){var d=a("jquery"),e=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},f=function(a){var b=a.parentNode.querySelectorAll(".SmartNavBar-edge.left")[0],c=a.parentNode.querySelectorAll(".SmartNavBar-edge.right")[0];"undefined"==typeof b&&(b={offsetWidth:0,className:""}),"undefined"==typeof c&&(c={offsetWidth:0,className:""});var d=Math.max(b.offsetWidth,c.offsetWidth);a.style.marginLeft=d+"px",a.style.marginRight=d+"px";var f=a.offsetWidth<a.scrollWidth?!0:!1;f&&(b.offsetWidth<c.offsetWidth?(a.style.marginLeft=b.offsetWidth+"px",a.style.textAlign="right"):(a.style.marginRight=c.offsetWidth+"px",a.style.textAlign="left"),f=a.offsetWidth<a.scrollWidth?!0:!1,f&&(new RegExp("arrow").test(b.className)&&(e(b.childNodes[1]),a.style.marginLeft="26px"),new RegExp("arrow").test(c.className)&&(e(c.childNodes[1]),a.style.marginRight="26px")))};c.textboxResize=f;var g=function(a){this.el=a,this.refresh=function(){var b=d(a).children("h1").get(0);b&&f(b)},this.refresh()};c.SmartNavBar=g,c.getAll=function(){var a=d(".SmartNavBar");return d.map(a,function(a){return new g(a)})},c.refreshAll=function(){d(".SmartNavBar > h1").each(function(){f(this)})}},{}],47:[function(a){"use strict";var b=a("moment"),c=b.locale();b.locale("en-US-LC",{meridiemParse:/[ap]\.?\.?/i,meridiem:function(a,b,c){return a>11?c?"p":"P":c?"a":"A"},calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"[last] dddd",nextWeek:"dddd",sameElse:"M/D"},longDateFormat:{LT:"h:mma",LTS:"h:mm:ssa",L:"MM/DD/YYYY",l:"M/D/YYYY",LL:"MMMM Do YYYY",ll:"MMM D YYYY",LLL:"MMMM Do YYYY LT",lll:"MMM D YYYY LT",LLLL:"dddd, MMMM Do YYYY LT",llll:"ddd, MMM D YYYY LT"}}),b.locale(c)},{moment:!1}],48:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({addressID:0,addressName:"",jobTitleID:0,userID:0,addressLine1:null,addressLine2:null,postalCode:null,city:null,stateProvinceCode:null,stateProviceName:null,countryCode:null,latitude:null,longitude:null,specialInstructions:null,isServiceArea:!1,isServiceLocation:!1,serviceRadius:0,createdDate:null,updatedDate:null,kind:""},a),this.singleLine=d.computed(function(){var a=[this.addressLine1(),this.city(),this.postalCode(),this.stateProvinceCode()];return a.filter(function(a){return!!a}).join(", ")},this);var b={US:"United States",ES:"Spain"};this.countryName=d.computed(function(){return b[this.countryCode()]||"unknow"},this),this.latlng=d.computed(function(){return{lat:this.latitude(),lng:this.longitude()}},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":62,knockout:!1}],49:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({id:null,startTime:null,endTime:null,summary:"New booking",subtotalPrice:0,feePrice:0,pfeePrice:0,totalPrice:0,ptotalPrice:0,preNotesToClient:null,postNotesToClient:null,preNotesToSelf:null,postNotesToSelf:null},a),a=a||{},this.client=d.observable(a.client?new f(a.client):null),this.location=d.observable(new g(a.location)),this.locationSummary=d.computed(function(){return this.location().singleLine()},this),this.services=d.observableArray((a.services||[]).map(function(a){return a instanceof h?a:new h(a)})),this.servicesSummary=d.computed(function(){return this.services().map(function(a){return a.name()}).join(", ")},this),this.services.subscribe(function(a){this.ptotalPrice(a.reduce(function(a,b){return a+b.price()},0))}.bind(this)),this.displayedDate=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").calendar()},this),this.displayedStartTime=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").format("LT")},this),this.displayedEndTime=d.pureComputed(function(){return i(this.endTime()).locale("en-US-LC").format("LT")},this),this.displayedTimeRange=d.pureComputed(function(){return this.displayedStartTime()+"-"+this.displayedEndTime()},this),this.itStarted=d.pureComputed(function(){return this.startTime()&&new Date>=this.startTime()},this),this.itEnded=d.pureComputed(function(){return this.endTime()&&new Date>=this.endTime()},this),this.isNew=d.pureComputed(function(){return!this.id()},this),this.stateHeader=d.pureComputed(function(){var a="";return this.isNew()||(a=this.itStarted()?this.itEnded()?"Completed:":"Now:":"Upcoming:"),a},this)}var d=a("knockout"),e=a("./Model"),f=a("./Client"),g=a("./Location"),h=a("./Service"),i=a("moment");b.exports=c},{"./Client":55,"./Location":58,"./Model":62,"./Service":67,knockout:!1,moment:!1}],50:[function(a,b){"use strict";function c(a){g(this),this.model.defProperties({bookingID:0,bookingRequestID:0,confirmedDateID:null,totalPricePaidByCustomer:null,totalServiceFeesPaidByCustomer:null,totalPaidToFreelancer:null,totalServiceFeesPaidByFreelancer:null,bookingStatusID:null,pricingAdjustmentApplied:!1,reviewedByFreelancer:!1,reviewedByCustomer:!1,createdDate:null,updatedDate:null,bookingRequest:null},a),this.bookingRequest(new d(a&&a.bookingRequest))}function d(a){g(this),this.model.defProperties({bookingRequestID:0,bookingTypeID:0,customerUserID:0,freelancerUserID:0,jobTitleID:0,pricingEstimateID:0,bookingRequestStatusID:0,specialRequests:null,preferredDateID:null,alternativeDate1ID:null,alternativeDate2ID:null,addressID:null,cancellationPolicyID:null,instantBooking:!1,createdDate:null,updatedDate:null,pricingEstimate:null},a),this.pricingEstimate(new e(a&&a.pricingEstimate))}function e(a){g(this),this.model.defProperties({pricingEstimateID:0,pricingEstimateRevision:0,serviceDurationHours:null,firstSessionDurationHours:null,subtotalPrice:null,feePrice:null,totalPrice:null,pFeePrice:null,subtotalRefunded:null,feeRefunded:null,totalRefunded:null,dateRefunded:null,createdDate:null,updatedDate:null,details:[]},a),Array.isArray(a.details)&&this.details(a.details.map(function(a){return new f(a)}))}function f(a){g(this),this.model.defProperties({freelancerPricingID:0,freelancerPricingDataInput:null,customerPricingDataInput:null,hourlyPrice:null,subtotalPrice:null,feePrice:null,totalPrice:null,serviceDurationHours:null,firstSessionDurationHours:null,createdDate:null,updatedDate:null},a)}var g=(a("knockout"),a("./Model"));b.exports=c},{"./Model":62,knockout:!1}],51:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({quantity:0,concept:"",time:null,timeFormat:" [@] h:mma"},a),this.phrase=d.pureComputed(function(){var a=this.timeFormat()&&this.time()&&f(this.time()).format(this.timeFormat())||"";return this.concept()+a},this),this.url=d.pureComputed(function(){var a=this.time()&&"/calendar/"+this.time().toISOString();return a},this)}var d=a("knockout"),e=a("./Model"),f=a("moment");b.exports=c},{"./Model":62,knockout:!1,moment:!1}],52:[function(a,b){"use strict";function c(a){g(this),this.model.defProperties({frequencyTypeID:0,interval:1,until:null,count:null,ending:null,selectedWeekDays:[],monthlyWeekDay:!1,incompatible:!1,tooMany:!1},a)}function d(a){g(this),this.model.defProperties({startTime:null,endTime:null},a)}function e(a){g(this),this.model.defProperties({calendarEventID:0,userID:0,eventTypeID:3,summary:"",availabilityTypeID:0,startTime:null,endTime:null,kind:0,isAllDay:!1,timeZone:"Z",location:null,updatedDate:null,createdDate:null,description:"",readOnly:!1},a),this.recurrenceRule=f.observable(a&&a.recurrenceRule&&new c(a.recurrenceRule)),this.recurrenceOccurrences=f.observableArray([]),a&&a.recurrenceOccurrences&&a.recurrenceOccurrences.forEach(function(a){this.RecurrenceOccurrences.push(new d(a))}.bind(this))}{var f=a("knockout"),g=a("./Model");a("moment")}b.exports=e,e.RecurrenceRule=c,e.RecurrenceOccurrence=d},{"./Model":62,knockout:!1,moment:!1}],53:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({startTime:null,endTime:null,subject:"",description:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}{var d=(a("knockout"),a("./Model"));a("./Client")}b.exports=c},{"./Client":55,"./Model":62,knockout:!1}],54:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({icalExportUrl:"",icalImportUrl:""},a)}var d=(a("knockout"),a("./Model"));b.exports=c},{"./Model":62,knockout:!1}],55:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({id:0,firstName:"",lastName:"",email:"",mobilePhone:null,alternatePhone:null,birthMonthDay:null,birthMonth:null,notesAboutClient:null},a),this.fullName=d.pureComputed(function(){return this.firstName()+" "+this.lastName()},this),this.birthDay=d.pureComputed(function(){return this.birthMonthDay()&&this.birthMonth()?this.birthMonth()+"/"+this.birthMonthDay():null},this),this.phoneNumber=d.pureComputed({read:function(){var a=this.mobilePhone(),b=this.alternatePhone();return a?a:b},write:function(){},owner:this}),this.canReceiveSms=d.pureComputed({read:function(){var a=this.mobilePhone();return a?!0:!1},write:function(){},owner:this})}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":62,knockout:!1}],56:[function(a,b){"use strict";function c(){e(this),this.model.defProperties({availability:!1,payments:!1,profile:!1,coop:!0});var a={availability:new f({contentLine1:"Complete your availability to create a cleaner calendar",markerIcon:"glyphicon glyphicon-calendar",actionIcon:"glyphicon glyphicon-chevron-right"}),payments:new f({contentLine1:"Start accepting payments through Loconomics",markerIcon:"glyphicon glyphicon-usd",actionIcon:"glyphicon glyphicon-chevron-right"}),profile:new f({contentLine1:"Activate your profile in the marketplace",markerIcon:"glyphicon glyphicon-user",actionIcon:"glyphicon glyphicon-chevron-right"}),coop:new f({contentLine1:"Learn more about our cooperative",actionIcon:"glyphicon glyphicon-chevron-right"})};this.items=d.pureComputed(function(){var b=[];return Object.keys(a).forEach(function(c){this[c]()&&b.push(a[c])}.bind(this)),b},this)}var d=a("knockout"),e=a("./Model"),f=a("./ListViewItem");b.exports=c},{"./ListViewItem":57,"./Model":62,knockout:!1}],57:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({markerLine1:null,markerLine2:null,markerIcon:null,contentLine1:"",contentLine2:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}{var d=(a("knockout"),a("./Model"));a("moment")}b.exports=c},{"./Model":62,knockout:!1,moment:!1}],58:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({locationID:0,name:"",addressLine1:null,addressLine2:null,city:null,stateProvinceCode:null,stateProviceID:null,postalCode:null,postalCodeID:null,countryID:null,latitude:null,longitude:null,specialInstructions:null,isServiceRadius:!1,isServiceLocation:!1,serviceRadius:0},a),this.singleLine=d.computed(function(){var a=[this.addressLine1(),this.city(),this.postalCode(),this.stateProvinceCode()];return a.filter(function(a){return!!a}).join(", ")},this),this.countryName=d.computed(function(){return 1===this.countryID()?"United States":2===this.countryID()?"Spain":"unknow"},this),this.countryCodeAlpha2=d.computed(function(){return 1===this.countryID()?"US":2===this.countryID()?"ES":""},this),this.latlng=d.computed(function(){return{lat:this.latitude(),lng:this.longitude()}},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":62,knockout:!1}],59:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({messages:[],topNumber:10},a),this.top=d.pureComputed(function(a){return a&&this.topNumber(a),f.first(this.messages(),this.topNumber())},this)}var d=a("knockout"),e=a("./Model"),f=(a("moment"),a("lodash"));b.exports=c},{"./Model":62,knockout:!1,lodash:!1,moment:!1}],60:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({userID:0,publicBio:"",freelancerProfileUrlSlug:"",freelancerProfileUrl:"",freelancerWebsiteUrl:"",bookCode:"",createdDate:null,updatedDate:null},a)}var d=(a("knockout"),a("./Model"));b.exports=c},{"./Model":62,knockout:!1}],61:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({id:0,createdDate:null,updatedDate:null,subject:"",content:null,link:"#",actionIcon:null,actionText:null,classNames:""},a),this.displayedDate=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").calendar()},this),this.displayedTime=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").format("LT")},this)}var d=a("knockout"),e=a("./Model"),f=a("moment");b.exports=c},{"./Model":62,knockout:!1,moment:!1}],62:[function(a,b){"use strict";function c(a){if(!(this instanceof c)){var b=new c(a);return a.model=b,b}this.modelObject=a,this.propertiesList=[],this.fieldsList=[],this.mappingOptions={},this.dataTimestamp=d.observable(new Date).extend({rateLimit:0})}var d=a("knockout");d.mapping=a("knockout.mapping");var e=a("jquery"),f=function(a){return e.extend(!0,{},a)};b.exports=c,c.prototype.defProperties=function(a,b){b=b||{};var c=this.modelObject,e=this.propertiesList,f=this.dataTimestamp;Object.keys(a).forEach(function(g){var h=a[g];c[g]=Array.isArray(h)?d.observableArray(h):d.observable(h),c[g]._defaultValue=h,c[g]._initialValue=b[g],"undefined"!=typeof b[g]&&c[g](b[g]),c[g].subscribe(function(){f(new Date)}),e.push(g)}),f(new Date)},c.prototype.defFields=function(a,b){b=b||{};var c=this.modelObject,d=this.fieldsList;Object.keys(a).each(function(e){var f=a[e];c[e]=f,"undefined"!=typeof b[e]&&(c[e]=b[e]),d.push(e)})},c.prototype.defID=function(a){if(this.idFieldsNames=a,1===a.length){var b=a[0];this.modelObject.id=d.pureComputed(function(){return this[b]()},this.modelObject)}else this.modelObject.id=d.pureComputed(function(){return a.map(function(){return this[b]()}.bind(this))},this.modelObject)},c.prototype.regTimestamp=function(a){var b=this.modelObject[a];if("function"!=typeof b)throw new Error("There is no observable property with name ["+a+"] to register as timestamp.");this.dataTimestamp.subscribe(function(a){b(a)})},c.prototype.toPlainObject=function(a){function b(b,e){"object"==typeof e?a===!0?d[b]=e instanceof Date?new Date(e):e&&e.model instanceof c?e.model.toPlainObject(a):null===e?null:f(e):a===!1&&(d[b]=e):d[b]=e}var d={},e=this.modelObject;return this.propertiesList.forEach(function(a){var c=e[a]();b(a,c)}),this.fieldsList.forEach(function(a){var c=e[a];b(a,c)}),d},c.prototype.updateWith=function(a,b){var e=null;a&&a.model instanceof c&&(e=a.model.dataTimestamp(),a=a.model.toPlainObject(b)),d.mapping.fromJS(a,this.mappingOptions,this.modelObject),e&&this.modelObject.model.dataTimestamp(e)},c.prototype.clone=function(a,b){var c=this.toPlainObject(b),d=new this.modelObject.constructor(c);return a&&d.model.updateWith(a),d}},{knockout:!1,"knockout.mapping":!1}],63:[function(a,b){"use strict";function c(a){g(this),a=a||{},this.earnings=new d(a.earnings);var b=new h;b.markerLine1=f.computed(function(){var a=j(this.currentAmount()).format("$0,0");return a},this.earnings),b.contentLine1=f.computed(function(){return this.currentConcept()},this.earnings),b.markerLine2=f.computed(function(){var a=j(this.nextAmount()).format("$0,0");return a},this.earnings),b.contentLine2=f.computed(function(){return this.nextConcept()},this.earnings),this.timeBooked=new e(a.timeBooked);var c=new h;c.markerLine1=f.computed(function(){var a=j(this.percent()).format("0%");return a},this.timeBooked),c.contentLine1=f.computed(function(){return this.concept()},this.timeBooked),this.items=f.pureComputed(function(){var a=[];return a.push(b),a.push(c),a},this)}function d(a){g(this),this.model.defProperties({currentAmount:0,currentConceptTemplate:"already paid this month",nextAmount:0,nextConceptTemplate:"projected {month} earnings"},a),this.currentConcept=f.pureComputed(function(){var a=i().format("MMMM");return this.currentConceptTemplate().replace(/\{month\}/,a)},this),this.nextConcept=f.pureComputed(function(){var a=i().add(1,"month").format("MMMM");return this.nextConceptTemplate().replace(/\{month\}/,a)},this)}function e(a){g(this),this.model.defProperties({percent:0,conceptTemplate:"of available time booked in {month}"},a),this.concept=f.pureComputed(function(){var a=i().add(1,"month").format("MMMM");return this.conceptTemplate().replace(/\{month\}/,a)},this)}var f=a("knockout"),g=a("./Model"),h=a("./ListViewItem"),i=a("moment"),j=a("numeral");b.exports=c},{"./ListViewItem":57,"./Model":62,knockout:!1,moment:!1,numeral:1}],64:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({positionID:0,positionSingular:"",positionPlural:"",description:"",active:!0},a)}var d=(a("knockout"),a("./Model"));b.exports=c},{"./Model":62,knockout:!1}],65:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({userID:0,smsBookingCommunication:!1,phoneBookingCommunication:!1,loconomicsCommunityCommunication:!1,loconomicsDbmCampaigns:!1,profileSeoPermission:!1,loconomicsMarketingCampaigns:!1,coBrandedPartnerPermissions:!1,createdDate:null,updatedDate:null},a),this.model.defID(["userID"])}var d=a("./Model");b.exports=c},{"./Model":62}],66:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({advanceTime:24,betweenTime:0,incrementsSizeInMinutes:15},a)}var d=(a("knockout"),a("./Model"));b.exports=c},{"./Model":62,knockout:!1}],67:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({name:"",price:0,duration:0,isAddon:!1},a),this.durationText=d.computed(function(){var a=this.duration()||0;return a?a+" minutes":""},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":62,knockout:!1}],68:[function(a,b){"use strict";function c(a){i(this),this.model.defProperties({from:0,to:0},a),this.isEnabled=h.computed({read:function(){return"number"==typeof this.from()&&"number"==typeof this.to()&&this.from()<this.to()},write:function(a){a===!0?(this.fromHour(9),this.toHour(17)):(this.toHour(0),this.from(0))},owner:this}).extend({rateLimit:0}),this.isAllDay=h.computed({read:function(){return 0===this.from()&&1440===this.to()},write:function(){this.from(0),this.to(1440)},owner:this}).extend({rateLimit:0}),this.fromHour=h.computed({read:function(){return Math.floor(this.from()/60)},write:function(a){this.from(60*a|0)},owner:this}),this.toHour=h.computed({read:function(){return Math.ceil(this.to()/60)},write:function(a){this.to(60*a|0)},owner:this}),this.fromTime=h.computed({read:function(){return f(0|this.from())},write:function(a){this.from(g(a))},owner:this}),this.toTime=h.computed({read:function(){return f(0|this.to())},write:function(a){this.to(g(a))},owner:this})}function d(a){i(this),this.model.defProperties({sunday:new c,monday:new c,tuesday:new c,wednesday:new c,thursday:new c,friday:new c,saturday:new c,isAllTime:!1},a)}function e(a){return Math.floor(a/10)+""+a%10}function f(a){var b=j.duration(a,"minutes"),c=b.hours(),d=b.minutes(),f=b.seconds();return e(c)+":"+e(d)+":"+e(f)}function g(a){return 0|j.duration(a).asMinutes()}var h=a("knockout"),i=a("./Model");b.exports=d;var j=a("moment")},{"./Model":62,knockout:!1,moment:!1}],69:[function(a,b){"use strict";function c(){e(this),this.today=new f({concept:"more today",timeFormat:" [ending @] h:mma"}),this.tomorrow=new f({concept:"tomorrow",timeFormat:" [starting @] h:mma"}),this.nextWeek=new f({concept:"next week",timeFormat:null}),this.items=d.pureComputed(function(){var a=[];return a.push(this.today),a.push(this.tomorrow),a.push(this.nextWeek),a},this)}var d=a("knockout"),e=a("./Model"),f=a("./BookingSummary");b.exports=c},{"./BookingSummary":51,"./Model":62,knockout:!1}],70:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({userID:0,email:"",firstName:"",lastName:"",secondLastName:"",businessName:"",alternativeEmail:"",phone:"",canReceiveSms:"",birthMonthDay:null,birthMonth:null,isFreelancer:!1,isCustomer:!1,isMember:!1,isAdmin:!1,onboardingStep:null,accountStatusID:0,createdDate:null,updatedDate:null},a),this.fullName=d.pureComputed(function(){var a=[this.firstName()];return this.lastName()&&a.push(this.lastName()),this.secondLastName()&&a.push(this.secondLastName),a.join(" ")},this),this.birthDay=d.pureComputed(function(){return this.birthMonthDay()&&this.birthMonth()?this.birthMonth()+"/"+this.birthMonthDay():null},this),this.userType=d.pureComputed({read:function(){var a=this.isCustomer(),b=this.isFreelancer(),c=this.isAdmin(),d=0;return this.isAnonymous()&&(d|=f.Anonymous),a&&(d|=f.Customer),b&&(d|=f.Freelancer),c&&(d|=f.Admin),d},owner:this}),this.isAnonymous=d.pureComputed(function(){return this.userID()<1},this),this.isUserType=function(a){return this.userType()&a}.bind(this)}var d=a("knockout"),e=a("./Model"),f={None:0,Anonymous:1,Customer:2,Freelancer:4,Admin:8,LoggedUser:14,User:15,System:16};b.exports=c,c.UserType=f,c.newAnonymous=function(){return new c({userID:0,email:"",firstName:"",onboardingStep:null})}},{"./Model":62,knockout:!1}],71:[function(a,b,c){var d=a("../models/Appointment"),e=a("./locations").locations,f=a("./services").services,g=a("knockout"),h=a("moment"),i=(h(),h().add(1,"days")),j=i.clone().hours(10).minutes(0).seconds(0),k=i.clone().hours(16).minutes(30).seconds(0),l=[new d({id:1,startTime:j,endTime:k,summary:"Massage Therapist Booking",services:f,ptotalPrice:95,location:g.toJS(e[0]),preNotesToClient:"Looking forward to seeing the new color",preNotesToSelf:"Ask him about his new color",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:2,startTime:new Date(2014,11,1,13,0,0),endTime:new Date(2014,11,1,13,50,0),summary:"Massage Therapist Booking",services:[f[0]],ptotalPrice:95,location:g.toJS(e[1]),preNotesToClient:"Something else",preNotesToSelf:"Remember that thing",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:3,startTime:new Date(2014,11,1,16,0,0),endTime:new Date(2014,11,1,18,0,0),summary:"Massage Therapist Booking",services:[f[1]],ptotalPrice:95,location:g.toJS(e[2]),preNotesToClient:"",preNotesToSelf:"Ask him about the forgotten notes",client:{firstName:"Joshua",lastName:"Danielson"}})];c.appointments=l},{"../models/Appointment":49,"./locations":74,"./services":76,knockout:!1,moment:!1}],72:[function(a,b,c){var d=a("../models/CalendarSlot"),e=a("../utils/Time"),f=a("moment"),g=new Date,h=new Date;h.setDate(h.getDate()+1);var i=f(g).format("YYYY-MM-DD"),j=f(h).format("YYYY-MM-DD"),k=[new d({startTime:new e(g,0,0,0),endTime:new e(g,12,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(g,12,0,0),endTime:new e(g,13,0,0),subject:"Josh Danielson",description:"Deep Tissue Massage",link:"#!appointment/3",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({startTime:new e(g,13,0,0),endTime:new e(g,15,0,0),subject:"Do that important thing",description:null,link:"#!event/8",actionIcon:"glyphicon glyphicon-new-window",actionText:null,classNames:null}),new d({startTime:new e(g,15,0,0),endTime:new e(g,16,0,0),subject:"Iago Lorenzo",description:"Deep Tissue Massage Long Name",link:"#!appointment/5",actionIcon:null,actionText:"$159.90",classNames:null}),new d({startTime:new e(g,16,0,0),endTime:new e(g,0,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})],l=[new d({startTime:new e(h,0,0,0),endTime:new e(h,9,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,9,0,0),endTime:new e(h,10,0,0),subject:"Jaren Freely",description:"Deep Tissue Massage Long Name",link:"#!appointment/1",actionIcon:null,actionText:"$59.90",classNames:null}),new d({startTime:new e(h,10,0,0),endTime:new e(h,11,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,11,0,0),endTime:new e(h,12,45,0),subject:"CONFIRM-Susan Dee",description:"Deep Tissue Massage",link:"#!appointment/2",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({startTime:new e(h,12,45,0),endTime:new e(h,16,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,16,0,0),endTime:new e(h,17,15,0),subject:"Susan Dee",description:"Deep Tissue Massage",link:"#!appointment/3",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({startTime:new e(h,17,15,0),endTime:new e(h,18,30,0),subject:"Dentist appointment",description:null,link:"#!event/4",actionIcon:"glyphicon glyphicon-new-window",actionText:null,classNames:null}),new d({startTime:new e(h,18,30,0),endTime:new e(h,19,30,0),subject:"Susan Dee",description:"Deep Tissue Massage Long Name",link:"#!appointment/5",actionIcon:null,actionText:"$159.90",classNames:null}),new d({startTime:new e(h,19,30,0),endTime:new e(h,23,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,23,0,0),endTime:new e(h,0,0,0),subject:"Jaren Freely",description:"Deep Tissue Massage",link:"#!appointment/6",actionIcon:null,actionText:"$80",classNames:null})],m=[new d({startTime:new e(h,0,0,0),endTime:new e(h,0,0,0),subject:"Free",description:null,link:"#!appointment/0",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})],n={"default":m};
n[i]=k,n[j]=l,c.calendar=n},{"../models/CalendarSlot":53,"../utils/Time":84,moment:!1}],73:[function(a,b,c){var d=a("../models/Client"),e=[new d({id:1,firstName:"Joshua",lastName:"Danielson"}),new d({id:2,firstName:"Iago",lastName:"Lorenzo"}),new d({id:3,firstName:"Fernando",lastName:"Gago"}),new d({id:4,firstName:"Adam",lastName:"Finch"}),new d({id:5,firstName:"Alan",lastName:"Ferguson"}),new d({id:6,firstName:"Alex",lastName:"Pena"}),new d({id:7,firstName:"Alexis",lastName:"Peaca"}),new d({id:8,firstName:"Arthur",lastName:"Miller"})];c.clients=e},{"../models/Client":55}],74:[function(a,b,c){var d=a("../models/Location"),e=[new d({locationID:1,name:"ActviSpace",addressLine1:"3150 18th Street",postalCode:90001,isServiceRadius:!0,serviceRadius:2}),new d({locationID:2,name:"Corey's Apt",addressLine1:"187 Bocana St.",postalCode:90002}),new d({locationID:3,name:"Josh'a Apt",addressLine1:"429 Corbett Ave",postalCode:90003})];c.locations=e},{"../models/Location":58}],75:[function(a,b,c){var d=a("../models/Message"),e=a("../utils/Time"),f=(a("moment"),new Date),g=new Date,h=new Date,i=new Date;g.setDate(g.getDate()-1),h.setDate(h.getDate()-2),i.setDate(i.getDate()-16);var j=[new d({id:1,createdDate:new e(f,11,0,0),subject:"CONFIRM-Susan Dee",content:"Deep Tissue Massage",link:"/conversation/1",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({id:3,createdDate:new e(g,13,0,0),subject:'Do you do "Exotic Massage"?',content:"Hi, I wanted to know if you perform as par of your services...",link:"/conversation/3",actionIcon:"glyphicon glyphicon-share-alt",actionText:null,classNames:null}),new d({id:2,createdDate:new e(h,12,0,0),subject:"Josh Danielson",content:"Deep Tissue Massage",link:"/conversation/2",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({id:4,createdDate:new e(i,15,0,0),subject:"Inquiry",content:"Another question from another client.",link:"/conversation/4",actionIcon:"glyphicon glyphicon-share-alt",classNames:null})];c.messages=j},{"../models/Message":61,"../utils/Time":84,moment:!1}],76:[function(a,b,c){var d=a("../models/Service"),e=[new d({name:"Deep Tissue Massage",price:95,duration:120}),new d({name:"Tissue Massage",price:60,duration:60}),new d({name:"Special oils",price:95,isAddon:!0}),new d({name:"Some service extra",price:40,duration:20,isAddon:!0})];c.services=e},{"../models/Service":67}],77:[function(a,b,c){var d=a("../utils/Time"),e=a("moment"),f=new Date,g=new Date;g.setDate(g.getDate()+1);var h=e(f).format("YYYY-MM-DD"),i=e(g).format("YYYY-MM-DD"),j=[d(f,9,15),d(f,11,30),d(f,12,0),d(f,12,30),d(f,16,15),d(f,18,0),d(f,18,30),d(f,19,0),d(f,19,30),d(f,21,30),d(f,22,0)],k=[d(g,8,0),d(g,10,30),d(g,11,0),d(g,11,30),d(g,12,0),d(g,12,30),d(g,13,0),d(g,13,30),d(g,14,45),d(g,16,0),d(g,16,30)],l=[],m={"default":l};m[h]=j,m[i]=k,c.timeSlots=m},{"../utils/Time":84,moment:!1}],78:[function(a,b){"use strict";function c(a){a=a||{},this.ttl=d.duration(a.ttl).asMilliseconds(),this.latest=a.latest||null,this.mustRevalidate=function(){var a=this.latest&&new Date-this.latest||Number.POSITIVE_INFINITY;return a>this.ttl}}var d=a("moment");b.exports=c},{moment:!1}],79:[function(){Function.prototype._delayed=function(a){var b=this;return function(){var c=this,d=arguments;setTimeout(function(){b.apply(c,d)},a)}}},{}],80:[function(){Function.prototype._inherits=function(a){this.prototype=Object.create(a.prototype,{constructor:{value:this,enumerable:!1,writable:!0,configurable:!0}})}},{}],81:[function(a,b){"use strict";function c(a){f.call(this),this.original=a,this.version=a.model.clone(),this.areDifferent=e.pureComputed(function(){return this.original.model.dataTimestamp()!==this.version.model.dataTimestamp()},this).extend({rateLimit:0}),this.isNewer=e.pureComputed(function(){return this.original.model.dataTimestamp()<this.version.model.dataTimestamp()},this).extend({rateLimit:0}),this.isObsolete=e.pureComputed(function(){return this.original.model.dataTimestamp()>this.version.model.dataTimestamp()},this).extend({rateLimit:0})}function d(a){var b=a.model.toPlainObject(!0),c=a.model.dataTimestamp();return function(){a.model.updateWith(b),a.model.dataTimestamp(c)}}var e=a("knockout"),f=a("events").EventEmitter;b.exports=c,c._inherits(f),c.prototype.pull=function(a){a=a||{};var b=!1,c=null;return(a.evenIfNewer||!this.isNewer())&&(c=d(this.version),this.version.model.updateWith(this.original,!0),b=!0),this.emit("pull",b,c),b},c.prototype.push=function(a){a=a||{};var b=!1,c=null;return(a.evenIfObsolete||!this.isObsolete())&&(c=d(this.original),this.original.model.updateWith(this.version,!0),b=!0),this.emit("push",b,c),b},c.prototype.sync=function(){return this.isNewer()?this.push():this.isObsolete()?this.pull():!1}},{events:!1,knockout:!1}],82:[function(a,b){"use strict";function c(a){h.call(this),a=a||{};var b=!0;if(this.isLoading=f.observable(!1),this.isSaving=f.observable(!1),this.isSyncing=f.observable(!1),this.isLocked=f.pureComputed(function(){return this.isLoading()||this.isSaving()},this),!a.data)throw new Error("RemoteModel data must be set on constructor and no changed later");this.data=a.data,this.cache=new e({ttl:a.ttl}),this.localStorageName=a.localStorageName||null,this.getData=function(){return this.load(),this.data},this.newVersion=function(){var a=new d(this.data);return this.isLoading.subscribe(function(b){b||a.pull({evenIfNewer:!0})}),a.on("push",function(b,c){b&&this.save().then(function(){a.pull({evenIfNewer:!0})})["catch"](function(){c()})}.bind(this)),a},this.fetch=a.fetch||function(){throw new Error("Not implemented")},this.push=a.push||function(){throw new Error("Not implementd")};var c=function(){return this.fetch().then(function(a){if(!a)throw new Error('Remote model did not returned data, response must be a "Not Found"');return this.data.model.updateWith(a,!0),this.localStorageName&&g.setItem(this.localStorageName,a),this.isLoading()?this.emit("load",a):this.emit("synced",a),this.isLoading(!1),this.isSyncing(!1),this.cache.latest=new Date,this.data}.bind(this))["catch"](function(a){var b=this.isLoading();this.isLoading(!1),this.isSyncing(!1);var c={task:b?"load":"sync",error:a};return h.listenerCount(this,"error")>0?this.emit("error",c):console.error("RemoteModel Error",c),a}.bind(this))}.bind(this);this.load=function(){if(this.cache.mustRevalidate()){b?this.isLoading(!0):this.isSyncing(!0);var a=null;return a=b&&this.localStorageName?g.getItem(this.localStorageName).then(function(a){return a?(this.data.model.updateWith(a,!0),this.isLoading(!1),this.isSyncing(!1),c(),this.data):c()}.bind(this)):c(),b?(b=!1,a):Promise.resolve(this.data)}return Promise.resolve(this.data)},this.save=function(){this.isSaving(!0);var a=this.data.model.dataTimestamp();return this.push().then(function(b){return this.data.model.updateWith(b,!0),this.data.model.dataTimestamp(a),this.localStorageName&&g.setItem(this.localStorageName,b),this.emit("saved",b),this.isSaving(!1),this.cache.latest=new Date,this.data}.bind(this))["catch"](function(a){this.isSaving(!1);var b={task:"save",error:a};return h.listenerCount(this,"error")>0?this.emit("error",b):console.error("RemoteModel Error",b),a}.bind(this))},this.sync=function(){this.load()["catch"](function(){})}}var d=a("../utils/ModelVersion"),e=a("../utils/CacheControl"),f=a("knockout"),g=a("localforage"),h=a("events").EventEmitter;b.exports=c,c._inherits(h)},{"../utils/CacheControl":78,"../utils/ModelVersion":81,events:!1,knockout:!1,localforage:!1}],83:[function(a,b){"use strict";function c(a){return a&&a[0]&&a[0].toLowerCase&&a[0].toLowerCase()+a.slice(1)||a}function d(a){if(!a||"object"!=typeof a)return a;var b=Array.isArray(a)?[]:{};for(var e in a)if(a.hasOwnProperty(e)){var f=c(e);b[f]="object"==typeof a[e]?d(a[e]):a[e]}return b}function e(a){var b="string"==typeof a?a:a&&a.url;this.baseUrl=b,this.extraHeaders=null}var f=a("jquery");e.prototype.get=function(a,b){return this.request(a,"get",b)},e.prototype.put=function(a,b){return this.request(a,"put",b)},e.prototype.post=function(a,b){return this.request(a,"post",b)},e.prototype["delete"]=function(a,b){return this.request(a,"delete",b)},e.prototype.putFile=function(a,b){return this.request(a,"delete",b,"multipart/form-data")},e.prototype.request=function g(a,b,c,e){var h=this,i=this.baseUrl+a;return Promise.resolve(f.ajax({url:i,cache:!1,dataType:"json",method:b,headers:this.extraHeaders,data:c&&JSON.parse(JSON.stringify(c)),contentType:e||"application/x-www-form-urlencoded"})).then(d)["catch"](function(d){if(401===d.status){var f=g.bind(this,a,b,c,e),i=h.onAuthorizationRequired(f);if(i)return Promise.resolve(i)["catch"](function(){return d})}return d})},e.prototype.onAuthorizationRequired=function(){},b.exports=e},{}],84:[function(a,b){function c(a,b,c,d){return a instanceof Date||(d=c,c=b,b=a,a=new Date),new Date(a.getFullYear(),a.getMonth(),a.getDate(),b||0,c||0,d||0)}b.exports=c},{}],85:[function(a,b){"use strict";a("../models/User").UserType;b.exports=function(a){return function(b){var c=a.getActivityControllerByRoute(b),d=a.model.user(),e=d&&d.userType();if(c&&c.accessLevel){var f=c.accessLevel&e;if(!f)return{requiredLevel:c.accessLevel,currentType:e}}return null}}},{"../models/User":70}],86:[function(a,b,c){"use strict";var d=function(a){return"function"==typeof a?a():a};c.defineCrudApiForRest=function(a){var b=a.extendedObject,c=a.Model,e=a.modelName,f=a.modelListName,g=a.modelUrl,h=a.idPropertyName;b["get"+f]=function(a){return this.rest.get(g,a).then(function(a){return a&&a.map(function(a){return new c(a)})})},b["get"+e]=function(a){return this.rest.get(g+"/"+a).then(function(a){return a&&new c(a)})},b["post"+e]=function(a){return this.rest.post(g,a).then(function(a){return new c(a)})},b["put"+e]=function(a){return this.rest.put(g+"/"+d(a[h]),a).then(function(a){return new c(a)})},b["set"+e]=function(a){var b=d(a[h]);return b?this["put"+e](a):this["post"+e](a)},b["del"+e]=function(a){var b=a&&d(a[h])||a;if(b)return this.rest["delete"](g+"/"+b,a).then(function(a){return a&&new c(a)});throw new Error("Need an ID or an object with the ID property to delete")}}},{}],87:[function(a,b,c){"use strict";function d(a){var b={};return b.popover={update:function(b,d){var e=a.unwrap(d()),g=f.extend(!0,{},e);g.content=a.unwrap(e.content),g.content?(g.content=c.i18n&&c.i18n.t(g.content)||g.content,f(b).popover("destroy").popover(g),f(b).is(":focus")&&f(b).popover("show")):f(b).popover("destroy")}},b}function e(a,b){var c,e=d(a);for(var f in e)(!e.hasOwnProperty||e.hasOwnProperty(f))&&(c=b?b+f[0].toUpperCase()+f.slice(1):f,a.bindingHandlers[c]=e[f])}var f=a("jquery");c.i18n=null,c.plugIn=e,c.createBindingHelpers=d},{}],88:[function(a,b,c){"use strict";var d=a("jquery");a("bootstrap"),a("bootstrap-switch"),c.plugIn=function(a,b){a.bindingHandlers[b?b+"switch":"switch"]={init:function(b,c){d(b).bootstrapSwitch(),d(b).on("switchChange.bootstrapSwitch",function(b,d){var e=c()||{},f=!!a.unwrap(e.state),g=!!d;f!==g&&(a.isObservable(e.state)?a.isWriteableObservable(e.state)&&e.state(g):e.state=g)})},update:function(b,c){var e=c(),f=e||{};f=a.toJS(f);var g=d(b);Object.keys(f).forEach(function(a){g.bootstrapSwitch(a,f[a])})}}}},{}],89:[function(a,b){"use strict";var c=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],d=RegExp("["+c.join("\\")+"]","g"),e=function(a){return a.replace(d,"\\$&")};b.exports=e},{}],90:[function(a,b){"use strict";var c=["#","&","~","=",">","'",":",'"',"!",";",","],d=[".","*","+","|","[","]","(",")","/","^","$"],e=new RegExp("("+c.join("|")+"|\\"+d.join("|\\")+")","g");b.exports=function(a){return a.replace(e,"\\$1")}},{}],91:[function(a,b){"user strict";b.exports=function(a){a=a||window.location.href;var b,c=[],d=a.indexOf("?");if(d>-1)for(var e=a.slice(d+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c}},{}],92:[function(a){"use strict";var b=a("jquery");b.fn.multiline=function(a){return this.text(a),this.html(this.html().replace(/\n/g,"<br/>")),this}},{}],93:[function(a,b){"use strict";function c(a,b){var c={enumerable:!0,configurable:!0};return c[a]=b,c}function d(a,b,d){if(Object.defineProperty)return Object.defineProperty(a,b,c("get",d));if(Object.prototype.__defineGetter__)return a.__defineGetter__(b,d);throw new Error("browser does not support getters")}function e(a,b,d){if(Object.defineProperty)return Object.defineProperty(a,b,c("set",d));if(Object.prototype.__defineSetter__)return a.__defineSetter__(b,d);throw new Error("browser does not support setters")}b.exports={defineGetter:d,defineSetter:e}},{}],94:[function(a,b){"use strict";function c(a){this.idAttributeName=a.idAttributeName||"id",this.allowDuplicates=!!a.allowDuplicates||!1,this.$root=null,d(function(){this.$root=d(a.root||"body")}.bind(this))}var d=a("jquery"),e=a("../escapeSelector");b.exports=c,c.prototype.find=function(a,b){var c=d(b||this.$root);return c.find("["+this.idAttributeName+'="'+e(a)+'"]')},c.prototype.getActive=function(){return this.$root.find("["+this.idAttributeName+"]:visible")},c.prototype.inject=function(a,b){b=b.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/g,"");var c=d("<div/>",{html:b}),e=this.find(a,c);if(0===e.length&&(e=c.attr(this.idAttributeName,a)),!this.allowDuplicates){var f=this.find(a);f.length>0&&(f.replaceWith(e),e=f)}e.appendTo(this.$root)},c.prototype["switch"]=function(a,b,c,d){b.is(":visible")?c.emit(c.events.itemReady,b,d):(c.emit(c.events.willOpen,b,d),b.show(),c.emit(c.events.itemReady,b,d),c.emit(c.events.opened,b,d)),a.is(":visible")&&(c.emit(c.events.willClose,a,d),a.find(":focus").blur(),a.hide(),c.emit(c.events.closed,a,d))},c.prototype.init=function(){this.getActive().hide()}},{"../escapeSelector":90}],95:[function(a,b){"use strict";function c(a){d.EventEmitter.call(this),this.$=a.jquery||d.jquery,this.$root=this.$(a.root),this.baseUrl=a.baseUrl||"",this.forceHashbang=a.forceHashbang||!1,this.linkEvent=a.linkEvent||"click",this.parseUrl=(a.parseUrl||d.parseUrl).bind(this,this.baseUrl),this.absolutizeUrl=(a.absolutizeUrl||d.absolutizeUrl).bind(this,this.baseUrl),this.history=a.history||window.history,this.indexName=a.indexName||"index",this.items=a.domItemsManager,this.loader="undefined"==typeof a.loader?d.loader:a.loader,this.loader&&(this.loader.baseUrl=this.baseUrl),this.events={willOpen:"shell-will-open",willClose:"shell-will-close",itemReady:"shell-item-ready",closed:"shell-closed",opened:"shell-opened"},this.accessControl=a.accessControl||d.accessControl,this.nonAccessName=a.nonAccessName||"index"}var d=a("./dependencies");c.prototype=Object.create(d.EventEmitter.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b.exports=c,c.prototype.go=function(a,b){return this.forceHashbang?/^#!/.test(a)||(a="#!"+a):a=this.absolutizeUrl(a),this.history.pushState(b,void 0,a),this.replace(b)},c.prototype.goBack=function(a,b){b=0-(b||1),0>b&&Math.abs(b)>=this.history.length?this.go(this.indexName):(this._pendingStateUpdate=a,this.history.go(b))},c.prototype.getUpdatedState=function(a){a=this._pendingStateUpdate||a||this.history.state||{},this._pendingStateUpdate=null;var b=/#!/.test(location.href)||this.forceHashbang,c=(b?location.hash:location.pathname)+(location.search||"");return a.route=this.parseUrl(c),a},c.prototype.replace=function(a){a=this.getUpdatedState(a),a.route.root===!0&&(a.route=this.parseUrl(this.indexName));var b=this.accessControl(a.route);if(b)return this.go(this.nonAccessName,b);var c=this.items.find(a.route.name),d=this,e=null;if(c&&c.length)e=new Promise(function(b,e){try{var f=d.items.getActive();f=f.not(c),d.items["switch"](f,c,d,a),b()}catch(g){e(g)}});else if(this.loader)e=this.loader.load(a.route).then(function(b){return d.items.inject(a.route.name,b),d.items.find(a.route.name).length?d.replace(a):void 0});else{var f=new Error("Page not found ("+a.route.name+")");console.warn("Shell Page not found, state:",a),e=Promise.reject(f),setTimeout(function(){this.goBack()}.bind(this),1)}var g=this;return e["catch"](function(a){return a instanceof Error||(a=new Error(a)),console.error("Shell, unexpected error.",a),g.emit("error",a),a}),e},c.prototype.run=function(){var a=this;this.$(window).on(this.history.popstateEvent||"popstate",function(b){var c=b.state||b.originalEvent&&b.originalEvent.state||a.history.state;a.replace(c)}),this.$(document).on(this.linkEvent,"[href], [data-href]",function(b){var c=a.$(this),d=c.attr("href")||c.data("href");if(!/^[a-z]+:/i.test(d)){if(a.forceHashbang&&/^#([^!]|$)/.test(d))return void b.preventDefault();b.preventDefault(),setTimeout(function(){a.go(d)},1)}}),this.items.init(),this.replace()}},{"./dependencies":97}],96:[function(a,b){"use strict";function c(a,b){b=d(b);var c=new RegExp("^"+e(a),"i");return c.test(b)?b:d(a+b)}var d=a("./sanitizeUrl"),e=a("../escapeRegExp");b.exports=c},{"../escapeRegExp":89,"./sanitizeUrl":102}],97:[function(a,b){"use strict";b.exports={parseUrl:null,absolutizeUrl:null,jquery:null,loader:null,accessControl:function(){return null},EventEmitter:null}},{}],98:[function(a,b){"use strict";function c(a){var b=+j(a)._suid;return isNaN(b)?null:b}function d(a,b){var c=j(a);c.push("_suid"),c._suid=b;for(var d=[],e=0;e<c.length;e++)d.push(c[e]+"="+encodeURIComponent(c[c[e]]));if(d=d.join("&")){var f=a.indexOf("?");f>-1&&(a=a.substr(0,f)),a+="?"+d}return a}function e(){setTimeout(function(){sessionStorage.setItem("hashbangHistory.store",JSON.stringify(k))},1500)}function f(a){if(a){for(var b in a)return a;return null}return a}function g(a){a=i(a||"");var b=a.indexOf("#");return b>-1&&(a=a.substr(b+1)),a=a.replace(/^!/,"")}var h=a("jquery"),i=a("./sanitizeUrl"),j=a("../getUrlQuery"),k=sessionStorage.getItem("hashbangHistory.store");k=k?JSON.parse(k):{states:[]};var l=null,m={pushState:function(a,b,c){if(c=g(c),a=f(a)||null,null!==a){k.states.push(a);var h=k.states.length-1;c=d(c,h),e()}l=c,location.hash="#!"+c},replaceState:function(a,b,h){h=g(h);var i=c(h),j=null!==i;a=f(a)||null,(null!==a||j)&&(j?k.states[i]=a:(k.states.push(a),i=k.states.length-1,h=d(h,i)),e()),l=h,location.hash="#!"+h},get state(){var a=c(location.hash);return null!==a?k.states[a]:null},get length(){return window.history.length},go:function(a){window.history.go(a)},back:function(){window.history.back()},forward:function(){window.history.forward()}},n=h(window);n.on("hashchange",function(a){var b=a.originalEvent.newURL;if(b=g(b),b!==l){var d=c(b),e=null;null!==d&&(e=k.states[d]),n.trigger(new h.Event("popstate",{state:e}),"hashbangHistory")}}),n.on("popstate",function(a,b){"hashbangHistory"!==b&&(a.preventDefault(),a.stopImmediatePropagation())}),b.exports=m},{"../getUrlQuery":91,"./sanitizeUrl":102}],99:[function(a,b,c){"use strict";var d=a("./dependencies"),e=a("./DomItemsManager"),f=a("./parseUrl"),g=a("./absolutizeUrl"),h=a("jquery"),i=a("./loader"),j=a("events").EventEmitter;h.extend(d,{parseUrl:f,absolutizeUrl:g,jquery:h,loader:i,EventEmitter:j});var k=a("./Shell");c.Shell=k,c.DomItemsManager=e},{"./DomItemsManager":94,"./Shell":95,"./absolutizeUrl":96,"./dependencies":97,"./loader":100,"./parseUrl":101,events:!1}],100:[function(a,b){"use strict";a("jquery");b.exports={baseUrl:"/",load:function(a){return new Promise(function(b){console.log("LOADER PROMISE",a,a.name),b("")})}}},{}],101:[function(a,b){"use strict";function c(a,b){b=b||"";var c=b;b=b.replace(/^#!/,"").replace(/^#/,""),b=b.replace(/^\/|^\.\//,"");var f=d(b||"?");b=b.replace(/\?.*$/,"");var g=b.replace(new RegExp("^"+e(a),"i"),""),h=/^\/?([^\/\.]+)[^\/]*(\/.*)*$/.exec(g),i={root:!0,name:null,segments:null,path:null,url:c,query:f};return h&&(i.root=!1,h[1]&&(i.name=h[1],h[2]?(i.path=h[2],i.segments=h[2].replace(/^\//,"").split("/")):(i.path="/",i.segments=[]))),i}var d=a("../getUrlQuery"),e=a("../escapeRegExp");b.exports=c},{"../escapeRegExp":89,"../getUrlQuery":91}],102:[function(a,b){"use strict";function c(a){return a.replace(/\.{2,}/g,"").replace(/\/{2,}/g,"/")}b.exports=c},{}],103:[function(a,b,c){"use strict";function d(a,b,c){return function(d){return a.rest.extraHeaders={alu:d.userID,alk:d.authKey},e.setItem("credentials",{userID:d.userID,username:b,password:c,authKey:d.authKey}),e.setItem("profile",d.profile),a.user().model.updateWith(d.profile),d}}var e=a("localforage");c.plugIn=function(a){a.prototype.tryLogin=function(){return e.getItem("credentials").then(function(a){if(a)return this.login(a.username,a.password);throw new Error("No saved credentials")}.bind(this))},a.prototype.login=function(a,b){return this.rest.extraHeaders=null,this.rest.post("login",{username:a,password:b,returnProfile:!0}).then(d(this,a,b))},a.prototype.logout=function(){return this.rest.extraHeaders=null,e.removeItem("credentials"),e.removeItem("profile"),this.rest.post("logout"),Promise.resolve()},a.prototype.signup=function(a,b,c){return this.rest.extraHeadres=null,this.rest.post("signup?utm_source=app",{username:a,password:b,profileType:c,returnProfile:!0}).then(d(this,a,b))}}},{localforage:!1}],104:[function(a,b,c){"use strict";var d=a("../models/CalendarEvent"),e=a("../utils/apiHelper");c.plugIn=function(a){e.defineCrudApiForRest({extendedObject:a.prototype,Model:d,modelName:"CalendarEvent",modelListName:"CalendarEvents",modelUrl:"events",idPropertyName:"calendarEventID"})}},{"../models/CalendarEvent":52,"../utils/apiHelper":86}],105:[function(a,b,c){"use strict";c.plugIn=function(a){a.prototype.getUserJobProfile=function(){return Promise.resolve([])},a.prototype.getUserJobTitle=function(){return Promise.resolve(null)}}},{}],106:[function(a,b,c){"use strict";var d=a("../models/Booking"),e=(a("../utils/apiHelper"),a("moment")),f=a("knockout");c.create=function(a){var b={remote:{rest:a.rest,getBookings:function(b){return a.rest.get("bookings",b).then(function(a){return a&&a.map(function(a){return new d(a)})})}}},c={};return b.getBookingsByDate=function(a){var d=e(a).format("YYYYMMDD");return c.hasOwnProperty(d)?Promise.resolve(c[d]):b.remote.getBookings({start:a,end:e(a).add(1,"days").toDate()}).then(function(a){var b=f.observableArray(a);return c[d]=b,b})},b}},{"../models/Booking":50,"../utils/apiHelper":86,knockout:!1,moment:!1}],107:[function(a,b,c){"use strict";var d=a("../models/CalendarEvent"),e=(a("../utils/apiHelper"),a("moment")),f=a("knockout");c.create=function(a){var b={remote:{rest:a.rest,getCalendarEvents:function(b){return a.rest.get("events",b).then(function(a){return a&&a.map(function(a){return new d(a)})})}}},c={};return b.getEventsByDate=function(a){var d=e(a).format("YYYYMMDD");return c.hasOwnProperty(d)?Promise.resolve(c[d]):b.remote.getCalendarEvents({start:a,end:e(a).add(1,"days").toDate()}).then(function(a){var b=f.observableArray(a);return c[d]=b,b})},b}},{"../models/CalendarEvent":52,"../utils/apiHelper":86,knockout:!1,moment:!1}],108:[function(a,b,c){"use strict";var d=a("knockout"),e=a("../models/CalendarSyncing"),f=a("../utils/RemoteModel");c.create=function(a){var b=new f({data:new e,ttl:{minutes:1},localStorageName:"calendarSyncing",fetch:function(){return a.rest.get("calendar-syncing")},push:function(){return a.rest.put("calendar-syncing",this.data.model.toPlainObject())}});return b.isReseting=d.observable(!1),b.resetExportUrl=function(){return b.isReseting(!0),a.rest.post("calendar-syncing/reset-export-url").then(function(a){return b.data.model.updateWith(a),b.isReseting(!1),a})},b}},{"../models/CalendarSyncing":54,"../utils/RemoteModel":82,knockout:!1}],109:[function(a,b,c){"use strict";var d=a("../models/Address"),e=a("../utils/RemoteModel");c.create=function(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"homeAddress",fetch:function(){return a.rest.get("addresses/home")},push:function(){return a.rest.put("addresses/home",this.data.model.toPlainObject())}})}},{"../models/Address":48,"../utils/RemoteModel":82}],110:[function(a,b){function c(){f(this),this.userProfile=a("./AppModel.userProfile").create(this),this.user=d.computed(function(){return this.userProfile.data},this),this.schedulingPreferences=a("./AppModel.schedulingPreferences").create(this),this.calendarSyncing=a("./AppModel.calendarSyncing").create(this),this.simplifiedWeeklySchedule=a("./AppModel.simplifiedWeeklySchedule").create(this),this.marketplaceProfile=a("./AppModel.marketplaceProfile").create(this),this.homeAddress=a("./AppModel.homeAddress").create(this),this.privacySettings=a("./AppModel.privacySettings").create(this),this.bookings=a("./AppModel.bookings").create(this),this.calendarEvents=a("./AppModel.calendarEvents").create(this)}var d=a("knockout"),e=a("jquery"),f=a("../models/Model"),g=(a("../models/User"),a("../utils/Rest")),h=a("localforage");a("./AppModel-account").plugIn(c),c.prototype.loadLocalCredentials=function(){return new Promise(function(a){var b=function(b){console.warning("App Model Init err",b),a()};h.getItem("credentials").then(function(c){c&&c.userID&&c.username&&c.authKey?(this.rest.extraHeaders={alu:c.userID,alk:c.authKey},this.userProfile.load().then(function(c){c?a():this.tryLogin().then(a,b)}.bind(this),b)):a()}.bind(this),b)}.bind(this))},c.prototype.init=function(){return h.config({name:"LoconomicsApp",version:.1,size:4980736,storeName:"keyvaluepairs",description:"Loconomics App",driver:h.LOCALSTORAGE}),h.getItem("config").then(function(a){return a=a||{},a.siteUrl?e("html").attr("data-site-url",a.siteUrl):a.siteUrl=e("html").attr("data-site-url"),this.rest=new g(a.siteUrl+"/api/v1/en-US/"),this.rest.onAuthorizationRequired=function(a){this.tryLogin().then(function(){a()})}.bind(this),this.loadLocalCredentials()}.bind(this))},c.prototype.getUpcomingBookings=function(){return this.rest.get("upcoming-bookings")},c.prototype.getBooking=function(a){return this.rest.get("get-booking",{bookingID:a})},b.exports=c,a("./AppModel-events").plugIn(c),a("./AppModel-userJobProfile").plugIn(c)},{"../models/Model":62,"../models/User":70,"../utils/Rest":83,"./AppModel-account":103,"./AppModel-events":104,"./AppModel-userJobProfile":105,"./AppModel.bookings":106,"./AppModel.calendarEvents":107,"./AppModel.calendarSyncing":108,"./AppModel.homeAddress":109,"./AppModel.marketplaceProfile":111,"./AppModel.privacySettings":112,"./AppModel.schedulingPreferences":113,"./AppModel.simplifiedWeeklySchedule":114,"./AppModel.userProfile":115,knockout:!1,localforage:!1}],111:[function(a,b,c){"use strict";var d=a("../models/MarketplaceProfile"),e=a("../utils/RemoteModel");c.create=function(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"marketplaceProfile",fetch:function(){return a.rest.get("marketplace-profile")},push:function(){return a.rest.put("marketplace-profile",this.data.model.toPlainObject())}})}},{"../models/MarketplaceProfile":60,"../utils/RemoteModel":82}],112:[function(a,b,c){"use strict";var d=a("../models/PrivacySettings"),e=a("../utils/RemoteModel");c.create=function(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"privacySettings",fetch:function(){return a.rest.get("privacy-settings")},push:function(){return a.rest.put("privacy-settings",this.data.model.toPlainObject())}})}},{"../models/PrivacySettings":65,"../utils/RemoteModel":82}],113:[function(a,b,c){"use strict";var d=a("../models/SchedulingPreferences"),e=a("../utils/RemoteModel");c.create=function(a){return new e({data:new d,ttl:{minutes:1},localStorageName:"schedulingPreferences",fetch:function(){return a.rest.get("scheduling-preferences")},push:function(){return a.rest.put("scheduling-preferences",this.data.model.toPlainObject())}})}},{"../models/SchedulingPreferences":66,"../utils/RemoteModel":82}],114:[function(a,b,c){"use strict";function d(a){var b={};if("unavailable"!==a.defaultStatus||"available"!==a.status)throw{name:"input-format",message:"Weekly schedule, given statuses not supported, status: "+a.status+", defaultStatus: "+a.defaultStatus};var c=0|(a.slotSize||k);return Object.keys(a.slots).forEach(function(d){if(-1!==l.indexOf(d)){var e=a.slots[d],f=null,g=null,h=null;if(e.some(function(a){var b=0|j.duration(a).asMinutes();if(null===f)f=b,h=b;else{if(h+c!==b)return!0;g=b,h=b}}),null!==f){var i={from:f,to:0};b[d]=i,i.to=null!==g?g+c:f+c}}}),b}function e(a){var b=k,c={status:"available",defaultAvailability:"unavailable",slots:{},slotSize:b};return Object.keys(a).forEach(function(d){if(-1!==l.indexOf(d)){var e=a[d],f=0|e.from,h=0|e.to;if(c.slots[d]=[],h>f)for(var i=f;h>i;)c.slots[d].push(g(i)),i+=b}}),c}function f(a){return Math.floor(a/10)+""+a%10}function g(a){var b=j.duration(a,"minutes"),c=b.hours(),d=b.minutes(),e=b.seconds();return f(c)+":"+f(d)+":"+f(e)}var h=a("../models/SimplifiedWeeklySchedule"),i=a("../utils/RemoteModel"),j=a("moment"),k=15,l=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];c.create=function(a){return new i({data:new h,ttl:{minutes:1},localStorageName:"weeklySchedule",fetch:function(){return a.rest.get("availability/weekly-schedule").then(d)},push:function(){var b={"all-time":!1,"json-data":{}};return this.data.isAllTime()===!0?b["all-time"]=!0:b["json-data"]=JSON.stringify(e(this.data.model.toPlainObject(!0))),a.rest.put("availability/weekly-schedule",b).then(d)}})}},{"../models/SimplifiedWeeklySchedule":68,"../utils/RemoteModel":82,moment:!1}],115:[function(a,b,c){"use strict";var d=a("../models/User"),e=a("../utils/RemoteModel");c.create=function(a){return new e({data:d.newAnonymous(),ttl:{minutes:1},localStorageName:"profile",fetch:function(){return a.rest.get("profile")},push:function(){return a.rest.put("profile",this.data.model.toPlainObject())}})}},{"../models/User":70,"../utils/RemoteModel":82}],116:[function(a,b){"use strict";function c(){this.username=d.observable(""),this.password=d.observable("");var a=/^[-0-9A-Za-z!#$%&'*+/=?^_`{|}~.]+@[-0-9A-Za-z!#$%&'*+/=?^_`{|}~.]+$/;this.username.error=d.observable(""),this.username.subscribe(function(b){this.username.error(b?a.test(b)?"":"Is not a valid email":"Required")}.bind(this)),this.password.error=d.observable(""),this.password.subscribe(function(a){var b="";a||(b="Required"),this.password.error(b)}.bind(this))}var d=a("knockout");b.exports=c},{knockout:!1}],117:[function(a,b){function c(a){d(this),this.model.defProperties({link:"",icon:"",text:"",isTitle:!1,isModal:!1,isShell:!1,isMenu:!1},a)}var d=(a("knockout"),a("../models/Model"));b.exports=c,c.prototype.getHref=function(){return this.isMenu()||this.isModal()||this.isShell()?"#":this.link()},c.prototype.getModalTarget=function(){return this.isMenu()||!this.isModal()||this.isShell()?"":this.link()},c.prototype.getShellCommand=function(){return this.isMenu()||!this.isShell()?"":this.link()},c.prototype.getMenuID=function(){return this.isMenu()?this.link():""},c.prototype.getMenuLink=function(){return this.isMenu()?"#"+this.link():""},c.goHome=new c({link:"/",icon:"glyphicon glyphicon-home"}),c.goBack=new c({link:"goBack",icon:"glyphicon glyphicon-arrow-left",isShell:!0}),c.newItem=new c({link:"#newItem",icon:"glyphicon glyphicon-plus",isModal:!0}),c.menuIn=new c({link:"menuIn",icon:"menu",isMenu:!0}),c.menuOut=new c({link:"menuOut",icon:"menu",isMenu:!0}),c.menuNewItem=new c({link:"menuNewItem",icon:"glyphicon glyphicon-plus",isMenu:!0}),c.goHelpIndex=new c({link:"#helpIndex",text:"help",isModal:!0}),c.goLogin=new c({link:"/login",text:"log-in"}),c.goLogout=new c({link:"/logout",text:"log-out"}),c.goSignup=new c({link:"/signup",text:"sign-up"})},{"../models/Model":62,knockout:!1}],118:[function(a,b){function c(a){d(this),this.model.defProperties({title:"",leftAction:null,rightAction:null},a)}{var d=(a("knockout"),a("../models/Model"));a("./NavAction")}b.exports=c},{"../models/Model":62,"./NavAction":117,knockout:!1}]},{},[41]);