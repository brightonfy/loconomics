!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(){function a(a){this._value=a}function c(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function d(a,b,c){var d;return d=b.indexOf("$")>-1?f(a,b,c):b.indexOf("%")>-1?g(a,b,c):b.indexOf(":")>-1?h(a,b):j(a._value,b,c)}function e(a,b){var c,d,e,f,g,h=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=i(b);else if(b===r)a._value=0;else{for("."!==p[q].delimiters.decimal&&(b=b.replace(/\./g,"").replace(p[q].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+p[q].abbreviations.thousand+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+p[q].abbreviations.million+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+p[q].abbreviations.billion+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+p[q].abbreviations.trillion+"(?:\\)|(\\"+p[q].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(h.match(c)?Math.pow(10,3):1)*(h.match(d)?Math.pow(10,6):1)*(h.match(e)?Math.pow(10,9):1)*(h.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function f(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),i="";return b.indexOf(" $")>-1?(i=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(i=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=j(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,p[q].currency.symbol+i),e=e.join("")):e=p[q].currency.symbol+i+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,i+p[q].currency.symbol),e=e.join("")):e=e+i+p[q].currency.symbol,e}function g(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=j(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function h(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function i(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function j(a,b,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",o=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==r)return r;if(b.indexOf("(")>-1?(k=!0,b=b.slice(1,-1)):b.indexOf("+")>-1&&(l=!0,b=b.replace(/\+/g,"")),b.indexOf("a")>-1&&(o=b.indexOf("aK")>=0,s=b.indexOf("aM")>=0,t=b.indexOf("aB")>=0,u=b.indexOf("aT")>=0,v=o||s||t||u,b.indexOf(" a")>-1?(n=" ",b=b.replace(" a","")):b=b.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=p[q].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=p[q].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=p[q].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||o)&&(n+=p[q].abbreviations.thousand,a/=Math.pow(10,3))),b.indexOf("b")>-1)for(b.indexOf(" b")>-1?(w=" ",b=b.replace(" b","")):b=b.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return b.indexOf("o")>-1&&(b.indexOf(" o")>-1?(x=" ",b=b.replace(" o","")):b=b.replace("o",""),x+=p[q].ordinal(a)),b.indexOf("[.]")>-1&&(m=!0,b=b.replace("[.]",".")),h=a.toString().split(".")[0],i=b.split(".")[1],j=b.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=c(a,i[0].length+i[1].length,d,i[1].length)):A=c(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?p[q].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=c(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[q].delimiters.thousands)),0===b.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function k(a,b){p[a]=b}function l(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function m(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=l(a),d=l(b);return c>d?c:d},-1/0)}var n,o="1.5.3",p={},q="en",r=null,s="0,0",t="undefined"!=typeof b&&b.exports;n=function(b){return n.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=n.fn.unformat(b)),new a(Number(b))},n.version=o,n.isNumeral=function(b){return b instanceof a},n.language=function(a,b){if(!a)return q;if(a&&!b){if(!p[a])throw new Error("Unknown language : "+a);q=a}return(b||!p[a])&&k(a,b),n},n.languageData=function(a){if(!a)return p[q];if(!p[a])throw new Error("Unknown language : "+a);return p[a]},n.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),n.zeroFormat=function(a){r="string"==typeof a?a:null},n.defaultFormat=function(a){s="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),n.fn=a.prototype={clone:function(){return n(this)},format:function(a,b){return d(this,a?a:s,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:e(this,a?a:s)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=m.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=m.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=m(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=m(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(n(this._value).subtract(a).value())}},t&&(b.exports=n),"undefined"==typeof ender&&(this.numeral=n),"function"==typeof define&&define.amd&&define([],function(){return n})}).call(this)},{}],2:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.Provider,this.$activity=a,this.$appointmentView=a.find("#calendarAppointmentView"),this.$chooseNew=e("#calendarChooseNew"),this.app=b,this.requestInfo=null,this.navAction=h.newCalendarItem,this.initAppointment()}var e=a("jquery"),f=a("moment"),g=a("knockout"),h=a("../viewmodels/NavAction");a("../components/DatePicker");var i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){if(this.requestInfo=a||{},null!==a){var b=this.appointmentsDataView.currentAppointment();if("textEditor"===a.request&&b)b[a.field](a.text);else if(a.selectClient===!0&&b)b.client(a.selectedClient);else if("undefined"!=typeof a.selectedDatetime&&b){b.startTime(a.selectedDatetime);var c=60;b.endTime(f(b.startTime()).add(c,"minutes").toDate())}else a.selectServices===!0&&b?b.services(a.selectedServices):a.selectLocation===!0&&b&&b.location(a.selectedLocation)}this.showAppointment(a&&a.appointmentId)};var j=a("../models/Appointment");d.prototype.showAppointment=function(a){a||0===a&&(this.appointmentsDataView.newAppointment(new j),this.appointmentsDataView.editMode(!0))},d.prototype.initAppointment=function(){if(!this.__initedAppointment){this.__initedAppointment=!0;var b=this.app,c=a("../testdata/calendarAppointments").appointments,d={appointments:g.observableArray(c),currentIndex:g.observable(0),editMode:g.observable(!1),newAppointment:g.observable(null)};this.appointmentsDataView=d,d.isNew=g.computed(function(){return null!==this.newAppointment()},d),d.currentAppointment=g.computed({read:function(){return this.isNew()?this.newAppointment():this.appointments()[this.currentIndex()%this.appointments().length]},write:function(a){var b=this.currentIndex()%this.appointments().length;this.appointments()[b]=a,this.appointments.valueHasMutated()},owner:d}),d.originalEditedAppointment={},d.goPrevious=function(){this.editMode()||this.currentIndex(0===this.currentIndex()?this.appointments().length-1:(this.currentIndex()-1)%this.appointments().length)},d.goNext=function(){this.editMode()||this.currentIndex((this.currentIndex()+1)%this.appointments().length)},d.edit=function(){this.editMode(!0)}.bind(d),d.cancel=function(){this.isNew()?this.newAppointment(null):this.currentAppointment(new j(this.originalEditedAppointment)),this.editMode(!1)}.bind(d),d.save=function(){if(this.isNew()){var a=this.newAppointment();a.summary("Massage Therapist Booking"),a.id(4),this.appointments.push(a),this.newAppointment(null),this.currentIndex(this.appointments().length-1),b.shell.go("bookingConfirmation",{booking:a})}this.editMode(!1)}.bind(d),d.editMode.subscribe(function(a){this.$activity.toggleClass("in-edit",a),this.$appointmentView.find(".AppointmentCard").toggleClass("in-edit",a),a?(d.originalEditedAppointment=g.toJS(d.currentAppointment()),b.navAction(null)):b.navAction(this.navAction)}.bind(this)),d.pickDateTime=function(){b.shell.go("datetimePicker",{selectedDatetime:null})},d.pickClient=function(){b.shell.go("clients",{selectClient:!0,selectedClient:null})},d.pickService=function(){b.shell.go("services",{selectServices:!0,selectedServices:d.currentAppointment().services()})},d.changePrice=function(){},d.pickLocation=function(){b.shell.go("locations",{selectLocation:!0,selectedLocation:d.currentAppointment().location()})};var e={preNotesToClient:"Notes to client",postNotesToClient:"Notes to client (afterwards)",preNotesToSelf:"Notes to self",postNotesToSelf:"Booking summary"};d.editTextField=function(a){b.shell.go("textEditor",{request:"textEditor",field:a,header:e[a],text:d.currentAppointment()[a]()})}.bind(this),d.returnToCalendar=function(){if(this.requestInfo){var a=this.appointmentsDataView.currentDate();a&&(this.requestInfo.date=a),this.app.shell.goBack(this.requestInfo),this.requestInfo=null}}.bind(this),d.currentDate=g.computed(function(){var a=this.currentAppointment(),b=null;return a&&a.startTime()&&(b=f(a.startTime()).hours(0).minutes(0).seconds(0).toDate()),b},d),g.applyBindings(d,this.$activity.get(0))}}},{"../components/DatePicker":24,"../models/Appointment":26,"../testdata/calendarAppointments":42,"../viewmodels/NavAction":70,knockout:!1,moment:!1}],3:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.LoggedUser,this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0))}function e(){this.booking=f.observable(null)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){a&&a.booking&&this.dataView.booking(a.booking)}},{knockout:!1}],4:[function(a,b,c){"use strict";function d(b,c){this.accessLevel=c.UserType.LoggedUser,this.$activity=b,this.$datepicker=b.find("#calendarDatePicker"),this.$dailyView=b.find("#calendarDailyView"),this.$dateHeader=b.find("#calendarDateHeader"),this.$dateTitle=this.$dateHeader.children(".CalendarDateHeader-date"),this.$chooseNew=f("#calendarChooseNew"),this.app=c,this.$datepicker.show().datepicker(),this.dataView=new e,h.applyBindings(this.dataView,b.get(0)),this.dataView.slotsData(a("../testdata/calendarSlots").calendar),this.requestInfo=null,this.dataView.currentDate.subscribe(function(a){var b=g(a);this.$datepicker.removeClass("is-visible"),this.$datepicker.datepicker("getValue").toISOString()!==b.toISOString()&&this.$datepicker.datepicker("setValue",a,!0)}.bind(this)),this.$dailyView.on("swipeleft swiperight",function(a){a.preventDefault();var b="swipeleft"===a.type?"next":"prev";f(document).trigger("touchend"),this.$datepicker.datepicker("moveValue",b,"date")}.bind(this)),this.$dateHeader.on("tap",".CalendarDateHeader-switch",function(a){switch(a.currentTarget.getAttribute("href")){case"#prev":this.$datepicker.datepicker("moveValue","prev","date");break;case"#next":this.$datepicker.datepicker("moveValue","next","date");break;default:return}a.preventDefault(),a.stopPropagation()}.bind(this)),this.$dateTitle.on("tap",function(a){this.$datepicker.toggleClass("is-visible"),a.preventDefault(),a.stopPropagation()}.bind(this)),this.$datepicker.on("changeDate",function(a){"days"===a.viewMode&&this.dataView.currentDate(a.date)}.bind(this)),this.dataView.currentDate(this.$datepicker.datepicker("getValue")),this.navAction=i.newCalendarItem}function e(){this.slots=h.observableArray([]),this.slotsData=h.observable({}),this.currentDate=h.observable(new Date),this.currentDate.subscribe(function(a){var b=g(a),c=b.format("YYYY-MM-DD"),d=this.slotsData();this.slots(d.hasOwnProperty(c)?d[c]:d["default"])}.bind(this))}var f=a("jquery"),g=a("moment");a("../components/DatePicker");var h=a("knockout"),i=(a("../models/CalendarSlot"),a("../viewmodels/NavAction")),j=null;c.init=function(a,b){return null===j&&(j=new d(a,b)),j},d.prototype.show=function(a){if(a&&a.date instanceof Date&&this.dataView.currentDate(a.date),a&&a.route)switch(a.route.segments[0]){case"appointment":this.$chooseNew.modal("hide");var b=a.route.segments[1];this.showAppointment(b||0);break;case"new":switch(a.route.segments[1]){case"booking":this.$chooseNew.modal("hide"),this.showAppointment(0);break;case"event":break;default:this.$chooseNew.modal("show")}}},d.prototype.showAppointment=function(a){this.app.shell.go("appointment",{date:this.dataView.currentDate(),appointmentId:a})}},{"../components/DatePicker":24,"../models/CalendarSlot":29,"../testdata/calendarSlots":43,"../viewmodels/NavAction":70,knockout:!1,moment:!1}],5:[function(a,b,c){"use strict";function d(b,c){this.accessLevel=c.UserType.Provider,this.$activity=b,this.app=c,this.$index=b.find("#clientsIndex"),this.$listView=b.find("#clientsListView"),this.dataView=new e,f.applyBindings(this.dataView,b.get(0)),this.dataView.clients(a("../testdata/clients").clients),this.dataView.isSelectionMode.subscribe(function(a){this.dataView.headerText(a?"Select a client":"Clients")}.bind(this)),this.requestInfo=null,this.dataView.isSelectionMode.subscribe(function(a){this.requestInfo&&this.requestInfo.selectClient===!0&&a===!1&&(this.requestInfo.selectedClient=this.dataView.selectedClient(),this.app.shell.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(){this.headerText=f.observable("Clients"),this.isSelectionMode=f.observable(!1),this.clients=f.observableArray([]),this.searchText=f.observable(""),this.getFilteredList=function(){var a=(this.searchText()||"").toLowerCase();return this.clients().filter(function(b){var c=b&&b.fullName()&&b.fullName()||"";return c=c.toLowerCase(),c.indexOf(a)>-1})},this.filteredClients=f.computed(function(){return this.getFilteredList()},this),this.groupedClients=f.computed(function(){var a=this.filteredClients().sort(function(a,b){return a.firstName()>b.firstName()}),b=[],c=null,d=null;return a.forEach(function(a){var e=(a.firstName()[0]||"").toUpperCase();e!==d?(c={letter:e,clients:[a]},b.push(c),d=e):c.clients.push(a)}),b},this),this.selectedClient=f.observable(null),this.selectClient=function(a){this.selectedClient(a),this.isSelectionMode(!1)}.bind(this)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){this.dataView.searchText(""),a=a||{},this.requestInfo=a,a.selectClient===!0&&this.dataView.isSelectionMode(!0)}},{"../testdata/clients":44,knockout:!1}],6:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.LoggedUser,this.$activity=a,this.app=b,this.navAction=null}var e=null;c.init=function(a,b){return null===e&&(e=new d(a,b)),e},d.prototype.show=function(){}},{}],7:[function(a,b,c){"use strict";function d(b,c){this.accessLevel=c.UserType.LoggedUser,this.app=c,this.$activity=b,this.$datePicker=b.find("#datetimePickerDatePicker"),this.$timePicker=b.find("#datetimePickerTimePicker"),this.$datePicker.show().datepicker();var d=this.dataView=new e;d.headerText="Select a start time",g.applyBindings(d,b.get(0)),this.$datePicker.on("changeDate",function(a){"days"===a.viewMode&&d.selectedDate(a.date)}.bind(this)),d.slotsData=a("../testdata/timeSlots").timeSlots,d.selectedDate.subscribe(function(a){this.bindDateData(a)}.bind(this)),this.bindDateData(new Date),this.requestInfo=null,this.dataView.selectedDatetime.subscribe(function(){this.requestInfo&&(this.requestInfo.selectedDatetime=this.dataView.selectedDatetime(),this.app.shell.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(){this.headerText=g.observable("Select a time"),this.selectedDate=g.observable(new Date),this.slotsData={},this.slots=g.observableArray([]),this.groupedSlots=g.computed(function(){var a=this.slots()&&this.slots()[0]||new Date,b=[{group:"Morning",slots:[],starts:new h(a,0,0),ends:new h(a,12,0)},{group:"Afternoon",slots:[],starts:new h(a,12,0),ends:new h(a,17,0)},{group:"Evening",slots:[],starts:new h(a,17,0),ends:new h(a,24,0)}],c=this.slots().sort();return c.forEach(function(a){b.forEach(function(b){a>=b.starts&&a<b.ends&&b.slots.push(a)})}),b},this),this.selectedDatetime=g.observable(null),this.selectDatetime=function(a){this.selectedDatetime(a)}.bind(this)}var f=(a("jquery"),a("moment")),g=a("knockout"),h=a("../utils/Time");a("../components/DatePicker");var i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){a=a||{},this.requestInfo=a},d.prototype.bindDateData=function(a){var b=f(a).format("YYYY-MM-DD"),c=this.dataView.slotsData;this.dataView.slots(c.hasOwnProperty(b)?c[b]:c["default"])}},{"../components/DatePicker":24,"../testdata/timeSlots":48,"../utils/Time":52,knockout:!1,moment:!1}],8:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.Provider,this.$activity=a,this.app=b,this.$nextBooking=a.find("#homeNextBooking"),this.$upcomingBookings=a.find("#homeUpcomingBookings"),this.$inbox=a.find("#homeInbox"),this.$performance=a.find("#homePerformance"),this.$getMore=a.find("#homeGetMore"),this.dataView=new e,g.applyBindings(this.dataView,a.get(0)),f(this.dataView),this.requestInfo=null,this.navAction=h.newItem}function e(){this.upcomingBookings=new j,this.nextBooking=g.observable(null),this.inbox=new k({topNumber:4}),this.performance=new l,this.getMore=new m}function f(b){b.inbox.messages(a("../testdata/messages").messages),b.performance.earnings.currentAmount(2400),b.performance.earnings.nextAmount(6200.54),b.performance.timeBooked.percent(.93),b.getMore.model.updateWith({availability:!0,payments:!0,profile:!0,coop:!0})}var g=(a("jquery"),a("knockout")),h=a("../viewmodels/NavAction"),i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){a=a||{},this.requestInfo=a;var b=this.dataView,c=this.app.model;c.getUpcomingBookings().then(function(a){a.nextBookingID?c.getBooking(a.nextBookingID).then(b.nextBooking):b.nextBooking(null),b.upcomingBookings.today.quantity(a.today.quantity),b.upcomingBookings.today.time(a.today.time&&new Date(a.today.time)),b.upcomingBookings.tomorrow.quantity(a.tomorrow.quantity),b.upcomingBookings.tomorrow.time(a.tomorrow.time&&new Date(a.tomorrow.time)),b.upcomingBookings.nextWeek.quantity(a.nextWeek.quantity)})};{var j=a("../models/UpcomingBookingsSummary"),k=a("../models/MailFolder"),l=a("../models/PerformanceSummary"),m=a("../models/GetMore");a("../utils/Time")}},{"../models/GetMore":31,"../models/MailFolder":34,"../models/PerformanceSummary":37,"../models/UpcomingBookingsSummary":40,"../testdata/messages":46,"../utils/Time":52,"../viewmodels/NavAction":70,knockout:!1}],9:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.navAction=null,this.accessLevel=null}var e=null;c.init=function(a,b){return null===e&&(e=new d(a,b)),e},d.prototype.show=function(){this.app.model.user().isAnonymous()||this.app.goDashboard()}},{}],10:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0)),this.navAction=g.goBack}function e(){this.profile=f.observable("customer")}var f=a("knockout"),g=a("../viewmodels/NavAction"),h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){a&&a.route&&a.route.segments&&a.route.segments.length&&this.dataView.profile(a.route.segments[0])}},{"../viewmodels/NavAction":70,knockout:!1}],11:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.Provider,this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0)),this.navAction=null}function e(){this.location=f.observable(new g),this.header=f.observable("Edit Location"),this.save=function(){},this.cancel=function(){}}var f=a("knockout"),g=a("../models/Location"),h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){var b=0,c="";if(a&&(a.locationID?b=a.locationID:a.route&&a.route.segments?b=parseInt(a.route.segments[0]):a.create&&(c=a.create)),b){var d={1:new g({locationID:1,name:"Home",addressLine1:"Here Street",city:"San Francisco",postalCode:"90001",stateProvinceCode:"CA",countryID:1,isServiceRadius:!0,isServiceLocation:!1}),2:new g({locationID:1,name:"Workshop",addressLine1:"Unknow Street",city:"San Francisco",postalCode:"90001",stateProvinceCode:"CA",countryID:1,isServiceRadius:!1,isServiceLocation:!0})},e=d[b];e?(this.dataView.location(e),this.dataView.header("Edit Location")):(this.dataView.location(null),this.dataView.header("Unknow location or was deleted"))}else switch(this.dataView.location(new g),a.create){case"serviceRadius":this.dataView.location().isServiceRadius(!0),this.dataView.header("Add a service radius");break;case"serviceLocation":this.dataView.location().isServiceLocation(!0),this.dataView.header("Add a service location");break;default:this.dataView.location().isServiceRadius(!0),this.dataView.location().isServiceLocation(!0),this.dataView.header("Add a location")}}},{"../models/Location":33,knockout:!1}],12:[function(a,b,c){"use strict";function d(b,c){this.accessLevel=c.UserType.Provider,this.app=c,this.$activity=b,this.$listView=b.find("#locationsListView");var d=this.dataView=new e;f.applyBindings(d,b.get(0)),d.locations(a("../testdata/locations").locations),this.dataView.isSelectionMode.subscribe(function(a){this.dataView.headerText(a?"Select/Add location":"Locations")}.bind(this)),this.requestInfo=null,this.dataView.isSelectionMode.subscribe(function(a){this.requestInfo&&this.requestInfo.selectLocation===!0&&a===!1&&(this.requestInfo.selectedLocation=this.dataView.selectedLocation(),this.app.shell.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(){this.headerText=f.observable("Locations"),this.locations=f.observableArray([]),this.isSelectionMode=f.observable(!1),this.selectedLocation=f.observable(null),this.selectLocation=function(a){this.selectedLocation(a),this.isSelectionMode(!1)}.bind(this)}var f=(a("jquery"),a("knockout")),g=null;c.init=function(a,b){return null===g&&(g=new d(a,b)),g},d.prototype.show=function(a){if(a=a||{},this.requestInfo=a,a.selectLocation===!0)this.dataView.isSelectionMode(!0),this.dataView.selectedLocation(a.selectedLocation);else if(a.route&&a.route.segments){var b=a.route.segments[0];b&&("new"===b?this.app.shell.go("locationEdition",{create:a.route.segments[1]}):this.app.shell.go("locationEdition",{locationID:b}))}}},{"../testdata/locations":45,knockout:!1}],13:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.Anonymous,this.$activity=a,this.app=b,this.dataView=new e,f.applyBindings(this.dataView,a.get(0)),this.navAction=g.goBack,this.dataView.isLogingIn.subscribe(function(c){if(c===!0){var d=a.find('[type="submit"]');d.button("loading"),this.dataView.loginError("");var e=function(){this.dataView.isLogingIn(!1),d.button("reset")}.bind(this);if(this.dataView.username.error()||this.dataView.password.error())return this.dataView.loginError("Review your data"),void e();b.model.login(this.dataView.username(),this.dataView.password()).then(function(){this.dataView.loginError(""),e(),this.app.goDashboard()}.bind(this))["catch"](function(){this.dataView.loginError("Invalid username or password"),e()}.bind(this))}}.bind(this)),this.dataView.loginError.subscribe(function(b){var c=a.find(":input").get(0);b?c.focus():c.blur()})}function e(){this.username=f.observable(""),this.password=f.observable(""),this.loginError=f.observable(""),this.isLogingIn=f.observable(!1),this.performLogin=function(){this.isLogingIn(!0)}.bind(this);var a=/^[-0-9A-Za-z!#$%&'*+/=?^_`{|}~.]+@[-0-9A-Za-z!#$%&'*+/=?^_`{|}~.]+$/;this.username.error=f.observable(""),this.username.subscribe(function(b){this.username.error(b?a.test(b)?"":"Is not a valid email":"Required")}.bind(this)),this.password.error=f.observable(""),this.password.subscribe(function(a){var b="";a||(b="Required"),this.password.error(b)}.bind(this))}var f=(a("jquery"),a("knockout")),g=a("../viewmodels/NavAction"),h=(a("../models/User"),null);c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(){this.app.status("login")}},{"../models/User":41,"../viewmodels/NavAction":70,knockout:!1}],14:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.LoggedUser,this.$activity=a,this.app=b}var e=null;c.init=function(a,b){return null===e&&(e=new d(a,b)),e},d.prototype.show=function(){this.app.model.logout().then(function(){var a=this.app.model.user().constructor.newAnonymous();this.app.model.user().model.updateWith(a),this.app.shell.go("/")}.bind(this))}},{}],15:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.LoggedUser,this.$activity=a,this.app=b,this.navAction=null}var e=null;c.init=function(a,b){return null===e&&(e=new d(a,b)),e},d.prototype.show=function(){}},{}],16:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.LoggedUser,this.$activity=a,this.app=b,this.navAction=null}var e=null;c.init=function(a,b){return null===e&&(e=new d(a,b)),e},d.prototype.show=function(){}},{}],17:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.Provider,this.$activity=a,this.app=b,this.dataView=new e,g.applyBindings(this.dataView,a.get(0)),f(this.dataView),this.requestInfo=null,this.navAction=h.newItem}function e(){this.positions=g.observableArray([])}function f(a){a.positions.push(new j({positionSingular:"Massage Therapist"})),a.positions.push(new j({positionSingular:"Housekeeper"}))}var g=(a("jquery"),a("knockout")),h=a("../viewmodels/NavAction"),i=null;c.init=function(a,b){return null===i&&(i=new d(a,b)),i},d.prototype.show=function(a){a=a||{},this.requestInfo=a};var j=a("../models/Position")},{"../models/Position":38,"../viewmodels/NavAction":70,knockout:!1}],18:[function(a,b,c){"use strict";function d(b,c){this.accessLevel=c.UserType.Provider,this.app=c,this.$activity=b,this.$listView=b.find("#servicesListView");var d=this.dataView=new f;g.applyBindings(d,b.get(0)),d.services(a("../testdata/services").services.map(e)),this.dataView.isSelectionMode.subscribe(function(a){this.dataView.headerText(a?"Select service(s)":"Services")}.bind(this)),this.requestInfo=null,this.dataView.isSelectionMode.subscribe(function(a){this.requestInfo&&this.requestInfo.selectServices===!0&&a===!1&&(this.requestInfo.selectedServices=this.dataView.selectedServices(),this.app.shell.goBack(this.requestInfo),this.requestInfo=null)}.bind(this))}function e(a){return a.isSelected=g.observable(!1),a}function f(){this.headerText=g.observable("Services"),this.services=g.observableArray([]),this.isSelectionMode=g.observable(!1),this.groupedServices=g.computed(function(){var a=this.services(),b={group:"Services",services:[]},c={group:"Add-on services",services:[]},d=[b,c];return a.forEach(function(a){var d=a.isAddon();d?c.services.push(a):b.services.push(a)}),d},this),this.selectedServices=g.observableArray([]),this.toggleServiceSelection=function(a){var b=-1,c=this.selectedServices().some(function(c,d){return c===a?(b=d,!0):void 0});a.isSelected(!c),c?this.selectedServices.splice(b,1):this.selectedServices.push(a)}.bind(this),this.endSelection=function(){this.isSelectionMode(!1)}.bind(this)}var g=(a("jquery"),a("knockout")),h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){a=a||{},this.requestInfo=a,a.selectServices===!0&&this.dataView.isSelectionMode(!0)}},{"../testdata/services":47,knockout:!1}],19:[function(a,b,c){"use strict";function d(a,b){this.accessLevel=b.UserType.Anonymous,this.$activity=a,this.app=b,this.dataView=new f,h.applyBindings(this.dataView,a.get(0)),this.navAction=i.goBack,a.find("#accountSignUpBtn").on("click",function(a){var b=g(a.target).button("loading");return setTimeout(function(){b.button("reset"),e(this.app);var a=!1;this.app.shell.go(a?"onboardingHome":"home")},1e3),!1}.bind(this))}function e(a){a.model.user({email:h.observable("test@loconomics.com"),firstName:h.observable("Username"),onboardingStep:h.observable(null),userType:h.observable("p")})}function f(){this.profile=h.observable("customer")}var g=a("jquery"),h=a("knockout"),i=a("../viewmodels/NavAction"),j=null;c.init=function(a,b){return null===j&&(j=new d(a,b)),j},d.prototype.show=function(a){a&&a.route&&a.route.segments&&a.route.segments.length&&this.dataView.profile(a.route.segments[0])}},{"../viewmodels/NavAction":70,knockout:!1}],20:[function(a,b,c){"use strict";function d(a,b){this.$activity=a,this.app=b,this.$textarea=this.$activity.find("textarea"),this.textarea=this.$textarea.get(0),this.dataView=new e,f.applyBindings(this.dataView,a.get(0)),this.requestInfo=null,this.dataView.on("saved",function(){this.requestInfo&&(this.requestInfo.text=this.dataView.text()),this.app.shell.goBack(this.requestInfo)}.bind(this)),this.dataView.on("cancel",function(){b.shell.goBack()}.bind(this))}function e(){this.headerText=f.observable("Text"),this.text=f.observable(""),this.rowsNumber=f.observable(2),this.cancel=function(){this.emit("cancel")},this.save=function(){this.emit("saved")}}var f=(a("jquery"),a("knockout")),g=a("events").EventEmitter,h=null;c.init=function(a,b){return null===h&&(h=new d(a,b)),h},d.prototype.show=function(a){a=a||{},this.requestInfo=a,this.dataView.headerText(a.header),this.dataView.text(a.text),a.rowsNumber&&this.dataView.rowsNumber(a.rowsNumber),this.textarea.focus(),this.$textarea.click()},e._inherits(g)},{events:!1,knockout:!1}],21:[function(a,b){"use strict";b.exports={calendar:a("./activities/calendar"),datetimePicker:a("./activities/datetimePicker"),clients:a("./activities/clients"),services:a("./activities/services"),locations:a("./activities/locations"),textEditor:a("./activities/textEditor"),home:a("./activities/home"),appointment:a("./activities/appointment"),bookingConfirmation:a("./activities/bookingConfirmation"),index:a("./activities/index"),login:a("./activities/login"),logout:a("./activities/logout"),learnMore:a("./activities/learnMore"),signup:a("./activities/signup"),contactInfo:a("./activities/contactInfo"),positions:a("./activities/positions"),onboardingHome:a("./activities/onboardingHome"),locationEdition:a("./activities/locationEdition"),onboardingComplete:a("./activities/onboardingComplete")}
},{"./activities/appointment":2,"./activities/bookingConfirmation":3,"./activities/calendar":4,"./activities/clients":5,"./activities/contactInfo":6,"./activities/datetimePicker":7,"./activities/home":8,"./activities/index":9,"./activities/learnMore":10,"./activities/locationEdition":11,"./activities/locations":12,"./activities/login":13,"./activities/logout":14,"./activities/onboardingComplete":15,"./activities/onboardingHome":16,"./activities/positions":17,"./activities/services":18,"./activities/signup":19,"./activities/textEditor":20}],22:[function(a,b){"use strict";var c=window.location.pathname,d=a("./utils/shell/hashbangHistory"),e=a("./utils/shell/index"),f=e.Shell,g=e.DomItemsManager,e=new f({root:"body",baseUrl:c,forceHashbang:!0,indexName:"index",linkEvent:"tap",loader:null,history:d,domItemsManager:new g({idAttributeName:"data-activity"})});e.on("error",function(a){var b="Unknow error";a&&(b="string"==typeof a?a:a.message?a.message:JSON.stringify(a)),window.alert(b)}),b.exports=e},{"./utils/shell/hashbangHistory":63,"./utils/shell/index":64}],23:[function(a){"use strict";function b(){var a=h.model.user();h.status(a.onboardingStep()?"onboarding":a.isAnonymous()?"out":"in")}var c=a("jquery");a("jquery-mobile");var d=a("knockout");d.bindingHandlers.format=a("ko/formatBinding").formatBinding;var e=a("./utils/bootknockBindingHelpers");a("./utils/Function.prototype._inherits"),a("./utils/Function.prototype._delayed"),a("es6-promise").polyfill();var f=a("layoutUpdateEvent"),g=(a("./viewmodels/NavAction"),a("./viewmodels/AppModel"));a("./locales/en-US-LC");var h={shell:a("./app-shell"),model:new g,status:d.observable("out"),activities:a("./app-activities"),goDashboard:function(){var a=this.model.user().onboardingStep();this.shell.go(a?"onboardingHome/"+a:"home")},updateMenu:function(a){this.$menu=this.$menu||c("#navbar"),this.$menu.find("li").removeClass("active"),this.$menu.find(".go-"+a).closest("li").addClass("active"),this.$menu.filter(":visible").collapse("hide")},navAction:d.observable(null),defaultNavAction:null,updateAppNav:function(a){this.navAction("navAction"in a?a.navAction:this.defaultNavAction)}};h.getActivity=function(a){var b=this.activities[a];if(b){var c=this.shell.items.find(a);if(c&&c.length)return b.init(c,this)}return null},h.getActivityControllerByRoute=function(a){var b=a.name||this.shell.indexName;return this.getActivity(b)},h.shell.accessControl=a("./utils/accessControl")(h),h.UserType=h.model.user().constructor.UserType,h.model.user().isAnonymous.subscribe(b),h.model.user().onboardingStep.subscribe(b);var i=function(){f.on();var a=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);a&&(c("html").height(window.innerHeight+"px"),c(window).on("layoutUpdate",function(){c("html").height(window.innerHeight+"px")})),e.plugIn(d),window&&window.plugins&&window.plugins.Keyboard&&window.plugins.Keyboard.disableScroll(!0),c(document).on("tap","[data-shell]",function(){var a=c(this).data("shell")||"",b=a.split(" "),d=b[0];d&&"function"==typeof h.shell[d]&&h.shell[d].apply(d,b.slice(1))}),h.shell.on(h.shell.events.itemReady,function(a,b){var c=a.data("activity"),d=h.getActivity(c);d.show(b),h.updateMenu(c),h.updateAppNav(d)}),d.applyBindings({navAction:h.navAction,status:h.status},c(".AppNav").get(0)),h.model.init().then(h.shell.run.bind(h.shell)).then(function(){c("html").addClass("is-ready")}),window.app=h};c(window.cordova?function(){c(document).on("deviceready",i)}:i)},{"./app-activities":21,"./app-shell":22,"./locales/en-US-LC":25,"./utils/Function.prototype._delayed":49,"./utils/Function.prototype._inherits":50,"./utils/accessControl":53,"./utils/bootknockBindingHelpers":55,"./viewmodels/AppModel":69,"./viewmodels/NavAction":70,"es6-promise":!1,knockout:!1}],24:[function(a,b,c){var d=a("jquery"),e={component:"DatePicker",months:"DatePicker-months",days:"DatePicker-days",monthDay:"day",month:"month",year:"year",years:"DatePicker-years"},f=function(a,b){if(this.element=d(a),this.format=g.parseFormat(b.format||this.element.data("date-format")||"mm/dd/yyyy"),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isPlaceholder=this.element.is(".calendar-placeholder"),this.picker=d(g.template).appendTo(this.isPlaceholder?this.element:"body").on("click tap",d.proxy(this.click,this)),this.picker.addClass(this.isPlaceholder?"container":"dropdown-menu"),this.isPlaceholder?(this.picker.show(),"today"==this.element.data("date")&&(this.date=new Date,this.set()),this.element.trigger({type:"show",date:this.date})):this.isInput?this.element.on({focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this)}):this.component?this.component.on("click tap",d.proxy(this.show,this)):this.element.on("click tap",d.proxy(this.show,this)),this.element.on("swipeleft",function(a){a.preventDefault(),this.moveDate("next")}.bind(this)).on("swiperight",function(a){a.preventDefault(),this.moveDate("prev")}.bind(this)),this.minViewMode=b.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=b.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=b.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=b.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};f.prototype={constructor:f,show:function(a){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),d(window).on("resize",d.proxy(this.place,this)),a&&(a.stopPropagation(),a.preventDefault()),!this.isInput;var b=this;d(document).on("mousedown",function(a){0===d(a.target).closest("."+e.component).length&&b.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),d(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||d(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var a=g.formatDate(this.date,this.format);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setValue:function(a,b){this.date="string"==typeof a?g.parseDate(a,this.format):new Date(a),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill(),b!==!0&&this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})},getValue:function(){return this.date},moveValue:function(a,b){return-1!=["prev","next"].indexOf(a&&a.toLowerCase())?(b=b?g.modesSet[b]:g.modes[this.viewMode],this.date["set"+b.navFnc].call(this.date,this.date["get"+b.navFnc].call(this.date)+b.navStep*("prev"===a?-1:1)),this.setValue(this.date),this.date):void 0},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},update:function(a){this.date=g.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+g.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find("."+e.days+" thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="'+e.month+'">'+g.dates.monthsShort[b++]+"</span>";this.picker.find("."+e.months+" td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),c=a.getMonth(),d=this.date.valueOf();this.picker.find("."+e.days+" th:eq(1)").html(g.dates.months[c]+" "+b);var f=new Date(b,c-1,28,0,0,0,0),h=g.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(h),f.setDate(h-(f.getDay()-this.weekStart+7)%7);var i=new Date(f);i.setDate(i.getDate()+42),i=i.valueOf();var j,k,l,m=[];if(this._daysCreated!==!0){for(;f.valueOf()<i;)f.getDay()===this.weekStart&&m.push("<tr>"),j=this.onRender(f),k=f.getFullYear(),l=f.getMonth(),c>l&&k===b||b>k?j+=" old":(l>c&&k===b||k>b)&&(j+=" new"),f.valueOf()===d&&(j+=" active"),m.push('<td class="'+e.monthDay+" "+j+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&m.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find("."+e.days+" tbody").empty().append(m.join("")),this._daysCreated=!0}else for(var n=this.picker.find("."+e.days+" tbody tr:first-child()"),o=null;f.valueOf()<i;){var p=f.getDay()-this.weekStart;j=this.onRender(f),k=f.getFullYear(),l=f.getMonth(),c>l&&k===b||b>k?j+=" old":(l>c&&k===b||k>b)&&(j+=" new"),f.valueOf()===d&&(j+=" active"),o=n.find("td:eq("+p+")"),o.attr("class","day "+j).text(f.getDate()),f.getDay()===this.weekEnd&&(n=n.next("tr")),f.setDate(f.getDate()+1)}var q=this.date.getFullYear(),r=this.picker.find("."+e.months).find("th:eq(1)").html(b).end().find("span").removeClass("active");q===b&&r.eq(this.date.getMonth()).addClass("active"),m="",b=10*parseInt(b/10,10);var s=this.picker.find("."+e.years).find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;var t;if(this._yearsCreated!==!0){for(t=-1;11>t;t++)m+='<span class="'+e.year+(-1===t||10===t?" old":"")+(q===b?" active":"")+'">'+b+"</span>",b+=1;s.html(m),this._yearsCreated=!0}else{var u=s.find("span:first-child()");for(t=-1;11>t;t++)u.text(b).attr("class","year"+(-1===t||10===t?" old":"")+(q===b?" active":"")),b+=1,u=u.next()}},moveDate:function(a,b){-1!=["prev","next"].indexOf(a&&a.toLowerCase())&&(b=b||this.viewMode,this.viewDate["set"+g.modes[b].navFnc].call(this.viewDate,this.viewDate["get"+g.modes[b].navFnc].call(this.viewDate)+g.modes[b].navStep*("prev"===a?-1:1)),this.fill(),this.set())},click:function(a){a.stopPropagation(),a.preventDefault();var b=d(a.target).closest("span, td, th");if(1===b.length){var c,f;switch(b[0].nodeName.toLowerCase()){case"th":switch(b[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.moveDate(b[0].className)}break;case"span":b.is("."+e.month)?(c=b.parent().find("span").index(b),this.viewDate.setMonth(c)):(f=parseInt(b.text(),10)||0,this.viewDate.setFullYear(f)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(b.is(".day")&&!b.is(".disabled")){var h=parseInt(b.text(),10)||1;c=this.viewDate.getMonth(),b.is(".old")?c-=1:b.is(".new")&&(c+=1),f=this.viewDate.getFullYear(),this.date=new Date(f,c,h,0,0,0,0),this.viewDate=new Date(f,c,Math.min(28,h),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:g.modes[this.viewMode].clsName})}}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter("."+e.component+"-"+g.modes[this.viewMode].clsName).show()}},d.fn.datepicker=function(a){var b,c=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=d(this),g=e.data("datepicker"),h="object"==typeof a&&a;return g||e.data("datepicker",g=new f(this,d.extend({},d.fn.datepicker.defaults,h))),"string"==typeof a?(b=g[a].apply(g,c),!1):void 0}),"undefined"!=typeof b?b:this},d.fn.datepicker.defaults={onRender:function(){return""}},d.fn.datepicker.Constructor=f;var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"day",navFnc:"Date",navStep:1}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,g.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a,b){var c,d=a.split(b.separator);if(a=new Date,a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),d.length===b.parts.length){for(var e=a.getFullYear(),f=a.getDate(),g=a.getMonth(),h=0,i=b.parts.length;i>h;h++)switch(c=parseInt(d[h],10)||1,b.parts[h]){case"dd":case"d":f=c,a.setDate(c);break;case"mm":case"m":g=c-1,a.setMonth(c-1);break;case"yy":e=2e3+c,a.setFullYear(2e3+c);break;case"yyyy":e=c,a.setFullYear(c)}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m,a=[];for(var d=0,e=b.parts.length;e>d;d++)a.push(c[b.parts[d]]);return a.join(b.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};g.template='<div class="'+e.component+'"><div class="'+e.days+'"><table class=" table-condensed">'+g.headTemplate+'<tbody></tbody></table></div><div class="'+e.months+'"><table class="table-condensed">'+g.headTemplate+g.contTemplate+'</table></div><div class="'+e.years+'"><table class="table-condensed">'+g.headTemplate+g.contTemplate+"</table></div></div>",g.modesSet={date:g.modes[3],month:g.modes[0],year:g.modes[1],decade:g.modes[2]},c.DatePicker=f,c.defaults=g,c.utils=g},{}],25:[function(a){"use strict";var b=a("moment"),c=b.locale();b.locale("en-US-LC",{meridiemParse:/[ap]\.?\.?/i,meridiem:function(a,b,c){return a>11?c?"p":"P":c?"a":"A"},calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"[last] dddd",nextWeek:"dddd",sameElse:"M/D"},longDateFormat:{LT:"h:mma",LTS:"h:mm:ssa",L:"MM/DD/YYYY",l:"M/D/YYYY",LL:"MMMM Do YYYY",ll:"MMM D YYYY",LLL:"MMMM Do YYYY LT",lll:"MMM D YYYY LT",LLLL:"dddd, MMMM Do YYYY LT",llll:"ddd, MMM D YYYY LT"}}),b.locale(c)},{moment:!1}],26:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({id:null,startTime:null,endTime:null,summary:"New booking",subtotalPrice:0,feePrice:0,pfeePrice:0,totalPrice:0,ptotalPrice:0,preNotesToClient:null,postNotesToClient:null,preNotesToSelf:null,postNotesToSelf:null},a),a=a||{},this.client=d.observable(a.client?new f(a.client):null),this.location=d.observable(new g(a.location)),this.locationSummary=d.computed(function(){return this.location().singleLine()},this),this.services=d.observableArray((a.services||[]).map(function(a){return a instanceof h?a:new h(a)})),this.servicesSummary=d.computed(function(){return this.services().map(function(a){return a.name()}).join(", ")},this),this.services.subscribe(function(a){this.ptotalPrice(a.reduce(function(a,b){return a+b.price()},0))}.bind(this)),this.displayedDate=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").calendar()},this),this.displayedStartTime=d.pureComputed(function(){return i(this.startTime()).locale("en-US-LC").format("LT")},this),this.displayedEndTime=d.pureComputed(function(){return i(this.endTime()).locale("en-US-LC").format("LT")},this),this.displayedTimeRange=d.pureComputed(function(){return this.displayedStartTime()+"-"+this.displayedEndTime()},this),this.itStarted=d.pureComputed(function(){return this.startTime()&&new Date>=this.startTime()},this),this.itEnded=d.pureComputed(function(){return this.endTime()&&new Date>=this.endTime()},this),this.isNew=d.pureComputed(function(){return!this.id()},this),this.stateHeader=d.pureComputed(function(){var a="";return this.isNew()||(a=this.itStarted()?this.itEnded()?"Completed:":"Now:":"Upcoming:"),a},this)}var d=a("knockout"),e=a("./Model"),f=a("./Client"),g=a("./Location"),h=a("./Service"),i=a("moment");b.exports=c},{"./Client":30,"./Location":33,"./Model":36,"./Service":39,knockout:!1,moment:!1}],27:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({quantity:0,concept:"",time:null,timeFormat:" [@] h:mma"},a),this.phrase=d.pureComputed(function(){var a=this.time()&&f(this.time()).format(this.timeFormat())||"";return this.concept()+a},this)}var d=a("knockout"),e=a("./Model"),f=a("moment");b.exports=c},{"./Model":36,knockout:!1,moment:!1}],28:[function(a,b){"use strict";function c(a){g(this),this.model.defProperties({frequencyTypeID:0,interval:1,until:null,count:null,ending:null,selectedWeekDays:[],monthlyWeekDay:!1,incompatible:!1,tooMany:!1},a)}function d(a){g(this),this.model.defProperties({startTime:null,endTime:null},a)}function e(a){g(this),this.model.defProperties({calendarEventID:0,userID:0,eventTypeID:3,summary:"",availabilityTypeID:0,startTime:null,endTime:null,kind:0,isAllDay:!1,timeZone:"Z",location:null,updatedDate:null,createdDate:null,description:"",readOnly:!1},a),this.recurrenceRule=f.observable(a&&a.recurrenceRule&&new c(a.recurrenceRule)),this.recurrenceOccurrences=f.observableArray([]),a&&a.recurrenceOccurrences&&a.recurrenceOccurrences.forEach(function(a){this.RecurrenceOccurrences.push(new d(a))}.bind(this))}{var f=a("knockout"),g=a("./Model");a("moment")}b.exports=e,e.RecurrenceRule=c,e.RecurrenceOccurrence=d},{"./Model":36,knockout:!1,moment:!1}],29:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({startTime:null,endTime:null,subject:"",description:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}{var d=(a("knockout"),a("./Model"));a("./Client")}b.exports=c},{"./Client":30,"./Model":36,knockout:!1}],30:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({firstName:"",lastName:""},a),this.fullName=d.computed(function(){return this.firstName()+" "+this.lastName()},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":36,knockout:!1}],31:[function(a,b){"use strict";function c(){e(this),this.model.defProperties({availability:!1,payments:!1,profile:!1,coop:!0});var a={availability:new f({contentLine1:"Complete your availability to create a cleaner calendar",markerIcon:"glyphicon glyphicon-calendar",actionIcon:"glyphicon glyphicon-chevron-right"}),payments:new f({contentLine1:"Start accepting payments through Loconomics",markerIcon:"glyphicon glyphicon-usd",actionIcon:"glyphicon glyphicon-chevron-right"}),profile:new f({contentLine1:"Activate your profile in the marketplace",markerIcon:"glyphicon glyphicon-user",actionIcon:"glyphicon glyphicon-chevron-right"}),coop:new f({contentLine1:"Learn more about our cooperative",actionIcon:"glyphicon glyphicon-chevron-right"})};this.items=d.pureComputed(function(){var b=[];return Object.keys(a).forEach(function(c){this[c]()&&b.push(a[c])}.bind(this)),b},this)}var d=a("knockout"),e=a("./Model"),f=a("./ListViewItem");b.exports=c},{"./ListViewItem":32,"./Model":36,knockout:!1}],32:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({markerLine1:null,markerLine2:null,markerIcon:null,contentLine1:"",contentLine2:null,link:"#",actionIcon:null,actionText:null,classNames:""},a)}{var d=(a("knockout"),a("./Model"));a("moment")}b.exports=c},{"./Model":36,knockout:!1,moment:!1}],33:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({locationID:0,name:"",addressLine1:null,addressLine2:null,city:null,stateProvinceCode:null,stateProviceID:null,postalCode:null,postalCodeID:null,countryID:null,latitude:null,longitude:null,specialInstructions:null,isServiceRadius:!1,isServiceLocation:!1,serviceRadius:0},a),this.singleLine=d.computed(function(){var a=[this.addressLine1(),this.city(),this.postalCode(),this.stateProvinceCode()];return a.filter(function(a){return!!a}).join(", ")},this),this.countryName=d.computed(function(){return 1===this.countryID()?"United States":2===this.countryID()?"Spain":"unknow"},this),this.countryCodeAlpha2=d.computed(function(){return 1===this.countryID()?"US":2===this.countryID()?"ES":""},this),this.latlng=d.computed(function(){return{lat:this.latitude(),lng:this.longitude()}},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":36,knockout:!1}],34:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({messages:[],topNumber:10},a),this.top=d.pureComputed(function(a){return a&&this.topNumber(a),f.first(this.messages(),this.topNumber())},this)}var d=a("knockout"),e=a("./Model"),f=(a("moment"),a("lodash"));b.exports=c},{"./Model":36,knockout:!1,lodash:!1,moment:!1}],35:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({createdDate:null,updatedDate:null,subject:"",content:null,link:"#",actionIcon:null,actionText:null,classNames:""},a),this.displayedDate=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").calendar()},this),this.displayedTime=d.pureComputed(function(){return f(this.createdDate()).locale("en-US-LC").format("LT")},this)}var d=a("knockout"),e=a("./Model"),f=a("moment");b.exports=c},{"./Model":36,knockout:!1,moment:!1}],36:[function(a,b){"use strict";function c(a){if(!(this instanceof c)){var b=new c(a);return a.model=b,b}this.modelObject=a,this.propertiesList=[],this.fieldsList=[],this.mappingOptions={}}var d=a("knockout");d.mapping=a("knockout.mapping"),b.exports=c,c.prototype.defProperties=function(a,b){b=b||{};var c=this.modelObject,e=this.propertiesList;Object.keys(a).forEach(function(f){var g=a[f];c[f]=Array.isArray(g)?d.observableArray(g):d.observable(g),c[f]._defaultValue=g,"undefined"!=typeof b[f]&&c[f](b[f]),e.push(f)})},c.prototype.defFields=function(a,b){b=b||{};var c=this.modelObject,d=this.fieldsList;Object.keys(a).each(function(e){var f=a[e];c[e]=f,"undefined"!=typeof b[e]&&(c[e]=b[e]),d.push(e)})},c.prototype.updateWith=function(a){if(a&&a.model instanceof c){var b={};a.model.propertiesList.forEach(function(c){b[c]=a[c]()}),a.model.fieldsList.forEach(function(c){b[c]=a[c]}),a=b}d.mapping.fromJS(a,this.mappingOptions,this.modelObject)}},{knockout:!1,"knockout.mapping":!1}],37:[function(a,b){"use strict";function c(a){g(this),a=a||{},this.earnings=new d(a.earnings);var b=new h;b.markerLine1=f.computed(function(){var a=j(this.currentAmount()).format("$0,0");return a},this.earnings),b.contentLine1=f.computed(function(){return this.currentConcept()},this.earnings),b.markerLine2=f.computed(function(){var a=j(this.nextAmount()).format("$0,0");return a},this.earnings),b.contentLine2=f.computed(function(){return this.nextConcept()},this.earnings),this.timeBooked=new e(a.timeBooked);var c=new h;c.markerLine1=f.computed(function(){var a=j(this.percent()).format("0%");return a},this.timeBooked),c.contentLine1=f.computed(function(){return this.concept()},this.timeBooked),this.items=f.pureComputed(function(){var a=[];return a.push(b),a.push(c),a},this)}function d(a){g(this),this.model.defProperties({currentAmount:0,currentConceptTemplate:"already paid this month",nextAmount:0,nextConceptTemplate:"projected {month} earnings"},a),this.currentConcept=f.pureComputed(function(){var a=i().format("MMMM");return this.currentConceptTemplate().replace(/\{month\}/,a)},this),this.nextConcept=f.pureComputed(function(){var a=i().add(1,"month").format("MMMM");return this.nextConceptTemplate().replace(/\{month\}/,a)},this)}function e(a){g(this),this.model.defProperties({percent:0,conceptTemplate:"of available time booked in {month}"},a),this.concept=f.pureComputed(function(){var a=i().add(1,"month").format("MMMM");return this.conceptTemplate().replace(/\{month\}/,a)},this)}var f=a("knockout"),g=a("./Model"),h=a("./ListViewItem"),i=a("moment"),j=a("numeral");b.exports=c},{"./ListViewItem":32,"./Model":36,knockout:!1,moment:!1,numeral:1}],38:[function(a,b){"use strict";function c(a){d(this),this.model.defProperties({positionID:0,positionSingular:"",positionPlural:"",description:"",active:!0},a)}var d=(a("knockout"),a("./Model"));b.exports=c},{"./Model":36,knockout:!1}],39:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({name:"",price:0,duration:0,isAddon:!1},a),this.durationText=d.computed(function(){var a=this.duration()||0;return a?a+" minutes":""},this)}var d=a("knockout"),e=a("./Model");b.exports=c},{"./Model":36,knockout:!1}],40:[function(a,b){"use strict";function c(){e(this),this.today=new f({concept:"left today",timeFormat:" [ending @] h:mma"}),this.tomorrow=new f({concept:"tomorrow",timeFormat:" [starting @] h:mma"}),this.nextWeek=new f({concept:"next week"}),this.items=d.pureComputed(function(){var a=[];return a.push(this.today),a.push(this.tomorrow),a.push(this.nextWeek),a},this)}var d=a("knockout"),e=a("./Model"),f=a("./BookingSummary");b.exports=c},{"./BookingSummary":27,"./Model":36,knockout:!1}],41:[function(a,b){"use strict";function c(a){e(this),this.model.defProperties({userID:0,email:"",firstName:"",middleIn:"",lastName:"",secondLastName:"",nickName:null,publicBio:null,genderID:0,preferredLanguageID:null,preferredCountryID:null,isProvider:!1,isCustomer:!1,isMember:!1,isAdmin:!1,mobilePhone:null,alternatePhone:null,providerProfileURL:null,providerWebsiteURL:null,createdDate:null,updatedDate:null,modifiedBy:null,active:!1,accountStatusID:0,bookCode:null,onboardingStep:null},a),this.fullName=d.computed(function(){return this.firstName()+" "+this.lastName()},this),this.userType=d.pureComputed({read:function(){var a=this.isCustomer(),b=this.isProvider(),c=this.isAdmin(),d=0;return this.isAnonymous()&&(d|=f.Anonymous),a&&(d|=f.Customer),b&&(d|=f.Provider),c&&(d|=f.Admin),d},owner:this}),this.isAnonymous=d.pureComputed(function(){return this.userID()<1},this),this.isUserType=function(a){return this.userType()&a}.bind(this)}var d=a("knockout"),e=a("./Model"),f={None:0,Anonymous:1,Customer:2,Provider:4,Admin:8,LoggedUser:14,User:15,System:16};b.exports=c,c.UserType=f,c.newAnonymous=function(){return new c({userID:0,email:"",firstName:"",onboardingStep:null})}},{"./Model":36,knockout:!1}],42:[function(a,b,c){var d=a("../models/Appointment"),e=a("./locations").locations,f=a("./services").services,g=a("knockout"),h=a("moment"),i=(h(),h().add(1,"days")),j=i.clone().hours(10).minutes(0).seconds(0),k=i.clone().hours(16).minutes(30).seconds(0),l=[new d({id:1,startTime:j,endTime:k,summary:"Massage Therapist Booking",services:f,ptotalPrice:95,location:g.toJS(e[0]),preNotesToClient:"Looking forward to seeing the new color",preNotesToSelf:"Ask him about his new color",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:2,startTime:new Date(2014,11,1,13,0,0),endTime:new Date(2014,11,1,13,50,0),summary:"Massage Therapist Booking",services:[f[0]],ptotalPrice:95,location:g.toJS(e[1]),preNotesToClient:"Something else",preNotesToSelf:"Remember that thing",client:{firstName:"Joshua",lastName:"Danielson"}}),new d({id:3,startTime:new Date(2014,11,1,16,0,0),endTime:new Date(2014,11,1,18,0,0),summary:"Massage Therapist Booking",services:[f[1]],ptotalPrice:95,location:g.toJS(e[2]),preNotesToClient:"",preNotesToSelf:"Ask him about the forgotten notes",client:{firstName:"Joshua",lastName:"Danielson"}})];c.appointments=l},{"../models/Appointment":26,"./locations":45,"./services":47,knockout:!1,moment:!1}],43:[function(a,b,c){var d=a("../models/CalendarSlot"),e=a("../utils/Time"),f=a("moment"),g=new Date,h=new Date;h.setDate(h.getDate()+1);var i=f(g).format("YYYY-MM-DD"),j=f(h).format("YYYY-MM-DD"),k=[new d({startTime:new e(g,0,0,0),endTime:new e(g,12,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(g,12,0,0),endTime:new e(g,13,0,0),subject:"Josh Danielson",description:"Deep Tissue Massage",link:"#!calendar/appointment/3",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({startTime:new e(g,13,0,0),endTime:new e(g,15,0,0),subject:"Do that important thing",description:null,link:"#!calendar/event/8",actionIcon:"glyphicon glyphicon-new-window",actionText:null,classNames:null}),new d({startTime:new e(g,15,0,0),endTime:new e(g,16,0,0),subject:"Iago Lorenzo",description:"Deep Tissue Massage Long Name",link:"#!calendar/appointment/5",actionIcon:null,actionText:"$159.90",classNames:null}),new d({startTime:new e(g,16,0,0),endTime:new e(g,0,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})],l=[new d({startTime:new e(h,0,0,0),endTime:new e(h,9,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,9,0,0),endTime:new e(h,10,0,0),subject:"Jaren Freely",description:"Deep Tissue Massage Long Name",link:"#!calendar/appointment/1",actionIcon:null,actionText:"$59.90",classNames:null}),new d({startTime:new e(h,10,0,0),endTime:new e(h,11,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,11,0,0),endTime:new e(h,12,45,0),subject:"CONFIRM-Susan Dee",description:"Deep Tissue Massage",link:"#!calendar/appointment/2",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({startTime:new e(h,12,45,0),endTime:new e(h,16,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,16,0,0),endTime:new e(h,17,15,0),subject:"Susan Dee",description:"Deep Tissue Massage",link:"#!calendar/appointment/3",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({startTime:new e(h,17,15,0),endTime:new e(h,18,30,0),subject:"Dentist appointment",description:null,link:"#!calendar/event/4",actionIcon:"glyphicon glyphicon-new-window",actionText:null,classNames:null}),new d({startTime:new e(h,18,30,0),endTime:new e(h,19,30,0),subject:"Susan Dee",description:"Deep Tissue Massage Long Name",link:"#!calendar/appointment/5",actionIcon:null,actionText:"$159.90",classNames:null}),new d({startTime:new e(h,19,30,0),endTime:new e(h,23,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"}),new d({startTime:new e(h,23,0,0),endTime:new e(h,0,0,0),subject:"Jaren Freely",description:"Deep Tissue Massage",link:"#!calendar/appointment/6",actionIcon:null,actionText:"$80",classNames:null})],m=[new d({startTime:new e(h,0,0,0),endTime:new e(h,0,0,0),subject:"Free",description:null,link:"#!calendar/new",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:"ListView-item--tag-success"})],n={"default":m};n[i]=k,n[j]=l,c.calendar=n},{"../models/CalendarSlot":29,"../utils/Time":52,moment:!1}],44:[function(a,b,c){var d=a("../models/Client"),e=[new d({firstName:"Joshua",lastName:"Danielson"}),new d({firstName:"Iago",lastName:"Lorenzo"}),new d({firstName:"Fernando",lastName:"Gago"}),new d({firstName:"Adam",lastName:"Finch"}),new d({firstName:"Alan",lastName:"Ferguson"}),new d({firstName:"Alex",lastName:"Pena"}),new d({firstName:"Alexis",lastName:"Peaca"}),new d({firstName:"Arthur",lastName:"Miller"})];c.clients=e},{"../models/Client":30}],45:[function(a,b,c){var d=a("../models/Location"),e=[new d({locationID:1,name:"ActviSpace",addressLine1:"3150 18th Street",postalCode:90001,isServiceRadius:!0,serviceRadius:2}),new d({locationID:2,name:"Corey's Apt",addressLine1:"187 Bocana St.",postalCode:90002}),new d({locationID:3,name:"Josh'a Apt",addressLine1:"429 Corbett Ave",postalCode:90003})];
c.locations=e},{"../models/Location":33}],46:[function(a,b,c){var d=a("../models/Message"),e=a("../utils/Time"),f=(a("moment"),new Date),g=new Date,h=new Date,i=new Date;g.setDate(g.getDate()-1),h.setDate(h.getDate()-2),i.setDate(i.getDate()-16);var j=[new d({createdDate:new e(f,11,0,0),subject:"CONFIRM-Susan Dee",content:"Deep Tissue Massage",link:"#messages/inbox/1",actionIcon:null,actionText:"$70",classNames:"ListView-item--tag-warning"}),new d({createdDate:new e(g,13,0,0),subject:'Do you do "Exotic Massage"?',content:"Hi, I wanted to know if you perform as par of your services...",link:"#messages/inbox/3",actionIcon:"glyphicon glyphicon-share-alt",actionText:null,classNames:null}),new d({createdDate:new e(h,12,0,0),subject:"Josh Danielson",content:"Deep Tissue Massage",link:"#messages/inbox/2",actionIcon:"glyphicon glyphicon-plus",actionText:null,classNames:null}),new d({createdDate:new e(i,15,0,0),subject:"Inquiry",content:"Another question from another client.",link:"#messages/inbox/4",actionIcon:"glyphicon glyphicon-share-alt",classNames:null})];c.messages=j},{"../models/Message":35,"../utils/Time":52,moment:!1}],47:[function(a,b,c){var d=a("../models/Service"),e=[new d({name:"Deep Tissue Massage",price:95,duration:120}),new d({name:"Tissue Massage",price:60,duration:60}),new d({name:"Special oils",price:95,isAddon:!0}),new d({name:"Some service extra",price:40,duration:20,isAddon:!0})];c.services=e},{"../models/Service":39}],48:[function(a,b,c){var d=a("../utils/Time"),e=a("moment"),f=new Date,g=new Date;g.setDate(g.getDate()+1);var h=e(f).format("YYYY-MM-DD"),i=e(g).format("YYYY-MM-DD"),j=[d(f,9,15),d(f,11,30),d(f,12,0),d(f,12,30),d(f,16,15),d(f,18,0),d(f,18,30),d(f,19,0),d(f,19,30),d(f,21,30),d(f,22,0)],k=[d(g,8,0),d(g,10,30),d(g,11,0),d(g,11,30),d(g,12,0),d(g,12,30),d(g,13,0),d(g,13,30),d(g,14,45),d(g,16,0),d(g,16,30)],l=[],m={"default":l};m[h]=j,m[i]=k,c.timeSlots=m},{"../utils/Time":52,moment:!1}],49:[function(){Function.prototype._delayed=function(a){var b=this;return function(){var c=this,d=arguments;setTimeout(function(){b.apply(c,d)},a)}}},{}],50:[function(){Function.prototype._inherits=function(a){this.prototype=Object.create(a.prototype,{constructor:{value:this,enumerable:!1,writable:!0,configurable:!0}})}},{}],51:[function(a,b){"use strict";function c(a){return a&&a[0]&&a[0].toLowerCase&&a[0].toLowerCase()+a.slice(1)||a}function d(a){if(!a||"object"!=typeof a)return a;var b=Array.isArray(a)?[]:{};for(var e in a)if(a.hasOwnProperty(e)){var f=c(e);b[f]="object"==typeof a[e]?d(a[e]):a[e]}return b}function e(a){var b="string"==typeof a?a:a&&a.url;this.baseUrl=b,this.extraHeaders=null}var f=a("jquery");e.prototype.get=function(a,b){return this.request(a,"get",b)},e.prototype.put=function(a,b){return this.request(a,"put",b)},e.prototype.post=function(a,b){return this.request(a,"post",b)},e.prototype["delete"]=function(a,b){return this.request(a,"delete",b)},e.prototype.putFile=function(a,b){return this.request(a,"delete",b,"multipart/form-data")},e.prototype.request=function g(a,b,c,e){var h=this;return Promise.resolve(f.ajax({url:this.baseUrl+a,dataType:"json",method:b,headers:this.extraHeaders,data:c&&JSON.parse(JSON.stringify(c)),contentType:e||"application/x-www-form-urlencoded"})).then(d)["catch"](function(d){if(401===d.status){var f=g.bind(this,a,b,c,e),i=h.onAuthorizationRequired(f);if(i)return Promise.resolve(i)["catch"](function(){return d})}return d})},e.prototype.onAuthorizationRequired=function(){},b.exports=e},{}],52:[function(a,b){function c(a,b,c,d){return a instanceof Date||(d=c,c=b,b=a,a=new Date),new Date(a.getFullYear(),a.getMonth(),a.getDate(),b||0,c||0,d||0)}b.exports=c},{}],53:[function(a,b){"use strict";a("../models/User").UserType;b.exports=function(a){return function(b){var c=a.getActivityControllerByRoute(b),d=a.model.user(),e=d&&d.userType();if(c&&c.accessLevel){var f=c.accessLevel&e;if(!f)return{requiredLevel:c.accessLevel,currentType:e}}return null}}},{"../models/User":41}],54:[function(a,b,c){"use strict";var d=function(a){return"function"==typeof a?a():a};c.defineCrudApiForRest=function(a){var b=a.extendedObject,c=a.Model,e=a.modelName,f=a.modelListName,g=a.modelUrl,h=a.idPropertyName;b["get"+f]=function(a){return this.rest.get(g,a).then(function(a){return a&&a.map(function(a){return new c(a)})})},b["get"+e]=function(a){return this.rest.get(g+"/"+a).then(function(a){return a&&new c(a)})},b["post"+e]=function(a){return this.rest.post(g,a).then(function(a){return new c(a)})},b["put"+e]=function(a){return this.rest.put(g+"/"+d(a[h]),a)},b["set"+e]=function(a){var b=d(a[h]);return b?this["put"+e](a):this["post"+e](a)},b["del"+e]=function(a){var b=a&&d(a[h])||a;if(b)return this.rest["delete"](g+"/"+b,a).then(function(a){return a&&new c(a)});throw new Error("Need an ID or an object with the ID property to delete")}}},{}],55:[function(a,b,c){"use strict";function d(a){var b={};return b.popover={update:function(b,d){var e=a.unwrap(d()),g=f.extend(!0,{},e);g.content=a.unwrap(e.content),g.content?(g.content=c.i18n&&c.i18n.t(g.content)||g.content,f(b).popover("destroy").popover(g),f(b).is(":focus")&&f(b).popover("show")):f(b).popover("destroy")}},b}function e(a,b){var c,e=d(a);for(var f in e)(!e.hasOwnProperty||e.hasOwnProperty(f))&&(c=b?b+f[0].toUpperCase()+f.slice(1):f,a.bindingHandlers[c]=e[f])}var f=a("jquery");c.i18n=null,c.plugIn=e,c.createBindingHelpers=d},{}],56:[function(a,b){"use strict";var c=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],d=RegExp("["+c.join("\\")+"]","g"),e=function(a){return a.replace(d,"\\$&")};b.exports=e},{}],57:[function(a,b){"use strict";var c=["#","&","~","=",">","'",":",'"',"!",";",","],d=[".","*","+","|","[","]","(",")","/","^","$"],e=new RegExp("("+c.join("|")+"|\\"+d.join("|\\")+")","g");b.exports=function(a){return a.replace(e,"\\$1")}},{}],58:[function(a,b){"user strict";b.exports=function(a){a=a||window.location.href;var b,c=[],d=a.indexOf("?");if(d>-1)for(var e=a.slice(d+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c}},{}],59:[function(a,b){"use strict";function c(a){this.idAttributeName=a.idAttributeName||"id",this.allowDuplicates=!!a.allowDuplicates||!1,this.$root=null,d(function(){this.$root=d(a.root||"body")}.bind(this))}var d=a("jquery"),e=a("../escapeSelector");b.exports=c,c.prototype.find=function(a,b){var c=d(b||this.$root);return c.find("["+this.idAttributeName+'="'+e(a)+'"]')},c.prototype.getActive=function(){return this.$root.find("["+this.idAttributeName+"]:visible")},c.prototype.inject=function(a,b){b=b.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/g,"");var c=d("<div/>",{html:b}),e=this.find(a,c);if(0===e.length&&(e=c.attr(this.idAttributeName,a)),!this.allowDuplicates){var f=this.find(a);f.length>0&&(f.replaceWith(e),e=f)}e.appendTo(this.$root)},c.prototype["switch"]=function(a,b,c,d){b.is(":visible")?c.emit(c.events.itemReady,b,d):(c.emit(c.events.willOpen,b,d),b.show(),c.emit(c.events.itemReady,b,d),c.emit(c.events.opened,b,d)),a.is(":visible")&&(c.emit(c.events.willClose,a,d),a.find(":focus").blur(),a.hide(),c.emit(c.events.closed,a,d))},c.prototype.init=function(){this.getActive().hide()}},{"../escapeSelector":57}],60:[function(a,b){"use strict";function c(a){d.EventEmitter.call(this),this.$=a.jquery||d.jquery,this.$root=this.$(a.root),this.baseUrl=a.baseUrl||"",this.forceHashbang=a.forceHashbang||!1,this.linkEvent=a.linkEvent||"click",this.parseUrl=(a.parseUrl||d.parseUrl).bind(this,this.baseUrl),this.absolutizeUrl=(a.absolutizeUrl||d.absolutizeUrl).bind(this,this.baseUrl),this.history=a.history||window.history,this.indexName=a.indexName||"index",this.items=a.domItemsManager,this.loader="undefined"==typeof a.loader?d.loader:a.loader,this.loader&&(this.loader.baseUrl=this.baseUrl),this.events={willOpen:"shell-will-open",willClose:"shell-will-close",itemReady:"shell-item-ready",closed:"shell-closed",opened:"shell-opened"},this.accessControl=a.accessControl||d.accessControl,this.nonAccessName=a.nonAccessName||"index"}var d=a("./dependencies");c.prototype=Object.create(d.EventEmitter.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b.exports=c,c.prototype.go=function(a,b){return this.forceHashbang?/^#!/.test(a)||(a="#!"+a):a=this.absolutizeUrl(a),this.history.pushState(b,void 0,a),this.replace(b)},c.prototype.goBack=function(a,b){b=0-(b||1),0>b&&Math.abs(b)>=this.history.length?this.go(this.indexName):(this._pendingStateUpdate=a,this.history.go(b))},c.prototype.getUpdatedState=function(a){a=this._pendingStateUpdate||a||this.history.state,this._pendingStateUpdate=null;var b=/#!/.test(location.href),c=(b?location.hash:location.pathname)+(location.search||"");return a.route=this.parseUrl(c),a},c.prototype.replace=function(a){a=this.getUpdatedState(a),a.route.root===!0&&(a.route=this.parseUrl(this.indexName));var b=this.accessControl(a);if(b)return this.go(this.nonAccessName,b);var c=this.items.find(a.route.name),d=this,e=null;if(c&&c.length)e=new Promise(function(b,e){try{var f=d.items.getActive();f=f.not(c),d.items["switch"](f,c,d,a),b()}catch(g){e(g)}});else if(this.loader)e=this.loader.load(a.route).then(function(b){return d.items.inject(a.route.name,b),d.items.find(a.route.name).length?d.replace(a):void 0});else{var f=new Error("Page not found ("+a.route.name+")");console.warn("Shell Page not found, state:",a),e=Promise.reject(f)}var g=this;return e["catch"](function(a){return a instanceof Error||(a=new Error(a)),console.error("Shell, unexpected error.",a),g.emit("error",a),a}),e},c.prototype.run=function(){var a=this;this.$(window).on(this.history.popstateEvent||"popstate",function(b){var c=b.state||b.originalEvent&&b.originalEvent.state||a.history.state;console.log("onpopstate state",c),a.replace(c)}),this.$("body").on(this.linkEvent,"[href], [data-href]",function(b){var c=a.$(this),d=c.attr("href")||c.data("href");if(!/^[a-z]+:/i.test(d)){if(a.forceHashbang&&/^#([^!]|$)/.test(d))return void b.preventDefault();b.preventDefault(),a.go(d)}}),this.items.init(),this.replace()}},{"./dependencies":62}],61:[function(a,b){"use strict";function c(a,b){b=d(b);var c=new RegExp("^"+e(a),"i");return c.test(b)?b:d(a+b)}var d=a("./sanitizeUrl"),e=a("../escapeRegExp");b.exports=c},{"../escapeRegExp":56,"./sanitizeUrl":67}],62:[function(a,b){"use strict";b.exports={parseUrl:null,absolutizeUrl:null,jquery:null,loader:null,accessControl:function(){return null},EventEmitter:null}},{}],63:[function(a,b){"use strict";function c(a){var b=+j(a)._suid;return isNaN(b)?null:b}function d(a,b){var c=j(a);c.push("_suid"),c._suid=b;for(var d=[],e=0;e<c.length;e++)d.push(c[e]+"="+encodeURIComponent(c[c[e]]));if(d=d.join("&")){var f=a.indexOf("?");f>-1&&(a=a.substr(0,f)),a+="?"+d}return a}function e(){setTimeout(function(){sessionStorage.setItem("hashbangHistory.store",JSON.stringify(k))},1500)}function f(a){if(a){for(var b in a)return a;return null}return a}function g(a){a=i(a||"");var b=a.indexOf("#");return b>-1&&(a=a.substr(b+1)),a=a.replace(/^!/,"")}var h=a("jquery"),i=a("./sanitizeUrl"),j=a("../getUrlQuery"),k=sessionStorage.getItem("hashbangHistory.store");k=k?JSON.parse(k):{states:[]};var l=null,m={pushState:function(a,b,c){if(c=g(c),a=f(a)||null,null!==a){k.states.push(a);var h=k.states.length-1;c=d(c,h),e()}l=c,location.hash="#!"+c},replaceState:function(a,b,h){h=g(h);var i=c(h),j=null!==i;a=f(a)||null,(null!==a||j)&&(j?k.states[i]=a:(k.states.push(a),i=k.states.length-1,h=d(h,i)),e()),l=h,location.hash="#!"+h},get state(){var a=k.states.length;return 0===a?null:k.states[a-1]},get length(){return window.history.length},go:function(a){window.history.go(a)},back:function(){window.history.back()},forward:function(){window.history.forward()}},n=h(window);n.on("hashchange",function(a){var b=a.originalEvent.newURL;if(b=g(b),b!==l){var d=c(b),e=null;null!==d&&(e=k.states[d]),n.trigger(new h.Event("popstate",{state:e}),"hashbangHistory")}}),n.on("popstate",function(a,b){"hashbangHistory"!==b&&(a.preventDefault(),a.stopImmediatePropagation())}),b.exports=m},{"../getUrlQuery":58,"./sanitizeUrl":67}],64:[function(a,b,c){"use strict";var d=a("./dependencies"),e=a("./DomItemsManager"),f=a("./parseUrl"),g=a("./absolutizeUrl"),h=a("jquery"),i=a("./loader"),j=a("events").EventEmitter;h.extend(d,{parseUrl:f,absolutizeUrl:g,jquery:h,loader:i,EventEmitter:j});var k=a("./Shell");c.Shell=k,c.DomItemsManager=e},{"./DomItemsManager":59,"./Shell":60,"./absolutizeUrl":61,"./dependencies":62,"./loader":65,"./parseUrl":66,events:!1}],65:[function(a,b){"use strict";a("jquery");b.exports={baseUrl:"/",load:function(a){return new Promise(function(b){console.log("LOADER PROMISE",a,a.name),b("")})}}},{}],66:[function(a,b){"use strict";function c(a,b){b=b||"";var c=b;b=b.replace(/^#!/,"").replace(/^#/,""),b=b.replace(/^\/|^\.\//,"");var f=d(b||"?");b=b.replace(/\?.*$/,"");var g=b.replace(new RegExp("^"+e(a),"i"),""),h=/^\/?([^\/\.]+)[^\/]*(\/.*)*$/.exec(g),i={root:!0,name:null,segments:null,path:null,url:c,query:f};return h&&(i.root=!1,h[1]&&(i.name=h[1],h[2]?(i.path=h[2],i.segments=h[2].replace(/^\//,"").split("/")):(i.path="/",i.segments=[]))),i}var d=a("../getUrlQuery"),e=a("../escapeRegExp");b.exports=c},{"../escapeRegExp":56,"../getUrlQuery":58}],67:[function(a,b){"use strict";function c(a){return a.replace(/\.{2,}/g,"").replace(/\/{2,}/g,"/")}b.exports=c},{}],68:[function(a,b){"use strict";var c=a("../models/CalendarEvent"),d=a("../utils/apiHelper");b.exports=function(a){d.defineCrudApiForRest({extendedObject:a.prototype,Model:c,modelName:"CalendarEvent",modelListName:"CalendarEvents",modelUrl:"events",idPropertyName:"calendarEventID"})}},{"../models/CalendarEvent":28,"../utils/apiHelper":54}],69:[function(a,b){function c(a){d(this),this.model.defProperties({user:e.newAnonymous()},a)}var d=(a("knockout"),a("../models/Model")),e=a("../models/User"),f=a("../utils/Rest"),g=a("localforage");c.prototype.init=function(){return this.rest=new f("http://localhost/source/en-US/rest/"),this.rest.onAuthorizationRequired=function(a){this.tryLogin().then(function(){a()})}.bind(this),g.config({name:"LoconomicsApp",version:.1,size:4980736,storeName:"keyvaluepairs",description:"Loconomics App",driver:g.LOCALSTORAGE}),g.getItem("profile").then(function(a){a&&this.user().model.updateWith(a)}.bind(this)),new Promise(function(a){this.tryLogin().then(a,function(){a()})}.bind(this))},c.prototype.tryLogin=function(){return g.getItem("credentials").then(function(a){if(a)return this.login(a.username,a.password);throw new Error("No saved credentials")}.bind(this))},c.prototype.login=function(a,b){return this.rest.post("login",{username:a,password:b,returnProfile:!0}).then(function(c){return this.rest.extraHeaders={alu:c.userId,alk:c.authKey},g.setItem("credentials",{userID:c.userId,username:a,password:b}),g.setItem("profile",c.profile),this.user().model.updateWith(c.profile),c}.bind(this))},c.prototype.logout=function(){return this.rest.post("logout").then(function(){this.rest.extraHeaders=null,g.removeItem("credentials")}.bind(this))},c.prototype.getUpcomingBookings=function(){return this.rest.get("upcoming-bookings")},c.prototype.getBooking=function(a){return this.rest.get("get-booking",{bookingID:a})},b.exports=c,a("./AppModel-events")(c)},{"../models/Model":36,"../models/User":41,"../utils/Rest":51,"./AppModel-events":68,knockout:!1,localforage:!1}],70:[function(a,b){function c(a){d(this),this.model.defProperties({link:"",icon:""},a)}var d=(a("knockout"),a("../models/Model"));b.exports=c,c.goHome=new c({link:"/",icon:"glyphicon glyphicon-home"}),c.goBack=new c({link:"#!go-back",icon:"glyphicon glyphicon-arrow-left"}),c.newItem=new c({link:"#!new",icon:"glyphicon glyphicon-plus"}),c.newCalendarItem=new c({link:"#!calendar/new",icon:"glyphicon glyphicon-plus"})},{"../models/Model":36,knockout:!1}]},{},[23]);