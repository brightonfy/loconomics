<!-- Activity appointment -->
<div class="container-fluid" data-activity="appointment">

  <!-- Appointment View (cards) -->
  <div id="calendarAppointmentView" class="full-height row CardsDeck CardsDeck--dotsSlider" data-bind="event: { swipeleft: goNext, swiperight: goPrevious }">
    <div class="Card AppointmentCard">
      <div class="Card-title">
        <h3 data-bind="text: currentAppointment().stateHeader()"></h3>
        <h2 data-bind="text: currentAppointment().summary()"></h2>
      </div>
      <ul class="list-unstyled">
        <li data-bind="event: { tap: editMode() && pickDateTime }">
            <span class="AppointmentCard-icon glyphicon glyphicon-time"></span>
            <span class="AppointmentCard-data">
              <span data-bind="visible: currentAppointment().startTime()">
                <span data-bind="text: currentAppointment().startTime(), format: { type: 'datetime', format: 'MMM Do' }"></span>
                <span data-bind="text: currentAppointment().displayedTimeRange()"></span>
              </span>
              <span data-bind="visible: editMode() && !currentAppointment().startTime()" class="AppointmentCard-placeholderLabel">Select date/time</span>
            </span>
            <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().startTime(), 'glyphicon-plus': !currentAppointment().startTime()}"></span></span>
        </li>
        <li data-bind="event: { tap: editMode() && pickClient }">
          <span class="AppointmentCard-icon glyphicon glyphicon-user"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: (currentAppointment().client() && currentAppointment().client().fullName())"></span>
            <span data-bind="visible: editMode() && !currentAppointment().client()" class="AppointmentCard-placeholderLabel">Select/Add client</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().client(), 'glyphicon-plus': !currentAppointment().client()}"></span></span>
        </li>
        <li data-bind="event: { tap: editMode() && pickService }">
          <span class="AppointmentCard-icon glyphicon glyphicon-tag"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: currentAppointment().servicesSummary()"></span>
            <span data-bind="visible: editMode() && !currentAppointment().servicesSummary()" class="AppointmentCard-placeholderLabel">Select/Add service(s)</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().servicesSummary(), 'glyphicon-plus': !currentAppointment().servicesSummary()}"></span></span>
        </li>
        <li data-bind="visible: !isNew(), event: { tap: editMode() && changePrice }">
          <span class="AppointmentCard-icon glyphicon glyphicon-usd"></span>
          <span class="AppointmentCard-data" data-bind="text: currentAppointment().ptotalPrice, format: { type: 'number', format: '$0,0.00' }"></span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().ptotalPrice(), 'glyphicon-plus': !currentAppointment().ptotalPrice()}"></span></span>
        </li>
        <li data-bind="event: { tap: editMode() && pickLocation }">
          <span class="AppointmentCard-icon glyphicon glyphicon-screenshot"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: currentAppointment().locationSummary"></span>
            <span data-bind="visible: editMode() && !currentAppointment().locationSummary()" class="AppointmentCard-placeholderLabel">Select/Add location</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().locationSummary(), 'glyphicon-plus': !currentAppointment().locationSummary()}"></span></span>
        </li>

        <li data-bind="event: { tap: editMode() && editTextField.bind(this, 'preNotesToClient') }">
          <span class="AppointmentCard-icon glyphicon glyphicon-edit"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: currentAppointment().preNotesToClient"></span>
            <span data-bind="visible: !currentAppointment().preNotesToClient()" class="AppointmentCard-placeholderLabel">Notes to client</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().preNotesToClient(), 'glyphicon-plus': !currentAppointment().preNotesToClient()}"></span></span>
        </li>
        <li data-bind="event: { tap: editMode() && editTextField.bind(this, 'preNotesToSelf') }">
          <span class="AppointmentCard-icon glyphicon glyphicon-edit"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: currentAppointment().preNotesToSelf"></span>
            <span data-bind="visible: !currentAppointment().preNotesToSelf()" class="AppointmentCard-placeholderLabel">Notes to self</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().preNotesToSelf(), 'glyphicon-plus': !currentAppointment().preNotesToSelf()}"></span></span>
        </li>

        <li data-bind="event: { tap: editMode() && editTextField.bind(this, 'postNotesToClient') }, visible: !isNew() && currentAppointment().itStarted()">
          <span class="AppointmentCard-icon glyphicon glyphicon-file"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: currentAppointment().postNotesToClient"></span>
            <span data-bind="visible: !currentAppointment().postNotesToClient()" class="AppointmentCard-placeholderLabel">Notes to client (afterwards)</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().postNotesToClient(), 'glyphicon-plus': !currentAppointment().postNotesToClient()}"></span></span>
        </li>
        <li data-bind="event: { tap: editMode() && editTextField.bind(this, 'postNotesToSelf') }, visible: !isNew() && currentAppointment().itStarted()">
          <span class="AppointmentCard-icon glyphicon glyphicon-file"></span>
          <span class="AppointmentCard-data">
            <span data-bind="text: currentAppointment().postNotesToSelf"></span>
            <span data-bind="visible: !currentAppointment().postNotesToSelf()" class="AppointmentCard-placeholderLabel">Booking summary (seen only by you)</span>
          </span>
          <span class="AppointmentCard-editIcon"><span class="glyphicon" data-bind="css: { 'glyphicon-pencil': currentAppointment().postNotesToSelf(), 'glyphicon-plus': !currentAppointment().postNotesToSelf()}"></span></span>
        </li>
      </ul>
      <div class="AppointmentCard-actions row" data-bind="visible: !editMode()">
        <div class="col-xs-6"><button type="button" class="btn btn-warning btn-block" data-bind="event: { tap: edit }">Edit</button></div>
        <div class="col-xs-6"><button type="button" class="btn btn-default btn-block">Contact client</button></div>
      </div>
      <div class="AppointmentCard-actions row" data-bind="visible: editMode()">
        <div class="col-xs-6"><button type="button" class="btn btn-danger btn-block" data-bind="event: { tap: cancel }">Cancel</button></div>
        <div class="col-xs-6"><button type="button" class="btn btn-primary btn-block" data-bind="event: { tap: save }">Save</button></div>
      </div>
    </div>
    <div class="CardsDeck-dots" data-bind="foreach: appointments">
      <span data-bind="css: { 'is-active': ($index() == $parent.currentIndex()) }"></span>
    </div>
  </div>
</div>
