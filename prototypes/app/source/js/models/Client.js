/** Client model **/
'use strict';

var ko = require('knockout'),
    Model = require('./Model');

function Client(values) {
    
    Model(this);
    
    this.model.defProperties({
        id: 0,
        firstName: '',
        lastName: '',
        email: '',
        mobilePhone: null,
        alternatePhone: null,
        birthMonthDay: null,
        birthMonth: null,
        notesAboutClient: null
    }, values);

    this.fullName = ko.pureComputed(function() {
        return (this.firstName() + ' ' + this.lastName());
    }, this);
    
    this.birthDay = ko.pureComputed(function() {
        if (this.birthMonthDay() &&
            this.birthMonth()) {
            
            // TODO i10n
            return this.birthMonth() + '/' + this.birthMonthDay();
        }
        else {
            return null;
        }
    }, this);
    
    this.phoneNumber = ko.pureComputed({
        read: function() {
            var m = this.mobilePhone(),
                a = this.alternatePhone();

            return m ? m : a;
        },
        write: function(v) {
            // TODO
        },
        owner: this
    });
    
    this.canReceiveSms = ko.pureComputed({
        read: function() {
        
            var m = this.mobilePhone();

            return m ? true : false;
        },
        write: function(v) {
            // TODO
        },
        owner: this
    });
}

module.exports = Client;
